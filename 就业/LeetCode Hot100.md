# LeetCode Hot100

## å“ˆå¸Œ

### [1. ä¸¤æ•°ä¹‹å’Œ](https://leetcode.cn/problems/two-sum/)

#### **é¢˜ç›®æè¿°**

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ `target`ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º **å’Œä¸ºç›®æ ‡å€¼** *`target`* çš„é‚£ **ä¸¤ä¸ª** æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚

ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆï¼Œå¹¶ä¸”ä½ ä¸èƒ½ä½¿ç”¨ä¸¤æ¬¡ç›¸åŒçš„å…ƒç´ ã€‚

ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [2,7,11,15], target = 9
è¾“å‡ºï¼š[0,1]
è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [3,2,4], target = 6
è¾“å‡ºï¼š[1,2]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [3,3], target = 6
è¾“å‡ºï¼š[0,1]
```

**æç¤ºï¼š**

- `2 <= nums.length <= 104`
- `-109 <= nums[i] <= 109`
- `-109 <= target <= 109`
- **åªä¼šå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆ**

**è¿›é˜¶ï¼š**ä½ å¯ä»¥æƒ³å‡ºä¸€ä¸ªæ—¶é—´å¤æ‚åº¦å°äº `O(n2)` çš„ç®—æ³•å—ï¼Ÿ

#### é¢˜è§£

1. ç”¨unordered_mapæ¥ä¿å­˜éå†è¿‡çš„æ•°å­—å’Œä¸‹æ ‡ï¼›

2. æ¯éå†ä¸€ä¸ªæ•°ï¼Œå°±åœ¨unordered_mapä¸­find(target - cur_num)ï¼š

   a. å¦‚æœfindåˆ°ï¼Œå°±returnï¼›

   b. å¦‚æœæ²¡éå†åˆ°ï¼Œå°±å°†curçš„æ•°å­—å’Œä¸‹æ ‡åŠ å…¥åˆ°unordered_mapï¼›

```C++
class Solution {
public:
    vector<int> twoSum(vector<int>& nums, int target) {
        unordered_map<int, int> umap;
        for (int i = 0; i < nums.size(); i ++ ) {
            int cur = nums[i];
            int need = target - cur;
            auto f = umap.find(need);
            if (f != umap.end()) {
                return {f->second, i};
            } else {
                // nums[i]å¿…é¡»åœ¨ç¬¬ä¸€ç»´ä½œä¸ºkeyï¼Œå› ä¸ºumapçš„findæ˜¯å¯»æ‰¾keyä¸­æ˜¯å¦æ»¡è¶³æ¡ä»¶
                umap.insert({nums[i], i});
            }
        }
        return {};
    }
};
```

### [49. å­—æ¯å¼‚ä½è¯åˆ†ç»„](https://leetcode.cn/problems/group-anagrams/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œè¯·ä½ å°† **å­—æ¯å¼‚ä½è¯** ç»„åˆåœ¨ä¸€èµ·ã€‚å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç»“æœåˆ—è¡¨ã€‚

**å­—æ¯å¼‚ä½è¯** æ˜¯ç”±é‡æ–°æ’åˆ—æºå•è¯çš„æ‰€æœ‰å­—æ¯å¾—åˆ°çš„ä¸€ä¸ªæ–°å•è¯ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: strs = ["eat", "tea", "tan", "ate", "nat", "bat"]
è¾“å‡º: [["bat"],["nat","tan"],["ate","eat","tea"]]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: strs = [""]
è¾“å‡º: [[""]]
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: strs = ["a"]
è¾“å‡º: [["a"]]
```

**æç¤ºï¼š**

- `1 <= strs.length <= 104`
- `0 <= strs[i].length <= 100`
- `strs[i]` ä»…åŒ…å«å°å†™å­—æ¯

#### é¢˜è§£

ç”±äºäº’ä¸ºå­—æ¯å¼‚ä½è¯çš„ä¸¤ä¸ªå­—ç¬¦ä¸²åŒ…å«çš„å­—æ¯ç›¸åŒï¼Œå› æ­¤å¯¹ä¸¤ä¸ªå­—ç¬¦ä¸²åˆ†åˆ«è¿›è¡Œæ’åºä¹‹åå¾—åˆ°çš„å­—ç¬¦ä¸²ä¸€å®šæ˜¯ç›¸åŒçš„ï¼Œæ•…å¯ä»¥å°†æ’åºä¹‹åçš„å­—ç¬¦ä¸²ä½œä¸ºå“ˆå¸Œè¡¨çš„é”®ã€‚
æ—¶é—´å¤æ‚åº¦ï¼šO(nklogk)ï¼Œå…¶ä¸­ n æ˜¯ strs ä¸­çš„å­—ç¬¦ä¸²çš„æ•°é‡ï¼Œk æ˜¯ strs ä¸­çš„å­—ç¬¦ä¸²çš„çš„æœ€å¤§é•¿åº¦ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(nk)ï¼Œå…¶ä¸­ n æ˜¯ strs ä¸­çš„å­—ç¬¦ä¸²çš„æ•°é‡ï¼Œk æ˜¯ strs ä¸­çš„å­—ç¬¦ä¸²çš„çš„æœ€å¤§é•¿åº¦ã€‚

```c++
class Solution {
public:
    vector<vector<string>> groupAnagrams(vector<string>& strs) {
        unordered_map<string, vector<string>> umap;
        for (string str: strs) {
            string k = str;
            sort(k.begin(), k.end());
            umap[k].push_back(str);
        }

        vector<vector<string>> ans;
        for (auto it: umap) {
            ans.push_back(it.second);
        }
        return ans;
    }
};
```

### [128. æœ€é•¿è¿ç»­åºåˆ—](https://leetcode.cn/problems/longest-consecutive-sequence/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ `nums` ï¼Œæ‰¾å‡ºæ•°å­—è¿ç»­çš„æœ€é•¿åºåˆ—ï¼ˆä¸è¦æ±‚åºåˆ—å…ƒç´ åœ¨åŸæ•°ç»„ä¸­è¿ç»­ï¼‰çš„é•¿åº¦ã€‚

è¯·ä½ è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [100,4,200,1,3,2]
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿æ•°å­—è¿ç»­åºåˆ—æ˜¯ [1, 2, 3, 4]ã€‚å®ƒçš„é•¿åº¦ä¸º 4ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0,3,7,2,5,8,4,6,0,1]
è¾“å‡ºï¼š9
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1,0,1,2]
è¾“å‡ºï¼š3
```

**æç¤ºï¼š**

- `0 <= nums.length <= 105`
- `-109 <= nums[i] <= 109`

#### é¢˜è§£

å…ˆç”¨unordered_setå­˜å‚¨æ‰€æœ‰å…ƒç´ ï¼Œå»ºç«‹å“ˆå¸Œè¡¨ï¼Œç„¶åéå†å“ˆå¸Œè¡¨ä¸­å…ƒç´ ï¼š

- å¦‚æœnum - 1åœ¨å“ˆå¸Œè¡¨ä¸­å­˜åœ¨ï¼Œå°±è·³è¿‡ï¼šæ¯”å¦‚åºåˆ—ä¸º123 567ï¼Œåˆ™ä¼šä»¥1å’Œ5å¼€å§‹éå†æœ€é•¿è¿ç»­åºåˆ—ï¼Œå¦åˆ™ä¼šé‡å¤éå†å¯¼è‡´è¶…æ—¶ï¼›
- å¦‚æœnum - 1åœ¨å“ˆå¸Œè¡¨ä¸­ä¸å­˜åœ¨ï¼Œè¯´æ˜numæ˜¯**è¿ç»­åºåˆ—**çš„**å¼€å§‹**ï¼Œåˆ™ä»è¿™ä¸ªåºåˆ—å¼€å§‹éå†å¹¶ç»Ÿè®¡é•¿åº¦ï¼›æœ€ç»ˆè¿”å›æœ€é•¿è¿ç»­åºåˆ—å³å¯ã€‚

```c++
class Solution {
public:
    int longestConsecutive(vector<int>& nums) {
        // ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        if (!nums.size()) return 0;
        unordered_set<int> uset;  // åˆ›å»ºå“ˆå¸Œè¡¨
        for (const int& num : nums) {
            uset.insert(num);
        }

        int result = 1;
        for (auto& num : uset) {  // è¿™é‡Œä¸€å®šæ˜¯éå†usetï¼Œå¦åˆ™ä¼šè¶…æ—¶â€¼ï¸
            cout << num << " ";
            // å¦‚æœnum - 1ä¸å­˜åœ¨äºæ•°ç»„ä¸­æ—¶ï¼Œæ‰è¿›è¡Œç»Ÿè®¡é•¿åº¦ï¼›
            // ï¼ˆå› ä¸ºå½“num - 1åœ¨æ•°ç»„ä¸­ï¼Œåœ¨ä¸Šä¸€è½®éå†æ—¶å°±ä¼šç»Ÿè®¡åˆ°ï¼Œè¿™é‡Œå†ç®—å°±é‡å¤ç»Ÿè®¡äº†ï¼Œ
            // ä¹Ÿå°±æ˜¯è¯´å½“éå†ä¸­æ–­æ—¶æ‰ä¼šé‡æ–°éå†ï¼‰
            if (!uset.count(num - 1)) {
                int cur = num;
                int temp_len = 1;

                // ä»¥curä¸ºèµ·ç‚¹æ‰¾å½“å‰è¿ç»­åºåˆ—çš„é•¿åº¦
                while (uset.count(cur + 1)) {
                    cur = cur + 1;
                    temp_len += 1;
                }
                result = max(result, temp_len);
            }
        }

        return result;
    }
};
```



## åŒæŒ‡é’ˆ

### [283. ç§»åŠ¨é›¶](https://leetcode.cn/problems/move-zeroes/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ•°ç»„ `nums`ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ `0` ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚

**è¯·æ³¨æ„** ï¼Œå¿…é¡»åœ¨ä¸å¤åˆ¶æ•°ç»„çš„æƒ…å†µä¸‹åŸåœ°å¯¹æ•°ç»„è¿›è¡Œæ“ä½œã€‚ 

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [0,1,0,3,12]
è¾“å‡º: [1,3,12,0,0]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [0]
è¾“å‡º: [0]
```

**æç¤º**:

- `1 <= nums.length <= 104`
- `-231 <= nums[i] <= 231 - 1`

**è¿›é˜¶ï¼š**ä½ èƒ½å°½é‡å‡å°‘å®Œæˆçš„æ“ä½œæ¬¡æ•°å—ï¼Ÿ

#### é¢˜è§£

ä¸€ä¸ªwhileå³å¯ï¼Œ

- å½“num[right] == 0ï¼Œå°±åªright++ï¼›

- å½“num[left] != 0ï¼Œå°±äº¤æ¢leftå’Œrightä¸Šçš„æ•°å­—ï¼Œç„¶åéƒ½++ï¼›

```c++
class Solution {
public:
    void moveZeroes(vector<int>& nums) {
        int n = nums.size();
        int left = 0, right = 0;
        while (right < n) {
            if (nums[right]) {
                swap(nums[left], nums[right]);
                left++;
            }
            right++;
        }
    }
};
```

### [11. ç››æœ€å¤šæ°´çš„å®¹å™¨](https://leetcode.cn/problems/container-with-most-water/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•´æ•°æ•°ç»„ `height` ã€‚æœ‰ `n` æ¡å‚çº¿ï¼Œç¬¬ `i` æ¡çº¿çš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯ `(i, 0)` å’Œ `(i, height[i])` ã€‚

æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ `x` è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚

è¿”å›å®¹å™¨å¯ä»¥å‚¨å­˜çš„æœ€å¤§æ°´é‡ã€‚

**è¯´æ˜ï¼š**ä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚ 

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/question_11.jpg" alt="img" style="zoom: 50%;" />

```
è¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]
è¾“å‡ºï¼š49 
è§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º 49ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šheight = [1,1]
è¾“å‡ºï¼š1
```

**æç¤ºï¼š**

- `n == height.length`
- `2 <= n <= 105`
- `0 <= height[i] <= 104`

#### é¢˜è§£

> å…¶å®æœ‰ä¸€äº›è´ªå¿ƒçš„æ€æƒ³åœ¨ï¼Œresultä¸ºå½“å‰çŠ¶æ€å’Œä¸‹ä¸€ä¸ªçŠ¶æ€çš„æœ€å¤§å€¼ï¼Œç„¶åæ¯ä¸€æ¬¡çš„â€œå†…ç¼©â€ä¹Ÿæ˜¯å¾—åˆ°å½“å‰çŠ¶æ€å’Œä¸‹ä¸€ä¸ªçŠ¶æ€çš„æœ€å¤§å€¼ï¼Œå› æ­¤æœ€ç»ˆçš„resultå°±æ˜¯å…¨å±€çš„æœ€å¤§å€¼ã€‚

è®¾ä¸¤æŒ‡é’ˆ i , j ï¼ŒæŒ‡å‘çš„æ°´æ§½æ¿é«˜åº¦åˆ†åˆ«ä¸º h[i] , h[j] ï¼Œæ­¤çŠ¶æ€ä¸‹æ°´æ§½é¢ç§¯ä¸º S(i,j) ã€‚ç”±äºå¯å®¹çº³æ°´çš„é«˜åº¦ç”±ä¸¤æ¿ä¸­çš„ çŸ­æ¿ å†³å®šï¼Œå› æ­¤å¯å¾—å¦‚ä¸‹ é¢ç§¯å…¬å¼ ï¼š

$$
S(i,j)=min(h[i],h[j])Ã—(jâˆ’i)
$$
<img src="./assets/1628780627-VtSmcP-Picture0.png" alt="Picture0.png" style="zoom:22%;" />

åœ¨æ¯ä¸ªçŠ¶æ€ä¸‹ï¼Œæ— è®ºé•¿æ¿æˆ–çŸ­æ¿å‘ä¸­é—´æ”¶çª„ä¸€æ ¼ï¼Œéƒ½ä¼šå¯¼è‡´æ°´æ§½ åº•è¾¹å®½åº¦ âˆ’1 å˜çŸ­ï¼š

> è¯¥é¢˜è¦æ³¨æ„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼Œå°±æ˜¯**æ°´çš„é«˜åº¦ç”±çŸ­æ¿ç¡®å®š**ï¼Œå› æ­¤æ‰æœ‰äº†ä¸‹é¢çš„è®¨è®ºã€‚

è‹¥å‘å†… ç§»åŠ¨çŸ­æ¿ ï¼Œæ°´æ§½çš„çŸ­æ¿ $min(h[i],h[j])$ å¯èƒ½å˜å¤§ï¼Œå› æ­¤ä¸‹ä¸ªæ°´æ§½çš„é¢ç§¯ å¯èƒ½å¢å¤§ ã€‚
è‹¥å‘å†… ç§»åŠ¨é•¿æ¿ ï¼Œæ°´æ§½çš„çŸ­æ¿ $min(h[i],h[j])$ ä¸å˜æˆ–å˜å°ï¼Œå› æ­¤ä¸‹ä¸ªæ°´æ§½çš„é¢ç§¯ ä¸€å®šå˜å° ã€‚

å› æ­¤ï¼Œåˆå§‹åŒ–åŒæŒ‡é’ˆåˆ†åˆ—æ°´æ§½å·¦å³ä¸¤ç«¯ï¼Œå¾ªç¯æ¯è½®å°†çŸ­æ¿å‘å†…ç§»åŠ¨ä¸€æ ¼ï¼Œå¹¶æ›´æ–°é¢ç§¯æœ€å¤§å€¼ï¼Œç›´åˆ°ä¸¤æŒ‡é’ˆç›¸é‡æ—¶è·³å‡ºï¼›å³å¯è·å¾—æœ€å¤§é¢ç§¯ã€‚

```c++
class Solution {
public:
    int maxArea(vector<int>& height) {
        int i = 0, j = height.size() - 1, res = 0;
        while(i < j) {
            res = height[i] < height[j] ? 
                max(res, (j - i) * height[i++]): 
                max(res, (j - i) * height[j--]); 
        }
        return res;
    }
};
```



### [15. ä¸‰æ•°ä¹‹å’Œ](https://leetcode.cn/problems/3sum/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ `[nums[i], nums[j], nums[k]]` æ»¡è¶³ `i != j`ã€`i != k` ä¸” `j != k` ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ `nums[i] + nums[j] + nums[k] == 0` ã€‚è¯·ä½ è¿”å›æ‰€æœ‰å’Œä¸º `0` ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚

**æ³¨æ„ï¼š**ç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚ 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]
è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]
è§£é‡Šï¼š
nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚
nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚
nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚
ä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚
æ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0,1,1]
è¾“å‡ºï¼š[]
è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [0,0,0]
è¾“å‡ºï¼š[[0,0,0]]
è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸º 0 ã€‚ 
```

**æç¤ºï¼š**

- `3 <= nums.length <= 3000`
- `-105 <= nums[i] <= 105`

#### é¢˜è§£

ä½¿ç”¨åŒæŒ‡é’ˆï¼Œå…ˆå¯¹æ•°ç»„æ’åºï¼Œiéå†æ•°ç»„ï¼Œleft=i+1ï¼Œright=nums.size()-1ï¼Œå¦‚æœå½“å‰æ•°ç›¸åŠ >0åˆ™right--ï¼Œå¦‚æœ<0åˆ™left++ã€‚æ³¨æ„ï¼š
1. ç”±äºä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ï¼Œå› æ­¤è¦å¯¹iã€leftã€rightå»é‡ï¼ˆå¦‚æœå½“å‰æ•°==ä¹‹å‰çš„æ•°å°±ç›´æ¥è·³è¿‡ï¼‰

2. åœ¨ç­‰äº0æ—¶ï¼Œéšæƒ³å½•çš„ä»£ç é€»è¾‘å¥½åƒæœ‰é—®é¢˜ï¼Ÿåº”è¯¥å°†right--left++æ”¾åœ¨whileå»é‡å‰é¢ï¼Ÿï¼ˆç­”ï¼šéƒ½ä¸€æ ·ï¼Œæ”¾whileå‰é¢è¡¨ç¤ºâ€œåªä½¿ç”¨é‡å¤åºåˆ—çš„ç¬¬ä¸€ä¸ªâ€ï¼Œæ”¾whileåé¢è¡¨ç¤ºâ€œåªä½¿ç”¨é‡å¤åºåˆ—çš„æœ€åä¸€ä¸ªâ€ï¼Œéƒ½å¯ä»¥è¾¾åˆ°å»é‡çš„æ•ˆæœï¼‰

3. ğŸŒŸåœ¨å¯¹açš„å»é‡ä¸­ï¼Œè¦æ³¨æ„å»é‡çš„æ–¹å¼ï¼š

   ```c++
   // é”™è¯¯å»é‡aæ–¹æ³•ï¼Œå°†ä¼šè®¤ä¸ºè¿™æ ·ä¹Ÿè¯¥è·³è¿‡ï¼š[-1,-1,2]ï¼Œä½†å…¶å®è¿™æ˜¯ä¸€ä¸ªæœ‰æ•ˆans
   /*
   if (nums[i] == nums[i + 1]) {
       continue;
   }
   */
   // æ­£ç¡®å»é‡aæ–¹æ³•
   if (i > 0 && nums[i] == nums[i - 1]) {
       continue;
   }
   ```

å®Œæ•´ä»£ç ï¼š

```c++
class Solution {
public:
    vector<vector<int>> threeSum(vector<int>& nums) {
        vector<vector<int>> result;
        sort(nums.begin(), nums.end());
        // æ‰¾å‡ºa + b + c = 0
        // a = nums[i], b = nums[left], c = nums[right]
        for (int i = 0; i < nums.size(); i++) {
            // æ’åºä¹‹åå¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ å·²ç»å¤§äºé›¶ï¼Œé‚£ä¹ˆæ— è®ºå¦‚ä½•ç»„åˆéƒ½ä¸å¯èƒ½å‡‘æˆä¸‰å…ƒç»„ï¼Œç›´æ¥è¿”å›ç»“æœå°±å¯ä»¥äº†
            if (nums[i] > 0) {
                return result;
            }
            // é”™è¯¯å»é‡aæ–¹æ³•ï¼Œå°†ä¼šæ¼æ‰-1,-1,2 è¿™ç§æƒ…å†µ
            /*
            if (nums[i] == nums[i + 1]) {
                continue;
            }
            */
            // æ­£ç¡®å»é‡aæ–¹æ³•
            if (i > 0 && nums[i] == nums[i - 1]) {
                continue;
            }
            int left = i + 1;
            int right = nums.size() - 1;
            while (right > left) {
                // å»é‡å¤é€»è¾‘å¦‚æœæ”¾åœ¨è¿™é‡Œï¼Œ0ï¼Œ0ï¼Œ0 çš„æƒ…å†µï¼Œå¯èƒ½ç›´æ¥å¯¼è‡´ right<=left äº†ï¼Œä»è€Œæ¼æ‰äº† 0,0,0 è¿™ç§ä¸‰å…ƒç»„
                /*
                while (right > left && nums[right] == nums[right - 1]) right--;
                while (right > left && nums[left] == nums[left + 1]) left++;
                */
                if (nums[i] + nums[left] + nums[right] > 0) right--;
                else if (nums[i] + nums[left] + nums[right] < 0) left++;
                else {
                    result.push_back(vector<int>{nums[i], nums[left], nums[right]});
                    // å»é‡é€»è¾‘åº”è¯¥æ”¾åœ¨æ‰¾åˆ°ä¸€ä¸ªä¸‰å…ƒç»„ä¹‹åï¼Œå¯¹b å’Œ cå»é‡
                    while (right > left && nums[right] == nums[right - 1]) right--;
                    while (right > left && nums[left] == nums[left + 1]) left++;

                    // æ‰¾åˆ°ç­”æ¡ˆæ—¶ï¼ŒåŒæŒ‡é’ˆåŒæ—¶æ”¶ç¼©
                    right--;
                    left++;
                }
            }

        }
        return result;
    }
};
```

> éœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼šï¼ˆä¸»è¦åœ¨äºå‡ ç§å»é‡çš„åˆ¤æ–­æ¡ä»¶ï¼‰
>
> 1. aå»é‡ä¸­çš„ `i > 0`
>    if (i > 0 && nums[i] == nums[i - 1]) 
>
> 2. bcå»é‡ä¸­çš„ `right > left`
>    while (right > left && nums[right] == nums[right - 1]) 

### [42. æ¥é›¨æ°´](https://leetcode.cn/problems/trapping-rain-water/)

#### é¢˜ç›®æè¿°

ç»™å®š `n` ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º `1` çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚ 

**ç¤ºä¾‹ 1ï¼š**

![img](./assets/rainwatertrap.png)

```
è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]
è¾“å‡ºï¼š6
è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚ 
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šheight = [4,2,0,3,2,5]
è¾“å‡ºï¼š9
```

**æç¤ºï¼š**

- `n == height.length`
- `1 <= n <= 2 * 104`
- `0 <= height[i] <= 105`

#### é¢˜è§£ï¼ˆåŒæŒ‡é’ˆï¼‰

> åŒæŒ‡é’ˆæ¯”å•è°ƒæ ˆæ€è·¯æ›´æ¸…æ™°ï¼Œé€Ÿåº¦ä¹Ÿå¿«ã€‚

åœ¨æš´åŠ›è§£æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åªè¦è®°å½•å·¦è¾¹æŸ±å­çš„æœ€é«˜é«˜åº¦ å’Œ å³è¾¹æŸ±å­çš„æœ€é«˜é«˜åº¦ï¼Œå°±å¯ä»¥è®¡ç®—å½“å‰ä½ç½®çš„é›¨æ°´é¢ç§¯ï¼Œè¿™å°±æ˜¯é€šè¿‡åˆ—æ¥è®¡ç®—ã€‚

å½“å‰åˆ—é›¨æ°´é¢ç§¯ï¼šmin(å·¦è¾¹æŸ±å­çš„æœ€é«˜é«˜åº¦ï¼Œè®°å½•å³è¾¹æŸ±å­çš„æœ€é«˜é«˜åº¦) - å½“å‰æŸ±å­é«˜åº¦ã€‚

ä¸ºäº†å¾—åˆ°ä¸¤è¾¹çš„æœ€é«˜é«˜åº¦ï¼Œä½¿ç”¨äº†åŒæŒ‡é’ˆæ¥éå†ï¼Œæ¯åˆ°ä¸€ä¸ªæŸ±å­éƒ½å‘ä¸¤è¾¹éå†ä¸€éï¼Œè¿™å…¶å®æ˜¯æœ‰é‡å¤è®¡ç®—çš„ã€‚æˆ‘ä»¬æŠŠæ¯ä¸€ä¸ªä½ç½®çš„å·¦è¾¹æœ€é«˜é«˜åº¦è®°å½•åœ¨ä¸€ä¸ªæ•°ç»„ä¸Šï¼ˆmaxLeftï¼‰ï¼Œå³è¾¹æœ€é«˜é«˜åº¦è®°å½•åœ¨ä¸€ä¸ªæ•°ç»„ä¸Šï¼ˆmaxRightï¼‰ï¼Œè¿™æ ·å°±é¿å…äº†é‡å¤è®¡ç®—ã€‚

å½“å‰ä½ç½®ï¼Œå·¦è¾¹çš„æœ€é«˜é«˜åº¦æ˜¯å‰ä¸€ä¸ªä½ç½®çš„å·¦è¾¹æœ€é«˜é«˜åº¦å’Œæœ¬é«˜åº¦çš„æœ€å¤§å€¼ã€‚

å³ä»å·¦å‘å³éå†ï¼šmaxLeft[i] = max(height[i], maxLeft[i - 1]);

ä»å³å‘å·¦éå†ï¼šmaxRight[i] = max(height[i], maxRight[i + 1]);

ä»£ç å¦‚ä¸‹ï¼š

```c++
class Solution {
public:
    int trap(vector<int>& height) {
        if (height.size() <= 2) return 0;
        vector<int> maxLeft(height.size(), 0);
        vector<int> maxRight(height.size(), 0);
        int size = maxRight.size();

        // è®°å½•æ¯ä¸ªæŸ±å­å·¦è¾¹æŸ±å­æœ€å¤§é«˜åº¦
        maxLeft[0] = height[0];
        for (int i = 1; i < size; i++) {
            maxLeft[i] = max(height[i], maxLeft[i - 1]);
        }
        // è®°å½•æ¯ä¸ªæŸ±å­å³è¾¹æŸ±å­æœ€å¤§é«˜åº¦
        maxRight[size - 1] = height[size - 1];
        for (int i = size - 2; i >= 0; i--) {
            maxRight[i] = max(height[i], maxRight[i + 1]);
        }
        // æ±‚å’Œ
        int sum = 0;
        for (int i = 0; i < size; i++) {
            int count = min(maxLeft[i], maxRight[i]) - height[i];
            if (count > 0) sum += count;
        }
        return sum;
    }
};
```



## æ»‘åŠ¨çª—å£

### [3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²](https://leetcode.cn/problems/longest-substring-without-repeating-characters/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ **æœ€é•¿ å­ä¸²** çš„é•¿åº¦ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: s = "abcabcbb"
è¾“å‡º: 3 
è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "abc"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: s = "bbbbb"
è¾“å‡º: 1
è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "b"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: s = "pwwkew"
è¾“å‡º: 3
è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "wke"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚
     è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ"pwke" æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚
```

**æç¤ºï¼š**

- `0 <= s.length <= 5 * 104`
- `s` ç”±è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ç¬¦å·å’Œç©ºæ ¼ç»„æˆ

#### é¢˜è§£

**å†™æ³•ä¸€ï¼šå“ˆå¸Œè¡¨ï¼ˆunordered_mapï¼‰**

æ ¸å¿ƒæ€æƒ³ï¼šæ»‘åŠ¨çª—å£ï¼Œç”¨å“ˆå¸Œè¡¨æ¥æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤å­—æ¯ï¼›

1. å³æŒ‡é’ˆä»index0~len - 1éå†ï¼Œç„¶åå°†éå†åˆ°çš„charæ”¾å…¥å“ˆå¸Œè¡¨ï¼›
2. å¦‚æœå“ˆå¸Œè¡¨çš„å­—ç¬¦ï¼ˆå‡è®¾aï¼‰æ•°é‡å¤§äº1ï¼Œåœæ­¢éå†ï¼Œç„¶åleft++ç›´è‡³è¿™ä¸ªå­—ç¬¦açš„æ•°é‡å‡ä¸º1ï¼ˆç›´åˆ°å­ä¸²åˆæ³•ï¼‰ï¼Œå†ç»§ç»­éå†rightï¼›
3. è¿‡ç¨‹ä¸­resultå–max(ans, right - left + 1)ï¼›

```c++
class Solution {
public:
    int lengthOfLongestSubstring(string s) {
        int n = s.length(), ans = 0, left = 0;
        unordered_map<char, int> cnt; // ç»´æŠ¤ä»ä¸‹æ ‡ left åˆ°ä¸‹æ ‡ right çš„å­—ç¬¦
        for (int right = 0; right < n; right++) {
            char c = s[right];
            cnt[c]++;
            while (cnt[c] > 1) { // çª—å£å†…æœ‰é‡å¤å­—æ¯
                cnt[s[left]]--; // ç§»é™¤çª—å£å·¦ç«¯ç‚¹å­—æ¯
                left++; // ç¼©å°çª—å£
            }
            ans = max(ans, right - left + 1); // æ›´æ–°çª—å£é•¿åº¦æœ€å¤§å€¼
        }
        return ans;
    }
};
```

### [438. æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯](https://leetcode.cn/problems/find-all-anagrams-in-a-string/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² `s` å’Œ `p`ï¼Œæ‰¾åˆ° `s` ä¸­æ‰€æœ‰ `p` çš„ **å¼‚ä½è¯** çš„å­ä¸²ï¼Œè¿”å›è¿™äº›å­ä¸²çš„èµ·å§‹ç´¢å¼•ã€‚ä¸è€ƒè™‘ç­”æ¡ˆè¾“å‡ºçš„é¡ºåºã€‚ 

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: s = "cbaebabacd", p = "abc"
è¾“å‡º: [0,6]
è§£é‡Š:
èµ·å§‹ç´¢å¼•ç­‰äº 0 çš„å­ä¸²æ˜¯ "cba", å®ƒæ˜¯ "abc" çš„å¼‚ä½è¯ã€‚
èµ·å§‹ç´¢å¼•ç­‰äº 6 çš„å­ä¸²æ˜¯ "bac", å®ƒæ˜¯ "abc" çš„å¼‚ä½è¯ã€‚
```

 **ç¤ºä¾‹ 2:**

```
è¾“å…¥: s = "abab", p = "ab"
è¾“å‡º: [0,1,2]
è§£é‡Š:
èµ·å§‹ç´¢å¼•ç­‰äº 0 çš„å­ä¸²æ˜¯ "ab", å®ƒæ˜¯ "ab" çš„å¼‚ä½è¯ã€‚
èµ·å§‹ç´¢å¼•ç­‰äº 1 çš„å­ä¸²æ˜¯ "ba", å®ƒæ˜¯ "ab" çš„å¼‚ä½è¯ã€‚
èµ·å§‹ç´¢å¼•ç­‰äº 2 çš„å­ä¸²æ˜¯ "ab", å®ƒæ˜¯ "ab" çš„å¼‚ä½è¯ã€‚
```

**æç¤º:**

- `1 <= s.length, p.length <= 3 * 104`
- `s` å’Œ `p` ä»…åŒ…å«å°å†™å­—æ¯

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šå®šé•¿æ»‘çª—ï¼ˆéæœ€ä½³ï¼Œä½†å®¹æ˜“ç†è§£ï¼‰**

æœ¬é¢˜ç»´æŠ¤é•¿ä¸º n çš„å­ä¸² sâ€²  çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°ã€‚å¦‚æœ sâ€²  çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°ï¼Œå’Œ p çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°éƒ½ç›¸åŒï¼Œé‚£ä¹ˆ sâ€²  æ˜¯ p çš„å¼‚ä½è¯ï¼ŒæŠŠ sâ€²  å·¦ç«¯ç‚¹ä¸‹æ ‡åŠ å…¥ç­”æ¡ˆã€‚

```c++
class Solution {
public:
    vector<int> findAnagrams(string s, string p) {
        vector<int> ans;
        vector<int> cnt_p(26, 0); // ç»Ÿè®¡ p çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°
        vector<int> cnt_s(26, 0); // ç»Ÿè®¡ s çš„é•¿ä¸º p.length() çš„å­ä¸² s' çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°
        for (char c : p) {
            cnt_p[c - 'a']++;
        }
        for (int right = 0; right < s.length(); right++) {
            cnt_s[s[right] - 'a']++; // å³ç«¯ç‚¹å­—æ¯è¿›å…¥çª—å£
            int left = right - p.length() + 1;
            if (left < 0) { // çª—å£é•¿åº¦ä¸è¶³ p.length()
                continue;
            }
            if (cnt_s == cnt_p) { // s' å’Œ p çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°éƒ½ç›¸åŒ
                ans.push_back(left); // s' å·¦ç«¯ç‚¹ä¸‹æ ‡åŠ å…¥ç­”æ¡ˆ
            }
            cnt_s[s[left] - 'a']--; // å·¦ç«¯ç‚¹å­—æ¯ç¦»å¼€çª—å£
        }
        return ans;
    }
};
```

> - æ—¶é—´å¤æ‚åº¦ï¼šO(âˆ£Î£âˆ£*m*+*n*)ï¼Œå…¶ä¸­ *m* æ˜¯ *s* çš„é•¿åº¦ï¼Œ*n* æ˜¯ *p* çš„é•¿åº¦ï¼Œâˆ£Î£âˆ£=26 æ˜¯å­—ç¬¦é›†åˆçš„å¤§å°ã€‚
> - ç©ºé—´å¤æ‚åº¦ï¼šO(âˆ£Î£âˆ£)ã€‚è¿”å›å€¼ä¸è®¡å…¥ã€‚

**æ–¹æ³•äºŒï¼šä¸å®šé•¿æ»‘çª—**

æšä¸¾å­ä¸² s â€² çš„å³ç«¯ç‚¹ï¼Œå¦‚æœå‘ç° s â€² å…¶ä¸­ä¸€ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°å¤§äº p çš„è¿™ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°ï¼Œåˆ™å³ç§» s â€² çš„å·¦ç«¯ç‚¹ã€‚å¦‚æœå‘ç° s â€² çš„é•¿åº¦ç­‰äº p çš„é•¿åº¦ï¼Œåˆ™è¯´æ˜ s â€² çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°ï¼Œå’Œ p çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°éƒ½ç›¸åŒï¼Œé‚£ä¹ˆ s â€² æ˜¯ p çš„å¼‚ä½è¯ã€‚

> ä¸ªäººç†è§£ï¼šç”±äºåœ¨åˆå§‹åŒ–æ—¶å°±è®²pä¸­çš„å•è¯è®°å…¥cntï¼Œå› æ­¤åœ¨éå†å³æŒ‡é’ˆæ—¶ï¼Œä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š
>
> 1. å¦‚æœå³æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦cåœ¨pä¸­ï¼Œä¸”cnt[c]>0ï¼Œåˆ™å±äºæ­£å¸¸æƒ…å†µï¼Œç»§ç»­ï¼›
> 2. å¦‚æœå³æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦cåœ¨pä¸­ï¼Œä½†cnt[c]<0ï¼Œåˆ™ç§»åŠ¨leftæ¥è¡¥å…¨péœ€è¦çš„å­—ç¬¦ï¼›
> 3. å¦‚æœå³æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦ä¸åœ¨pä¸­ï¼Œåˆ™cnt[c] = -1ï¼ŒleftæŒ‡é’ˆä¼šç§»åŠ¨åˆ°ä¸righté‡åˆï¼›
>
> å¯ä»¥å‘ç°ï¼Œæ— è®ºå“ªç§æƒ…å†µï¼Œcntå§‹ç»ˆä¼šç»´æŒåœ¨ ä½¿pä¸­å‡ºç°çš„å­—ç¬¦çš„cntæ•°é‡>=0ï¼Œä¸”ä¸è¶…è¿‡pä¸­å­—ç¬¦æ•°é‡ çš„çŠ¶æ€ï¼›ä¹Ÿå°±æ˜¯è¯´å½“pä¸­å‡ºç°çš„å­—ç¬¦çš„cntæ•°é‡å…¨éƒ¨=0æ—¶ï¼Œå…¶å®å°±æ˜¯å­—æ¯å¼‚ä½è¯ï¼Œåªä¸è¿‡é¢˜è§£ä¸­æ˜¯æ¯ä¸ªå¾ªç¯éƒ½è¦åˆ¤æ–­ä¸€æ¬¡ã€‚

```c++
class Solution {
public:
    vector<int> findAnagrams(string s, string p) {
        vector<int> ans;
        int cnt[26]{}; // ç»Ÿè®¡ p çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°
        for (char c : p) {
            cnt[c - 'a']++;
        }
        int left = 0;
        for (int right = 0; right < s.size(); right++) {
            int c = s[right] - 'a';
            cnt[c]--; // å³ç«¯ç‚¹å­—æ¯è¿›å…¥çª—å£
            while (cnt[c] < 0) { // å­—æ¯ c å¤ªå¤šäº†
                cnt[s[left] - 'a']++; // å·¦ç«¯ç‚¹å­—æ¯ç¦»å¼€çª—å£
                left++; 
            }
            if (right - left + 1 == p.length()) { // s' å’Œ p çš„æ¯ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°éƒ½ç›¸åŒ
                ans.push_back(left); // s' å·¦ç«¯ç‚¹ä¸‹æ ‡åŠ å…¥ç­”æ¡ˆ
            }
        }
        return ans;
    }
};
```



## å­ä¸²

### [560. å’Œä¸º K çš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-sum-equals-k/)ğŸŒŸğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å› *è¯¥æ•°ç»„ä¸­å’Œä¸º `k` çš„å­æ•°ç»„çš„ä¸ªæ•°* ã€‚

å­æ•°ç»„æ˜¯æ•°ç»„ä¸­å…ƒç´ çš„è¿ç»­éç©ºåºåˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,1,1], k = 2
è¾“å‡ºï¼š2
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3], k = 3
è¾“å‡ºï¼š2
```

**æç¤ºï¼š**

- `1 <= nums.length <= 2 * 104`
- `-1000 <= nums[i] <= 1000`
- `-107 <= k <= 107`

#### é¢˜è§£

**å‰ç¼€å’Œ+å“ˆå¸Œè¡¨ï¼ˆä¸¤æ¬¡éå†ï¼‰**

> è¿˜å¯ä»¥æŠŠå‰ç¼€å’Œåœ¨ç¬¬äºŒæ¬¡éå†çš„ä¸€å¼€å§‹å°±è®¡ç®—ï¼ˆåªä¸è¿‡è¦åœ¨cntä¸­é¢å¤–æ·»åŠ å‰ç¼€å’Œä¸º0æ—¶è®¡æ•°ä¸º1ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ä¸ºä¸€æ¬¡éå†ã€‚

æ ¸å¿ƒæ€æƒ³ä¸ºï¼šåŸæœ¬æ˜¯æ‰¾s[j] - s[i] == kå¯èƒ½çš„içš„æ•°é‡ï¼Œè¿™é‡Œå˜ä¸ºå¯»æ‰¾s[j] - k == s[i]æˆç«‹çš„içš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¦ç”¨ans += cnt[sj - k] è€Œé ans++ï¼›

> ä»¥nums=[1, -1, 0]ï¼Œk=0ä¸ºä¾‹ï¼Œå‰ç¼€å’Œä¸º[0, 1, 0, 0]ï¼Œåˆ™s[2] - k = s[i] = 0æˆç«‹çš„iæœ‰1ä¸ªï¼Œè€Œs[3] - k = s[i] = 0æˆç«‹çš„iä¸€å…±æœ‰2ä¸ªï¼Œæ€»å’Œä¸º3ï¼›

```c++
class Solution {
public:
    int subarraySum(vector<int>& nums, int k) {
        int len = nums.size();
        // æ±‚å‰ç¼€å’Œ
        vector<int> s(len + 1, 0);
        for (int i = 0; i < nums.size(); i ++ ) {
            s[i + 1] = s[i] + nums[i];
        }

        // 
        int ans = 0;
        unordered_map<int, int> cnt;  // è®°å½•æ¯ä¸ªå‰ç¼€å’Œå‡ºç°çš„æ•°é‡
        for (int sj : s) {
            // åŸæœ¬æ˜¯æ‰¾s[j] - s[i - 1] == kå¯èƒ½çš„içš„æ•°é‡ï¼Œ
            // è¿™é‡Œå˜ä¸ºå¯»æ‰¾s[j] - k == s[i - 1]æˆç«‹çš„içš„æ•°é‡ï¼Œ
            // ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¦ç”¨ans += cnt[sj - k] è€Œé ans++ï¼Œ
            // ä»¥nums=[1, -1, 0]ï¼Œk=0ä¸ºä¾‹ï¼Œå‰ç¼€å’Œä¸º[0, 1, 0, 0]ï¼Œåˆ™s[2] - k = s[i - 1]æˆç«‹çš„iæœ‰1ä¸ªï¼Œ
            // è€Œs[3] - k = s[i - 1]æˆç«‹çš„iä¸€å…±æœ‰2ä¸ªï¼Œæ€»å’Œä¸º3ï¼›
            if (cnt.find(sj - k) != cnt.end()) {
                printf("sj:%d, cnt[sj - k]:%d\n", sj, cnt[sj - k]);
                ans += cnt[sj - k];
            }
            cnt[sj]++;  // æ¯æ¬¡è®°å½•å‰ç¼€å’Œçš„æ•°é‡
        }
        return ans;
    }
};
```

### [239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼](https://leetcode.cn/problems/sliding-window-maximum/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸º `k` çš„æ»‘åŠ¨çª—å£ä»æ•°ç»„çš„æœ€å·¦ä¾§ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€å³ä¾§ã€‚ä½ åªå¯ä»¥çœ‹åˆ°åœ¨æ»‘åŠ¨çª—å£å†…çš„ `k` ä¸ªæ•°å­—ã€‚æ»‘åŠ¨çª—å£æ¯æ¬¡åªå‘å³ç§»åŠ¨ä¸€ä½ã€‚

è¿”å› *æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼* ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,3,-1,-3,5,3,6,7], k = 3
è¾“å‡ºï¼š[3,3,5,5,6,7]
è§£é‡Šï¼š
æ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼
---------------               -----
[1  3  -1] -3  5  3  6  7       3
 1 [3  -1  -3] 5  3  6  7       3
 1  3 [-1  -3  5] 3  6  7       5
 1  3  -1 [-3  5  3] 6  7       5
 1  3  -1  -3 [5  3  6] 7       6
 1  3  -1  -3  5 [3  6  7]      7
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1], k = 1
è¾“å‡ºï¼š[1]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `-104 <= nums[i] <= 104`
- `1 <= k <= nums.length`

#### é¢˜è§£

ä½¿ç”¨dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰å®ç°å•è°ƒé˜Ÿåˆ—ã€‚

**æ­¤é˜Ÿåˆ—æ²¡æœ‰å¿…è¦ç»´æŠ¤çª—å£é‡Œçš„æ‰€æœ‰å…ƒç´ ï¼Œåªéœ€è¦ç»´æŠ¤æœ‰å¯èƒ½æˆä¸ºçª—å£é‡Œæœ€å¤§å€¼çš„å…ƒç´ å°±å¯ä»¥äº†ï¼ŒåŒæ—¶ä¿è¯é˜Ÿåˆ—é‡Œçš„å…ƒç´ æ•°å€¼æ˜¯ç”±å¤§åˆ°å°çš„ã€‚**

è®¾è®¡å•è°ƒé˜Ÿåˆ—çš„æ—¶å€™ï¼Œpopï¼Œå’Œpushæ“ä½œè¦ä¿æŒå¦‚ä¸‹è§„åˆ™ï¼šğŸŒŸ

1. pop(value)ï¼šå¦‚æœçª—å£ç§»é™¤çš„å…ƒç´ valueç­‰äºå•è°ƒé˜Ÿåˆ—çš„å‡ºå£å…ƒç´ ï¼Œé‚£ä¹ˆé˜Ÿåˆ—å¼¹å‡ºå…ƒç´ ï¼Œå¦åˆ™ä¸ç”¨ä»»ä½•æ“ä½œ
2. push(value)ï¼šå¦‚æœpushçš„å…ƒç´ valueå¤§äºå…¥å£å…ƒç´ çš„æ•°å€¼ï¼Œé‚£ä¹ˆå°±å°†é˜Ÿåˆ—å…¥å£çš„å…ƒç´ å¼¹å‡ºï¼Œç›´åˆ°pushå…ƒç´ çš„æ•°å€¼å°äºç­‰äºé˜Ÿåˆ—å…¥å£å…ƒç´ çš„æ•°å€¼ä¸ºæ­¢

ä¿æŒå¦‚ä¸Šè§„åˆ™ï¼Œæ¯æ¬¡çª—å£ç§»åŠ¨çš„æ—¶å€™ï¼Œåªè¦é—®que.front()å°±å¯ä»¥è¿”å›å½“å‰çª—å£çš„æœ€å¤§å€¼ã€‚

ä¸ºäº†æ›´ç›´è§‚çš„æ„Ÿå—åˆ°å•è°ƒé˜Ÿåˆ—çš„å·¥ä½œè¿‡ç¨‹ï¼Œä»¥é¢˜ç›®ç¤ºä¾‹ä¸ºä¾‹ï¼Œè¾“å…¥: nums = [1,3,-1,-3,5,3,6,7], å’Œ k = 3ï¼ŒåŠ¨ç”»å¦‚ä¸‹ï¼š

 <img src="./assets/239.æ»‘åŠ¨çª—å£æœ€å¤§å€¼-2.gif" alt="239.æ»‘åŠ¨çª—å£æœ€å¤§å€¼-2" style="zoom: 67%;" />

```c++
class Solution {
private:
    class MyQueue { //å•è°ƒé˜Ÿåˆ—ï¼ˆä»å¤§åˆ°å°ï¼‰
    public:
        deque<int> que; // ä½¿ç”¨dequeæ¥å®ç°å•è°ƒé˜Ÿåˆ—
        // æ¯æ¬¡å¼¹å‡ºçš„æ—¶å€™ï¼Œæ¯”è¾ƒå½“å‰è¦å¼¹å‡ºçš„æ•°å€¼æ˜¯å¦ç­‰äºé˜Ÿåˆ—å‡ºå£å…ƒç´ çš„æ•°å€¼ï¼Œå¦‚æœç›¸ç­‰åˆ™å¼¹å‡ºã€‚
        // åŒæ—¶popä¹‹å‰åˆ¤æ–­é˜Ÿåˆ—å½“å‰æ˜¯å¦ä¸ºç©ºã€‚
        void pop(int value) {
            if (!que.empty() && value == que.front()) {
                que.pop_front();
            }
        }
        // å¦‚æœpushçš„æ•°å€¼å¤§äºå…¥å£å…ƒç´ çš„æ•°å€¼ï¼Œé‚£ä¹ˆå°±å°†é˜Ÿåˆ—åç«¯çš„æ•°å€¼å¼¹å‡ºï¼Œç›´åˆ°pushçš„æ•°å€¼å°äºç­‰äºé˜Ÿåˆ—å…¥å£å…ƒç´ çš„æ•°å€¼ä¸ºæ­¢ã€‚
        // è¿™æ ·å°±ä¿æŒäº†é˜Ÿåˆ—é‡Œçš„æ•°å€¼æ˜¯å•è°ƒä»å¤§åˆ°å°çš„äº†ã€‚
        void push(int value) {
            while (!que.empty() && value > que.back()) {
                que.pop_back();
            }
            que.push_back(value);

        }
        // æŸ¥è¯¢å½“å‰é˜Ÿåˆ—é‡Œçš„æœ€å¤§å€¼ ç›´æ¥è¿”å›é˜Ÿåˆ—å‰ç«¯ä¹Ÿå°±æ˜¯frontå°±å¯ä»¥äº†ã€‚
        int front() {
            return que.front();
        }
    };
public:
    vector<int> maxSlidingWindow(vector<int>& nums, int k) {
        MyQueue que;
        vector<int> result;
        for (int i = 0; i < k; i++) { // å…ˆå°†å‰kçš„å…ƒç´ æ”¾è¿›é˜Ÿåˆ—
            que.push(nums[i]);
        }
        result.push_back(que.front()); // result è®°å½•å‰kçš„å…ƒç´ çš„æœ€å¤§å€¼
        for (int i = k; i < nums.size(); i++) {
            que.pop(nums[i - k]); // æ»‘åŠ¨çª—å£ç§»é™¤æœ€å‰é¢å…ƒç´ 
            que.push(nums[i]); // æ»‘åŠ¨çª—å£å‰åŠ å…¥æœ€åé¢çš„å…ƒç´ 
            result.push_back(que.front()); // è®°å½•å¯¹åº”çš„æœ€å¤§å€¼
        }
        return result;
    }
};
```

### [76. æœ€å°è¦†ç›–å­ä¸²](https://leetcode.cn/problems/minimum-window-substring/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ã€ä¸€ä¸ªå­—ç¬¦ä¸² `t` ã€‚è¿”å› `s` ä¸­æ¶µç›– `t` æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ã€‚å¦‚æœ `s` ä¸­ä¸å­˜åœ¨æ¶µç›– `t` æ‰€æœ‰å­—ç¬¦çš„å­ä¸²ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² `""` ã€‚

**æ³¨æ„ï¼š**

- å¯¹äº `t` ä¸­é‡å¤å­—ç¬¦ï¼Œæˆ‘ä»¬å¯»æ‰¾çš„å­å­—ç¬¦ä¸²ä¸­è¯¥å­—ç¬¦æ•°é‡å¿…é¡»ä¸å°‘äº `t` ä¸­è¯¥å­—ç¬¦æ•°é‡ã€‚
- å¦‚æœ `s` ä¸­å­˜åœ¨è¿™æ ·çš„å­ä¸²ï¼Œæˆ‘ä»¬ä¿è¯å®ƒæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "ADOBECODEBANC", t = "ABC"
è¾“å‡ºï¼š"BANC"
è§£é‡Šï¼šæœ€å°è¦†ç›–å­ä¸² "BANC" åŒ…å«æ¥è‡ªå­—ç¬¦ä¸² t çš„ 'A'ã€'B' å’Œ 'C'ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "a", t = "a"
è¾“å‡ºï¼š"a"
è§£é‡Šï¼šæ•´ä¸ªå­—ç¬¦ä¸² s æ˜¯æœ€å°è¦†ç›–å­ä¸²ã€‚
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: s = "a", t = "aa"
è¾“å‡º: ""
è§£é‡Š: t ä¸­ä¸¤ä¸ªå­—ç¬¦ 'a' å‡åº”åŒ…å«åœ¨ s çš„å­ä¸²ä¸­ï¼Œ
å› æ­¤æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­å­—ç¬¦ä¸²ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚
```

**æç¤ºï¼š**

- `m == s.length`
- `n == t.length`
- `1 <= m, n <= 105`
- `s` å’Œ `t` ç”±è‹±æ–‡å­—æ¯ç»„æˆ

**è¿›é˜¶ï¼š**ä½ èƒ½è®¾è®¡ä¸€ä¸ªåœ¨ `o(m+n)` æ—¶é—´å†…è§£å†³æ­¤é—®é¢˜çš„ç®—æ³•å—ï¼Ÿ

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šæ»‘åŠ¨çª—å£**

æ ¸å¿ƒæ€æƒ³ï¼š**æˆ‘ä»¬åœ¨ s ä¸Šæ»‘åŠ¨çª—å£ï¼Œé€šè¿‡ç§»åŠ¨ r æŒ‡é’ˆä¸æ–­æ‰©å¼ çª—å£ã€‚å½“çª—å£åŒ…å« t å…¨éƒ¨æ‰€éœ€çš„å­—ç¬¦åï¼Œå¦‚æœèƒ½æ”¶ç¼©ï¼Œæˆ‘ä»¬å°±æ”¶ç¼©çª—å£ç›´åˆ°å¾—åˆ°æœ€å°çª—å£ã€‚**

<img src="./assets/76_fig1.gif" alt="fig1" style="zoom:50%;" />

```c++
class Solution {
private:
    bool is_covered(int cnt_s[], int cnt_t[]) {
        for (int i = 'A'; i <= 'Z'; i ++ ) {
            // cnt_s[i] < cnt_t[i]è¯´æ˜çª—å£å†…çš„å­—ç¬¦æ²¡æœ‰æ¶µç›–t
            if (cnt_s[i] < cnt_t[i]) return false;
        }
        for (int i = 'a'; i <= 'z'; i ++ ) {
            if (cnt_s[i] < cnt_t[i]) return false;
        }
        return true;
    }
public:
    string minWindow(string s, string t) {
        int len = s.size();
        int cnt_s[128]{};
        int cnt_t[128]{};
        for (char c : t) {
            cnt_t[c]++;  // ç”±äºå¤§å°å†™éƒ½æœ‰ï¼Œå› æ­¤è¿™é‡Œè¦ç›´æ¥å­˜å‚¨ascIIç ï¼Œè€Œä¸æ˜¯c - 'a'ã€‚
        }

        int left = 0;
        int ans_left = -1, ans_right = len;  // è¡¨ç¤ºç»“æœå­ä¸²æ‰€å¯¹åº”çš„å·¦å³ç«¯ç‚¹
        for (int right = 0; right < len; right++) {
            cnt_s[s[right]]++;
            // å¦‚æœçª—å£å³è¾¹å¢é•¿åˆ°ï¼šæ¶µç›–äº†æ‰€æœ‰å­—ç¬¦ï¼Œå°±ç¼©å‡å·¦è¾¹çª—å£ï¼Œç›´åˆ°ä¸å†æ¶µç›–ï¼›
            // æ­¤æ—¶å°±å†æ‰©å¼ å³è¾¹ï¼Œç›´åˆ°å³ç«¯ç‚¹åˆ°è¾¾sæœ«å°¾ã€‚
            while (is_covered(cnt_s, cnt_t)) {
                if (right - left < ans_right - ans_left) {
                    ans_left = left;
                    ans_right = right;
                }
                cnt_s[s[left]]--;
                left++;
            }
        }

        return ans_left < 0 ? "" : s.substr(ans_left, ans_right - ans_left + 1);
    }
};
```

> **å¤æ‚åº¦åˆ†æ**
>
> æ—¶é—´å¤æ‚åº¦ï¼šO(âˆ£Î£âˆ£m+n)ï¼Œå…¶ä¸­ m ä¸º s çš„é•¿åº¦ï¼Œn ä¸º t çš„é•¿åº¦ï¼Œâˆ£Î£âˆ£ ä¸ºå­—ç¬¦é›†åˆçš„å¤§å°ï¼Œæœ¬é¢˜å­—ç¬¦å‡ä¸ºè‹±æ–‡å­—æ¯ï¼Œæ‰€ä»¥ âˆ£Î£âˆ£=52ã€‚æ³¨æ„ left åªä¼šå¢åŠ ä¸ä¼šå‡å°‘ï¼Œleft æ¯å¢åŠ ä¸€æ¬¡ï¼Œæˆ‘ä»¬å°±èŠ±è´¹ O(âˆ£Î£âˆ£) çš„æ—¶é—´ã€‚å› ä¸º left è‡³å¤šå¢åŠ  m æ¬¡ï¼Œæ‰€ä»¥äºŒé‡å¾ªç¯çš„æ—¶é—´å¤æ‚åº¦ä¸º O(âˆ£Î£âˆ£m)ï¼Œå†ç®—ä¸Šç»Ÿè®¡ t å­—æ¯å‡ºç°æ¬¡æ•°çš„æ—¶é—´ O(n)ï¼Œæ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º O(âˆ£Î£âˆ£m+n)ã€‚
> ç©ºé—´å¤æ‚åº¦ï¼šO(âˆ£Î£âˆ£)ã€‚å¦‚æœåˆ›å»ºäº†å¤§å°ä¸º 128 çš„æ•°ç»„ï¼Œåˆ™ âˆ£Î£âˆ£=128ã€‚

**æ–¹æ³•äºŒï¼šä¼˜åŒ–**

ä¸Šé¢çš„ä»£ç æ¯æ¬¡éƒ½è¦èŠ±è´¹ O(âˆ£Î£âˆ£) çš„æ—¶é—´å»åˆ¤æ–­æ˜¯å¦æ¶µç›–ï¼Œèƒ½ä¸èƒ½ä¼˜åŒ–åˆ° O(1) å‘¢ï¼Ÿ

å¯ä»¥ã€‚

ç”¨ä¸€ä¸ªtype_charç»Ÿè®¡tä¸­ä¸€å…±æœ‰å‡ ç§å­—ç¬¦ï¼Œå¦‚æœtype_charã€‚

```c++
class Solution {
public:
    string minWindow(string s, string t) {
        int cnt[128]{};  // ascIIç å¤§å°
        int type_char = 0;  // è®°å½•tä¸­ä¸€å…±æœ‰å‡ ç§å­—ç¬¦
        for (char c : t) {
            if (cnt[c] == 0) {
                type_char++;
            }
            cnt[c]++;
        }

        int left = 0;
        int ans_left = -1, ans_right = s.size();
        for (int right = 0; right < s.size(); right++) {
            char c = s[right];  // è®°å½•å³ç«¯å­—ç¬¦
            cnt[c]--;  // å³ç«¯ç‚¹å­—æ¯ç§»å…¥å­ä¸²
            // cnt[c] == 0è¡¨ç¤ºå­ä¸²å’Œtçš„cå­—ç¬¦å·²ç»ç›¸åŒï¼Œæ­¤æ—¶type_charå‡å»ä¸€ç§å­—ç¬¦
            if (cnt[c] == 0) type_char--;
            while (type_char == 0) {  // type_char == 0è¡¨ç¤ºå­ä¸²å·²ç»æ¶µç›–tæ‰€æœ‰å­—ç¬¦ï¼Œæ­¤æ—¶è®°å½•å¹¶ç§»åŠ¨left
                if (right - left < ans_right - ans_left) {
                    ans_left = left;
                    ans_right = right;
                }
                char l = s[left];
                // åœ¨leftè¿˜æœªç§»åŠ¨æ—¶ï¼Œåªæœ‰tä¸­ç»Ÿè®¡è¿‡çš„cntä½ç½®ä¸º0ï¼Œå…¶ä»–åº”è¯¥éƒ½æ˜¯è´Ÿæ•°ï¼Œ
                // è¿™é‡Œçš„æ„æ€å°±æ˜¯å°†leftç§»åŠ¨ï¼Œåªè¦å­ä¸²ä¸å†æ¶µç›–tï¼Œå°±å†æ¬¡ç§»åŠ¨rightæ‰©å¤§å­ä¸²
                if (cnt[l] == 0) {
                    type_char++;
                }
                cnt[l]++;
                left++;
            }
        }

        return ans_left == -1 ? "" : s.substr(ans_left, ans_right - ans_left + 1);
    }
};
```

## æ™®é€šæ•°ç»„

### [53. æœ€å¤§å­æ•°ç»„å’Œ](https://leetcode.cn/problems/maximum-subarray/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œè¯·ä½ æ‰¾å‡ºä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚

**å­æ•°ç»„**æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ªè¿ç»­éƒ¨åˆ†ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [-2,1,-3,4,-1,2,1,-5,4]
è¾“å‡ºï¼š6
è§£é‡Šï¼šè¿ç»­å­æ•°ç»„ [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1]
è¾“å‡ºï¼š1
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [5,4,-1,7,8]
è¾“å‡ºï¼š23
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `-104 <= nums[i] <= 104`

**è¿›é˜¶ï¼š**å¦‚æœä½ å·²ç»å®ç°å¤æ‚åº¦ä¸º `O(n)` çš„è§£æ³•ï¼Œå°è¯•ä½¿ç”¨æ›´ä¸ºç²¾å¦™çš„ **åˆ†æ²»æ³•** æ±‚è§£ã€‚

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’**

æ ¸å¿ƒæ€æƒ³ï¼šnum[i]åŠ ä¸Šä¸€ä¸ªå°äº0çš„æ•°ï¼Œå…¶ç»“æœä¸€å®šæ˜¯å°äºnum[i]çš„ï¼Œå› æ­¤å°±ä¸èƒ½ç»„æˆä¸€ä¸ªè¿ç»­å­æ•°ç»„ï¼›è€Œæ˜¯dp[i] = num[i]è¡¨ç¤ºä»å¤´å¼€å§‹ç»Ÿè®¡è¿ç»­å­æ•°ç»„ï¼›

```c++
class Solution {
public:
    int maxSubArray(vector<int>& nums) {
        // å®šä¹‰dpæ•°ç»„
        vector<int> dp(nums.size(), 0);

        // åˆå§‹åŒ–
        dp[0] = nums[0];

        int ans = nums[0];
        for (int i = 1; i < nums.size(); i ++ ) {
            dp[i] = max(dp[i - 1] + nums[i], nums[i]);
            if (ans < dp[i]) ans = dp[i];
        }

        return ans;
    }
};
```

> æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œåªéœ€è¦éå†ä¸€éæ•°ç»„ï¼›
>
> ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼Œéœ€è¦å®šä¹‰dpæ•°ç»„ï¼›

**æ–¹æ³•äºŒï¼šè´ªå¿ƒï¼ˆæ ¸å¿ƒæ€æƒ³ä¸ä¸Šé¢ç±»ä¼¼ï¼‰**

```c++
class Solution {
public:
    int maxSubArray(vector<int>& nums) {
        int result = INT_MIN;
        int cur = 0;
        for (int i = 0; i < nums.size(); i ++ ) {
            cur += nums[i];
            // å–åŒºé—´ç´¯è®¡çš„æœ€å¤§å€¼ï¼ˆç›¸å½“äºä¸æ–­ç¡®å®šæœ€å¤§å­åºç»ˆæ­¢ä½ç½®ï¼‰
            if (cur > result) result = cur;
            // ç›¸å½“äºé‡ç½®æœ€å¤§å­åºèµ·å§‹ä½ç½®ï¼Œå› ä¸ºé‡åˆ°è´Ÿæ•°ä¸€å®šæ˜¯æ‹‰ä½æ€»å’Œ
            if (cur <= 0) cur = 0;
        }
        return result;
    }
};
```

> æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œåªéœ€è¦éå†ä¸€éæ•°ç»„ï¼›
>
> ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œåªéœ€è¦å¸¸æ•°ä¸ª

### [56. åˆå¹¶åŒºé—´](https://leetcode.cn/problems/merge-intervals/)

#### é¢˜ç›®æè¿°

ä»¥æ•°ç»„ `intervals` è¡¨ç¤ºè‹¥å¹²ä¸ªåŒºé—´çš„é›†åˆï¼Œå…¶ä¸­å•ä¸ªåŒºé—´ä¸º `intervals[i] = [starti, endi]` ã€‚è¯·ä½ åˆå¹¶æ‰€æœ‰é‡å çš„åŒºé—´ï¼Œå¹¶è¿”å› *ä¸€ä¸ªä¸é‡å çš„åŒºé—´æ•°ç»„ï¼Œè¯¥æ•°ç»„éœ€æ°å¥½è¦†ç›–è¾“å…¥ä¸­çš„æ‰€æœ‰åŒºé—´* ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šintervals = [[1,3],[2,6],[8,10],[15,18]]
è¾“å‡ºï¼š[[1,6],[8,10],[15,18]]
è§£é‡Šï¼šåŒºé—´ [1,3] å’Œ [2,6] é‡å , å°†å®ƒä»¬åˆå¹¶ä¸º [1,6].
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šintervals = [[1,4],[4,5]]
è¾“å‡ºï¼š[[1,5]]
è§£é‡Šï¼šåŒºé—´ [1,4] å’Œ [4,5] å¯è¢«è§†ä¸ºé‡å åŒºé—´ã€‚
```

**æç¤ºï¼š**

- `1 <= intervals.length <= 104`
- `intervals[i].length == 2`
- `0 <= starti <= endi <= 104`

#### é¢˜è§£

1. å…ˆæŒ‰ç¬¬ä¸€ä¸ªæ•°å­—è¿›è¡Œæ’åºğŸŒŸï¼›
2. ç„¶åéå†ansï¼Œå¦‚æœans.back()[1] >= intervals\[i][0]åˆ™å°†ans.back()[1]æ‰©å¤§ä¸ºmax(ans.back()[1], intervals\[i][1])ï¼›
3. å¦åˆ™å°±æŠŠ intervals[i] push_backåˆ°ansä¸­ï¼›

```c++
class Solution {
public:
    vector<vector<int>> merge(vector<vector<int>>& intervals) {
        vector<vector<int>> ans;
        sort(intervals.begin(), intervals.end(), [](vector<int> &a, vector<int> &b){return a[0] < b[0];});
        
        ans.push_back(intervals[0]);
        for (int i = 1; i < intervals.size(); i ++ ) {
            if (ans.back()[1] >= intervals[i][0]) {
                ans.back()[1] = max(ans.back()[1], intervals[i][1]);
            } else {
                ans.push_back(intervals[i]);
            }
        }

        return ans;
    }
};
```

### [189. è½®è½¬æ•°ç»„](https://leetcode.cn/problems/rotate-array/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³è½®è½¬ `k` ä¸ªä½ç½®ï¼Œå…¶ä¸­ `k` æ˜¯éè´Ÿæ•°ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,2,3,4,5,6,7], k = 3
è¾“å‡º: [5,6,7,1,2,3,4]
è§£é‡Š:
å‘å³è½®è½¬ 1 æ­¥: [7,1,2,3,4,5,6]
å‘å³è½®è½¬ 2 æ­¥: [6,7,1,2,3,4,5]
å‘å³è½®è½¬ 3 æ­¥: [5,6,7,1,2,3,4]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥ï¼šnums = [-1,-100,3,99], k = 2
è¾“å‡ºï¼š[3,99,-1,-100]
è§£é‡Š: 
å‘å³è½®è½¬ 1 æ­¥: [99,-1,-100,3]
å‘å³è½®è½¬ 2 æ­¥: [3,99,-1,-100]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `-231 <= nums[i] <= 231 - 1`
- `0 <= k <= 105`

**è¿›é˜¶ï¼š**

- å°½å¯èƒ½æƒ³å‡ºæ›´å¤šçš„è§£å†³æ–¹æ¡ˆï¼Œè‡³å°‘æœ‰ **ä¸‰ç§** ä¸åŒçš„æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
- ä½ å¯ä»¥ä½¿ç”¨ç©ºé—´å¤æ‚åº¦ä¸º `O(1)` çš„ **åŸåœ°** ç®—æ³•è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šåè½¬æ•°ç»„ï¼ˆç©ºé—´å¤æ‚åº¦O(1) + åŸåœ°ï¼‰**

æ ¸å¿ƒæ€æƒ³ï¼š

 <img src="./assets/1716207476-TyuIlk-lc189.png" alt="lc189.png" style="zoom: 33%;" />

ğŸŒŸ**å…³é”®æ­¥éª¤ï¼š** k %= nums.size(); // è½®è½¬ k æ¬¡ç­‰äºè½®è½¬ k % n æ¬¡ï¼Œå¦åˆ™å¯¹äºk > nums.size()çš„æƒ…å†µä¼šæº¢å‡ºã€‚

```c++
class Solution {
private:
    void reverse(vector<int>& nums, int start, int end) {
        int temp;
        while (start < end) {
            temp = nums[start];
            nums[start] = nums[end];
            nums[end] = temp;
            start++;
            end--;
        }
    }
public:
    void rotate(vector<int>& nums, int k) {
        k %= nums.size(); // è½®è½¬ k æ¬¡ç­‰äºè½®è½¬ k % n æ¬¡ï¼ï¼ï¼ï¼è¿™ä¸€æ­¥å¾ˆé‡è¦
        reverse(nums, 0, nums.size() - 1);  // æ•´ä¸ªåè½¬
        reverse(nums, 0, k - 1);  // åè½¬å‰kä¸ªæ•°å­—
        reverse(nums, k, nums.size() - 1);  // åè½¬ç¬¬k + 1 ï½ endè¿™éƒ¨åˆ†æ•°å­—
    }
};
```

### [238. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯](https://leetcode.cn/problems/product-of-array-except-self/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œè¿”å› æ•°ç»„ `answer` ï¼Œå…¶ä¸­ `answer[i]` ç­‰äº `nums` ä¸­é™¤ `nums[i]` ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯ ã€‚

é¢˜ç›®æ•°æ® **ä¿è¯** æ•°ç»„ `nums`ä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€çš„ä¹˜ç§¯éƒ½åœ¨ **32 ä½** æ•´æ•°èŒƒå›´å†…ã€‚

è¯· **ä¸è¦ä½¿ç”¨é™¤æ³•ï¼Œ**ä¸”åœ¨ `O(n)` æ—¶é—´å¤æ‚åº¦å†…å®Œæˆæ­¤é¢˜ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,2,3,4]
è¾“å‡º: [24,12,8,6]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [-1,1,0,-3,3]
è¾“å‡º: [0,0,9,0,0]
```

**æç¤ºï¼š**

- `2 <= nums.length <= 105`
- `-30 <= nums[i] <= 30`
- è¾“å…¥ **ä¿è¯** æ•°ç»„ `answer[i]` åœ¨ **32 ä½** æ•´æ•°èŒƒå›´å†…

**è¿›é˜¶ï¼š**ä½ å¯ä»¥åœ¨ `O(1)` çš„é¢å¤–ç©ºé—´å¤æ‚åº¦å†…å®Œæˆè¿™ä¸ªé¢˜ç›®å—ï¼Ÿï¼ˆ å‡ºäºå¯¹ç©ºé—´å¤æ‚åº¦åˆ†æçš„ç›®çš„ï¼Œè¾“å‡ºæ•°ç»„ **ä¸è¢«è§†ä¸º** é¢å¤–ç©ºé—´ã€‚ï¼‰

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šå‰åç¼€åˆ†è§£**

ä¸ä¸€èˆ¬å‰ç¼€å’Œæ¦‚å¿µä¸å¤ªä¸€æ ·ï¼Œè¿™é‡Œç”¨ï¼š

å‰ç¼€â€œç§¯â€forward[i]:è¡¨ç¤ºä» nums[0] åˆ° nums[iâˆ’1] çš„ä¹˜ç§¯ï¼ˆä¸åŒï¼šä¸æ˜¯åˆ°nums[i]ï¼‰ã€‚

åç¼€â€œç§¯â€backward[i]:è¡¨ç¤ºä» nums[i+1] åˆ° nums[nâˆ’1] çš„ä¹˜ç§¯ã€‚

- å› ä¸ºå‰ç¼€â€œç§¯â€çš„forward[i]ä¸ºiä¹‹å‰çš„å…ƒç´ ç´¯ç§¯å€¼ï¼Œbackward[i]ä¸ºiä¹‹åçš„å…ƒç´ ç´¯ç§¯å€¼ï¼Œ

  å› æ­¤å‰ç¼€å’Œåç¼€ä¹˜ç§¯åˆšå¥½ä¸ºï¼Œé™¤iä¹‹å¤–çš„å…ƒç´ ç´¯ç§¯å€¼ã€‚

```c++
class Solution {
public:
    vector<int> productExceptSelf(vector<int>& nums) {
        int len = nums.size();
        vector<int> forward(len, 1);  // å‰ç¼€â€œç§¯â€:è¡¨ç¤ºä» nums[0] åˆ° nums[iâˆ’1] çš„ä¹˜ç§¯ã€‚
        vector<int> backward(len, 1);  // åç¼€â€œç§¯â€:è¡¨ç¤ºä» nums[i+1] åˆ° nums[nâˆ’1] çš„ä¹˜ç§¯ã€‚

        // è®¡ç®—å‰ç¼€
        for (int i = 1; i < len; i ++ ) {
            forward[i] = forward[i - 1] * nums[i - 1];
        }

        // è®¡ç®—åç¼€
        for (int i = len - 2; i >= 0; i -- ) {
            backward[i] = backward[i + 1] * nums[i + 1];
        }

        // å› ä¸ºå‰ç¼€â€œç§¯â€çš„forward[i]ä¸ºiä¹‹å‰çš„å…ƒç´ ç´¯ç§¯å€¼ï¼Œbackward[i]ä¸ºiä¹‹åçš„å…ƒç´ ç´¯ç§¯å€¼ï¼Œ
        // å› æ­¤å‰ç¼€å’Œåç¼€ä¹˜ç§¯åˆšå¥½ä¸ºï¼Œé™¤iä¹‹å¤–çš„å…ƒç´ ç´¯ç§¯å€¼ã€‚
        vector<int> ans(len, 0);
        for (int i = 0; i < len; i ++ ) {
            ans[i] = forward[i] * backward[i];
        }

        return ans;
    }
};
```

**æ–¹æ³•äºŒï¼šä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ä¸ºO(1)**

åœ¨ æ–¹æ³•ä¸€ çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ï¼š

- ä¸å†ç”¨forwardè¡¨ï¼Œè€Œæ˜¯å…ˆè®¡ç®—backwardï¼›
- å› ä¸ºåœ¨`æ–¹æ³•ä¸€`ä¸­è®¡ç®—ansæ—¶ä¹Ÿæ˜¯ä»å‰å¾€åï¼Œæ‰€ä»¥å°†è®¡ç®—å‰ç¼€çš„è¿‡ç¨‹åˆå¹¶åˆ°äº†è®¡ç®—ansä¸­ï¼Œè€Œansä¹Ÿå¯ä»¥ç›´æ¥åœ¨backwardä¸Šåšè®¡ç®—ã€‚
- æ³¨æ„ï¼šåœ¨è®¡ç®—ansçš„è¿‡ç¨‹ä¸­ï¼Œè¦å…ˆåˆå¹¶backward[i] *= preï¼Œå†è®¡ç®—å‰ç¼€pre *= nums[i]ï¼›

```c++
class Solution {
public:
    vector<int> productExceptSelf(vector<int>& nums) {
        int len = nums.size();
        // vector<int> forward(len, 1);  // å‰ç¼€â€œç§¯â€:è¡¨ç¤ºä» nums[0] åˆ° nums[iâˆ’1] çš„ä¹˜ç§¯ã€‚
        vector<int> backward(len, 1);  // åç¼€â€œç§¯â€:è¡¨ç¤ºä» nums[i+1] åˆ° nums[nâˆ’1] çš„ä¹˜ç§¯ã€‚

        // // è®¡ç®—å‰ç¼€
        // for (int i = 1; i < len; i ++ ) {
        //     forward[i] = forward[i - 1] * nums[i - 1];
        // }

        // è®¡ç®—åç¼€
        for (int i = len - 2; i >= 0; i -- ) {
            backward[i] = backward[i + 1] * nums[i + 1];
        }

        // å› ä¸ºå‰ç¼€â€œç§¯â€çš„forward[i]ä¸ºiä¹‹å‰çš„å…ƒç´ ç´¯ç§¯å€¼ï¼Œbackward[i]ä¸ºiä¹‹åçš„å…ƒç´ ç´¯ç§¯å€¼ï¼Œ
        // å› æ­¤å‰ç¼€å’Œåç¼€ä¹˜ç§¯åˆšå¥½ä¸ºï¼Œé™¤iä¹‹å¤–çš„å…ƒç´ ç´¯ç§¯å€¼ã€‚
        // vector<int> ans(len, 0);
        int pre = 1;
        for (int i = 0; i < len; i ++ ) {
            // ans[i] = forward[i] * backward[i];
            backward[i] *= pre;
            pre *= nums[i];
        }

        return backward;
    }
};
```

### [41. ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°](https://leetcode.cn/problems/first-missing-positive/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ `nums` ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ã€‚

è¯·ä½ å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` å¹¶ä¸”åªä½¿ç”¨å¸¸æ•°çº§åˆ«é¢å¤–ç©ºé—´çš„è§£å†³æ–¹æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,0]
è¾“å‡ºï¼š3
è§£é‡Šï¼šèŒƒå›´ [1,2] ä¸­çš„æ•°å­—éƒ½åœ¨æ•°ç»„ä¸­ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [3,4,-1,1]
è¾“å‡ºï¼š2
è§£é‡Šï¼š1 åœ¨æ•°ç»„ä¸­ï¼Œä½† 2 æ²¡æœ‰ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [7,8,9,11,12]
è¾“å‡ºï¼š1
è§£é‡Šï¼šæœ€å°çš„æ­£æ•° 1 æ²¡æœ‰å‡ºç°ã€‚
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `-231 <= nums[i] <= 231 - 1`

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šåŸåœ°å“ˆå¸Œè¡¨ï¼ˆæ—¶é—´å¤æ‚åº¦O(n) + å¸¸æ•°é¢å¤–ç©ºé—´ï¼‰**

æ ¸å¿ƒæ€æƒ³ï¼šè®©ç¬¬iä¸ªä½ç½®ï¼ˆä¸‹æ ‡ä¸ºi-1ï¼‰æ”¾i ï¼›ä½¿ç”¨è¿™ç§æ–¹å¼å¤„ç†æ•°ç»„åï¼Œä¾æ¬¡éå†ä¸‹æ ‡ä¸º0åˆ°n-1ï¼ˆæ•°ç»„é•¿åº¦ï¼‰çš„ä½ç½®ï¼Œå¦‚æœä¸å¯¹åº”å°±è¿”å›i+1ï¼Œåä¹‹ï¼Œè¿”å›n+1

**å…³äºä¸Šè¿°éå†æ–¹å¼çš„è§£é‡Šï¼š**

> å¯¹äºå¤§å°ä¸ºnçš„æ•°ç»„ï¼Œè¿”å›å€¼ä¸€å®šæ˜¯[1,n+1] ï¼Œå¦‚æœ1~nä¸­æœ‰ä¸€ä¸ªæ•°æ²¡æœ‰å‡ºç°åœ¨æ•°ç»„ä¸­ï¼Œå°±è¿”å›è¿™ä¸ªæ•°ï¼Œåä¹‹ï¼Œè¿”å›n+1 ï¼Œæ‰€ä»¥éå†ä¸‹æ ‡0~n-1å°±æ˜¯éå†æ•°å€¼1~n ï¼Œä¸å¯¹åº”å°±è¿”å›ä¸‹æ ‡+1 ï¼Œéƒ½å¯¹åº”å°±è¿”å›n+1

**å…³äºå¤„ç†æ–¹å¼çš„è§£é‡Šï¼š**

> å¤„ç†çš„ç›®æ ‡æ˜¯ï¼šnums[i] = i+1 ï¼Œæ ¸å¿ƒæ‰‹æ®µæ˜¯**äº¤æ¢** éå†æ¯ä¸€ä¸ªä½ç½®iï¼Œå¾ªç¯äº¤æ¢è‡³ä½ç½®içš„å€¼ä¸ºi+1ï¼Œåœ¨äº¤æ¢è¿‡ç¨‹ä¸­ï¼Œæ˜¯æŠŠnums[i]æ¢åˆ°æŒ‡å®šçš„ä½ç½®

```c++
class Solution {
public:
    int firstMissingPositive(vector<int>& nums) {
        int len = nums.size();
        for (int i = 0; i < len; i ++ ) {
            // å¦‚æœnums[i]ä¸åœ¨å…¶å¯¹åº”ä½ç½®(i + 1)ä¸Šï¼Œåˆ™ä¼šè¿›è¡Œä¸‹åˆ—ä¸¤ç§å¤„ç†ï¼š
            // 1. å¦‚æœè¯¥æ•°å­—ä¸ºâ€œä¸åˆè§„æ•°å­—â€æˆ–â€œé‡å¤æ•°å­—ä¸”å¯¹åº”ä½ç½®ä¸Šå·²æœ‰ç›¸åŒæ•°å­—â€ï¼Œåˆ™å°†å…¶ç•™åœ¨åŸåœ°ï¼›
            // 2. å¦‚æœè¯¥æ•°å­—ä¸ºåˆè§„æ•°å­—ï¼Œåˆ™å°†å…¶ç§»åŠ¨åˆ°å¯¹åº”ä½ç½®ä¸Šã€‚
            while (nums[i] != i + 1) {
                // å¦‚æœè¯¥æ•°å­—ä¸ºâ€œä¸åˆè§„æ•°å­—â€æˆ–â€œé‡å¤æ•°å­—ä¸”å¯¹åº”ä½ç½®ä¸Šå·²æœ‰ç›¸åŒæ•°å­—â€
                if (nums[i] <= 0 || nums[i] > len || nums[i] == nums[nums[i] - 1]) {
                    break;
                }

                // å¦‚æœè¯¥æ•°å­—ä¸ºåˆè§„æ•°å­—ï¼Œåˆ™å°†å…¶ç§»åŠ¨åˆ°å¯¹åº”ä½ç½®ä¸Š
                int idx = nums[i] - 1;
                swap(nums[i], nums[idx]);
            }
        }

        for (int i = 0; i < len; i ++ ) {
            if (nums[i] != i + 1) {
                return i + 1;
            }
        }

        return len + 1;
    }
};
```



## çŸ©é˜µ

### [73. çŸ©é˜µç½®é›¶](https://leetcode.cn/problems/set-matrix-zeroes/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ª `*m* x *n*` çš„çŸ©é˜µï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ ä¸º **0** ï¼Œåˆ™å°†å…¶æ‰€åœ¨è¡Œå’Œåˆ—çš„æ‰€æœ‰å…ƒç´ éƒ½è®¾ä¸º **0** ã€‚è¯·ä½¿ç”¨ **[åŸåœ°](http://baike.baidu.com/item/åŸåœ°ç®—æ³•)** ç®—æ³•**ã€‚**

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/mat1.jpg" alt="img" style="zoom:50%;" />

```
è¾“å…¥ï¼šmatrix = [[1,1,1],[1,0,1],[1,1,1]]
è¾“å‡ºï¼š[[1,0,1],[0,0,0],[1,0,1]]
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/mat2.jpg" alt="img" style="zoom:50%;" />

```
è¾“å…¥ï¼šmatrix = [[0,1,2,0],[3,4,5,2],[1,3,1,5]]
è¾“å‡ºï¼š[[0,0,0,0],[0,4,5,0],[0,3,1,0]]
```

**æç¤ºï¼š**

- `m == matrix.length`
- `n == matrix[0].length`
- `1 <= m, n <= 200`
- `-231 <= matrix[i][j] <= 231 - 1`

**è¿›é˜¶ï¼š**

- ä¸€ä¸ªç›´è§‚çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨  `O(*m**n*)` çš„é¢å¤–ç©ºé—´ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆã€‚
- ä¸€ä¸ªç®€å•çš„æ”¹è¿›æ–¹æ¡ˆæ˜¯ä½¿ç”¨ `O(*m* + *n*)` çš„é¢å¤–ç©ºé—´ï¼Œä½†è¿™ä»ç„¶ä¸æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚
- ä½ èƒ½æƒ³å‡ºä¸€ä¸ªä»…ä½¿ç”¨å¸¸é‡ç©ºé—´çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ

#### é¢˜è§£

æ³¨æ„ï¼šä¸‰ä¸ªé¢˜è§£åªæ˜¯é€æ­¥å±•ç¤ºæ€è·¯ï¼Œæ˜¯é€’è¿›å…³ç³»æ–¹ä¾¿ç†è§£ï¼ŒçœŸæ­£æœ€ä¼˜åŒ–é¢˜è§£çœ‹æ–¹æ³•ä¸‰å°±å¯ä»¥ï¼›

**æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•**

ç©ºé—´å¤æ‚åº¦Oï¼ˆm*nï¼‰ï¼Œç”¨äº†ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„è¾…åŠ©çŸ©é˜µbã€‚

```c++
class Solution {
public:
    void setZeroes(vector<vector<int>>& matrix) {
        int m=matrix.size();
        int n=matrix[0].size();
        vector<vector<bool>> b(m,vector<bool>(n,1));
        for(int i=0;i<m;i++){
            for(int j=0;j<n;j++){
                if(matrix[i][j]==0) b[i][j]=0;
            }
        }
        for(int i=0;i<m;i++){
            for(int j=0;j<n;j++){
                if(matrix[i][j]==0&&b[i][j]==0){
                    for(int k=0;k<m;k++) matrix[k][j]=0;//æœ¬è¡Œç½®0
                    for(int k=0;k<n;k++) matrix[i][k]=0;//æœ¬åˆ—ç½®0                   
                }
            }
        }
    }
};
```

**æ–¹æ³•äºŒï¼šç”¨ä¸¤ä¸ªä¸€ç»´æ•°ç»„ä»£æ›¿æš´åŠ›çŸ©é˜µ**

æˆ‘ä»¬å‘ç°ä¸€è¡Œé‡Œæœ‰1ä¸ª0å’Œå¤šä¸ª0æ•ˆæœä¸€æ ·ï¼Œä¸€åˆ—é‡Œæœ‰1ä¸ª0å’Œå¤šä¸ª0æ•ˆæœä¸€æ ·ï¼Œæ•…å¯ä»¥ç”¨ä¸¤ä¸ªä¸€ç»´æ•°ç»„è¾…åŠ©ï¼Œç©ºé—´å¤æ‚åº¦é™åˆ°Oï¼ˆm+nï¼‰

å¦‚æœmatrixæŸä¸ªå…ƒç´ ä¸º0ï¼Œå°±æŠŠæ‰€åœ¨è¡Œã€åˆ—å¯¹åº”çš„æ ‡è®°æ•°ç»„è®°ä¸º0ã€‚å’Œæ–¹æ³•ä¸€ç›¸æ¯”ï¼Œæ­¤æ³•åœ¨ä¿®æ”¹matrixçŸ©é˜µæ—¶ä¹Ÿæ›´æ–¹ä¾¿ã€‚

```c++
class Solution {
public:
    void setZeroes(vector<vector<int>>& matrix) {
        int m=matrix.size();
        int n=matrix[0].size();
        vector<bool>row(m,1),col(n,1);
        for(int i=0;i<m;i++){
            for(int j=0;j<n;j++){
                if(matrix[i][j]==0) row[i]=col[j]=0;
            }
        }
        for(int i=0;i<m;i++){
            for(int j=0;j<n;j++){
                if(row[i]==0||col[j]==0){
                    matrix[i][j]=0;                 
                }
            }
        }
    }
};
```

**æ–¹æ³•ä¸‰ï¼šåŸåœ°è®°å½•**

è¿˜æ˜¯åˆ©ç”¨ä¸Šè¿°ç‰¹æ€§ï¼Œåªéœ€ä½¿ç”¨ä¸€ä¸ªè¡Œæ•°ç»„+ä¸€ä¸ªåˆ—æ•°ç»„ä½œè¾…åŠ©ï¼Œä½†æˆ‘ä»¬ä¸å†ç”³è¯·æ–°ç©ºé—´ï¼Œè€Œæ˜¯ç›´æ¥ç”¨åŸmatrixæ•°ç»„çš„ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—è®°å½•è¯¥è¡Œ/è¯¥åˆ—æ˜¯å¦éœ€ç½®0ã€‚

ï¼ˆ1ï¼‰è¦å…ˆç»Ÿè®¡ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æœ‰æ²¡æœ‰0ï¼Œè¿™æ ·åœ¨åˆ©ç”¨å®Œä»–ä»¬è®°å½•çš„ä¿¡æ¯åï¼Œå¯ä»¥æ­£ç¡®çš„å¤„ç†ä»–ä»¬ã€‚

ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆç¬¬ä¸€è¡Œã€ç¬¬ä¸€åˆ—çš„æ™®é€šæ•°å­—ä¸ä¼šå› ä¸ºè®°å½•è€Œä¸¢å¤±ï¼šå¦‚æœç¬¬iè¡Œæœ‰0ï¼Œmatrix[i][0]å°±è¦ç½®0ï¼Œmatrix[i][0]åŸæ¥çš„æ•°å­—ä¼šè¢«0è¦†ç›–ï¼Œä½†æ˜¯è¯´æ˜è¿™ä¸€è¡Œæœ¬æ¥ä¹Ÿè¦è¦è¢«ç½®0ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æ­£ç¡®ã€‚

> éœ€è¦æ³¨æ„çš„æ˜¯row0_signalå’Œcol0_signalçš„ä½¿ç”¨ğŸŒŸï¼›

```c++
class Solution {
public:
    void setZeroes(vector<vector<int>>& matrix) {
        int row_size = matrix.size();  // è¡Œæ•°é‡
        int col_size = matrix[0].size();  // åˆ—æ•°é‡
        // å¦‚æœä¸è®°å½•4.å°±ä¼šä¸çŸ¥é“éœ€ä¸éœ€è¦æŠŠç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ä¹Ÿè½¬æ¢ä¸º0ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥æ˜¯å¿…é¡»çš„
        int row0_signal = 0;  // è®°å½•ç¬¬ä¸€è¡Œæ˜¯å¦æœ‰0
        int col0_signal = 0;  // è®°å½•ç¬¬ä¸€åˆ—æ˜¯å¦æœ‰0

        // 1. æŸ¥çœ‹ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—æ˜¯å¦æœ‰0
        for (int i = 0; i < row_size; i ++ ) if (matrix[i][0] == 0) col0_signal = 1;
        for (int j = 0; j < col_size; j ++ ) if (matrix[0][j] == 0) row0_signal = 1;

        // 2. éå†matrix[1][1] ~ matrix[row_size][col_size]å…ƒç´ ï¼Œå¹¶ç”¨ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—åšè®°å½•
        for (int i = 1; i < row_size; i ++ ) {
            for (int j = 1; j < col_size; j ++ ) {
                if (matrix[i][j] == 0) {
                    matrix[i][0] = 0;
                    matrix[0][j] = 0;
                }
            }
        }

        // 3. æ ¹æ®ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ï¼Œå°†matrix[1][1] ~ matrix[row_size][col_size]è½¬æ¢ä¸º0
        for (int i = 1; i < row_size; i ++ ) {
            for (int j = 1; j < col_size; j ++ ) {
                if (matrix[i][0] == 0 || matrix[0][j] == 0) {
                    matrix[i][j] = 0;
                }
            }
        }

        cout << row0_signal << col0_signal << endl;

        // 4. æ ¹æ®row0_signalå’Œcol0_signalå°†ç¬¬ä¸€åˆ—å’Œç¬¬ä¸€è¡Œè½¬æ¢ä¸º0
        if (row0_signal == 1) {
            for (int i = 0; i < col_size; i ++ ) matrix[0][i] = 0;
        }
        if (col0_signal == 1) {
            for (int i = 0; i < row_size; i ++ ) matrix[i][0] = 0;
        }
    }
};
```

### [54. èºæ—‹çŸ©é˜µ](https://leetcode.cn/problems/spiral-matrix/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ª `m` è¡Œ `n` åˆ—çš„çŸ©é˜µ `matrix` ï¼Œè¯·æŒ‰ç…§ **é¡ºæ—¶é’ˆèºæ—‹é¡ºåº** ï¼Œè¿”å›çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/spiral1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šmatrix = [[1,2,3],[4,5,6],[7,8,9]]
è¾“å‡ºï¼š[1,2,3,6,9,8,7,4,5]
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/spiral.jpg" alt="img" style="zoom: 67%;" />

```
è¾“å…¥ï¼šmatrix = [[1,2,3,4],[5,6,7,8],[9,10,11,12]]
è¾“å‡ºï¼š[1,2,3,4,8,12,11,10,9,5,6,7]
```

**æç¤ºï¼š**

- `m == matrix.length`
- `n == matrix[i].length`
- `1 <= m, n <= 10`
- `-100 <= matrix[i][j] <= 100`

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ**

æ ¹æ®é¢˜ç›®ç¤ºä¾‹ matrix = [[1,2,3],[4,5,6],[7,8,9]] çš„å¯¹åº”è¾“å‡º [1,2,3,6,9,8,7,4,5] å¯ä»¥å‘ç°ï¼Œé¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µçš„é¡ºåºæ˜¯ â€œä»å·¦å‘å³ã€ä»ä¸Šå‘ä¸‹ã€ä»å³å‘å·¦ã€ä»ä¸‹å‘ä¸Šâ€ å¾ªç¯ã€‚

å› æ­¤ï¼Œè€ƒè™‘è®¾å®šçŸ©é˜µçš„ â€œå·¦ã€ä¸Šã€å³ã€ä¸‹â€ å››ä¸ªè¾¹ç•Œï¼Œæ¨¡æ‹Ÿä»¥ä¸ŠçŸ©é˜µéå†é¡ºåºã€‚

```c++
class Solution {
public:
    vector<int> spiralOrder(vector<vector<int>>& matrix) {
        if (matrix.empty()) return {};
        int left = 0, right = matrix[0].size() - 1, top = 0, bottom = matrix.size() - 1;

        vector<int> ans;
        while (true) {
            // ä»å·¦åˆ°å³
            for (int i = left; i <= right; i ++ ) ans.push_back(matrix[top][i]);
            if (++top > bottom) break;
            // ä»ä¸Šåˆ°ä¸‹
            for (int i = top; i <= bottom; i ++ ) ans.push_back(matrix[i][right]);
            if (--right < left) break;
            // ä»å³åˆ°å·¦
            for (int i = right; i >= left; i -- ) ans.push_back(matrix[bottom][i]);
            if (--bottom < top) break;
            // ä»ä¸‹åˆ°ä¸Š
            for (int i = bottom; i >= top; i -- ) ans.push_back(matrix[i][left]);
            if (++left > right) break;
        }

        return ans;
    }
};
```

### [48. æ—‹è½¬å›¾åƒ](https://leetcode.cn/problems/rotate-image/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ª *n* Ã— *n* çš„äºŒç»´çŸ©é˜µ `matrix` è¡¨ç¤ºä¸€ä¸ªå›¾åƒã€‚è¯·ä½ å°†å›¾åƒé¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚

ä½ å¿…é¡»åœ¨**[ åŸåœ°](https://baike.baidu.com/item/åŸåœ°ç®—æ³•)** æ—‹è½¬å›¾åƒï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦ç›´æ¥ä¿®æ”¹è¾“å…¥çš„äºŒç»´çŸ©é˜µã€‚**è¯·ä¸è¦** ä½¿ç”¨å¦ä¸€ä¸ªçŸ©é˜µæ¥æ—‹è½¬å›¾åƒã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/mat1-20250404164416973.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šmatrix = [[1,2,3],[4,5,6],[7,8,9]]
è¾“å‡ºï¼š[[7,4,1],[8,5,2],[9,6,3]]
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/mat2-20250404164416686.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šmatrix = [[5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16]]
è¾“å‡ºï¼š[[15,13,2,5],[14,3,4,1],[12,6,8,9],[16,7,10,11]]
```

**æç¤ºï¼š**

- `n == matrix.length == matrix[i].length`
- `1 <= n <= 20`
- `-1000 <= matrix[i][j] <= 1000`

#### é¢˜è§£

è€ƒè™‘ä¸å€ŸåŠ©è¾…åŠ©çŸ©é˜µï¼Œé€šè¿‡åœ¨åŸçŸ©é˜µä¸­ç›´æ¥ã€ŒåŸåœ°ä¿®æ”¹ã€ï¼Œå®ç°ç©ºé—´å¤æ‚åº¦ O(1) çš„è§£æ³•ã€‚

ä»¥ä½äºçŸ©é˜µå››ä¸ªè§’ç‚¹çš„å…ƒç´ ä¸ºä¾‹ï¼Œè®¾çŸ©é˜µå·¦ä¸Šè§’å…ƒç´  A ã€å³ä¸Šè§’å…ƒç´  B ã€å³ä¸‹è§’å…ƒç´  C ã€å·¦ä¸‹è§’å…ƒç´  D ã€‚çŸ©é˜µæ—‹è½¬ 90Âº åï¼Œç›¸å½“äºä¾æ¬¡å…ˆåæ‰§è¡Œ Dâ†’A , Câ†’D , Bâ†’C , Aâ†’B ä¿®æ”¹å…ƒç´ ï¼Œå³å¦‚ä¸‹ã€Œé¦–å°¾ç›¸æ¥ã€çš„å…ƒç´ æ—‹è½¬æ“ä½œï¼š
$$
Aâ†Dâ†Câ†Bâ†A
$$


<img src="./assets/1638557961-BSxFQQ-ccw-01-07.002.png" alt="ccw-01-07.002.png" style="zoom:67%;" />

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç”±äºç¬¬ 1 æ­¥ Dâ†’A å·²ç»å°† A è¦†ç›–ï¼ˆå¯¼è‡´ A ä¸¢å¤±ï¼‰ï¼Œæ­¤ä¸¢å¤±å¯¼è‡´æœ€åç¬¬ 4 æ­¥ Aâ†’B æ— æ³•èµ‹å€¼ã€‚ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œè€ƒè™‘å€ŸåŠ©ä¸€ä¸ªã€Œè¾…åŠ©å˜é‡ tmp ã€é¢„å…ˆå­˜å‚¨ A ï¼Œæ­¤æ—¶çš„æ—‹è½¬æ“ä½œå˜ä¸ºï¼š 
$$
æš‚å­˜ tmp=A
$$

$$
Aâ†Dâ†Câ†Bâ†tmp
$$

![ccw-01-07.003.png](./assets/1638557961-hYpOoH-ccw-01-07.003.png)

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸€è½®å¯ä»¥å®ŒæˆçŸ©é˜µ 4 ä¸ªå…ƒç´ çš„æ—‹è½¬ã€‚å› è€Œï¼Œåªè¦åˆ†åˆ«ä»¥çŸ©é˜µå·¦ä¸Šè§’ 1/4 çš„å„å…ƒç´ ä¸ºèµ·å§‹ç‚¹æ‰§è¡Œä»¥ä¸Šæ—‹è½¬æ“ä½œï¼Œå³å¯å®Œæ•´å®ç°çŸ©é˜µæ—‹è½¬ã€‚

å…·ä½“æ¥çœ‹ï¼Œå½“çŸ©é˜µå¤§å° n ä¸ºå¶æ•°æ—¶ï¼Œå–å‰ n/2  è¡Œã€å‰ n/2  åˆ—çš„å…ƒç´ ä¸ºèµ·å§‹ç‚¹ï¼›å½“çŸ©é˜µå¤§å° n ä¸ºå¥‡æ•°æ—¶ï¼Œå–å‰ n/2  è¡Œã€å‰ (n+1)/2  åˆ—çš„å…ƒç´ ä¸ºèµ·å§‹ç‚¹ã€‚ 

ä»¤ matrix[i][j]=A ï¼Œæ ¹æ®æ–‡ç« å¼€å¤´çš„å…ƒç´ æ—‹è½¬å…¬å¼ï¼Œå¯æ¨å¯¼å¾—é€‚ç”¨äºä»»æ„èµ·å§‹ç‚¹çš„å…ƒç´ æ—‹è½¬æ“ä½œï¼š
$$
æš‚å­˜tmp=matrix[i][j]
$$

$$
matrix[i][j]â†matrix[nâˆ’1âˆ’j][i]â†matrix[nâˆ’1âˆ’i][nâˆ’1âˆ’j]â†matrix[j][nâˆ’1âˆ’i]â†tmp
$$

> å¦‚ä½•å¿«é€Ÿåˆ¤æ–­Aä¸Bä¹‹é—´çš„ä½ç½®å…³ç³»ï¼Ÿ
>
> ![image-20250404165026037](./assets/image-20250404165026037.png)
>
> åŒç†ï¼Œå…¶ä»–ä½ç½®ä¹Ÿå¯ä»¥æ ¹æ®Aæ˜¯å¦‚ä½•å˜åŒ–çš„æ¥å†™å‡ºï¼Œ
>
> ç­‰å·å‰é¢å°±é¡ºåº”ä¹‹å‰çš„ç‚¹ï¼Œç­‰å·åé¢æ ¹æ®ä¸Šè¿°æ–¹æ³•åˆ¤æ–­å³å¯ã€‚

```c++
class Solution {
public:
    void rotate(vector<vector<int>>& matrix) {
        int tmp;
        int n = matrix.size();  // matrixä¸º æ–¹é˜µï¼›
        for (int i = 0; i < (n / 2); i ++ ) {
            for (int j = 0; j < (n + 1) / 2; j ++ ) {
                tmp = matrix[i][j];
                matrix[i][j] = matrix[n - 1 - j][i];
                matrix[n - 1 - j][i] = matrix[n - 1 - i][n - 1 - j];
                matrix[n - 1 - i][n - 1 - j] = matrix[j][n - 1 - i];
                matrix[j][n - 1 - i] = tmp;
            }
        }
    }
};
```

### [240. æœç´¢äºŒç»´çŸ©é˜µ II](https://leetcode.cn/problems/search-a-2d-matrix-ii/)

#### é¢˜ç›®æè¿°

ç¼–å†™ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•æ¥æœç´¢ `*m* x *n*` çŸ©é˜µ `matrix` ä¸­çš„ä¸€ä¸ªç›®æ ‡å€¼ `target` ã€‚è¯¥çŸ©é˜µå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š

- æ¯è¡Œçš„å…ƒç´ ä»å·¦åˆ°å³å‡åºæ’åˆ—ã€‚
- æ¯åˆ—çš„å…ƒç´ ä»ä¸Šåˆ°ä¸‹å‡åºæ’åˆ—ã€‚ 

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/searchgrid2.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šmatrix = [[1,4,7,11,15],[2,5,8,12,19],[3,6,9,16,22],[10,13,14,17,24],[18,21,23,26,30]], target = 5
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/searchgrid.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šmatrix = [[1,4,7,11,15],[2,5,8,12,19],[3,6,9,16,22],[10,13,14,17,24],[18,21,23,26,30]], target = 20
è¾“å‡ºï¼šfalse
```

**æç¤ºï¼š**

- `m == matrix.length`
- `n == matrix[i].length`
- `1 <= n, m <= 300`
- `-109 <= matrix[i][j] <= 109`
- æ¯è¡Œçš„æ‰€æœ‰å…ƒç´ ä»å·¦åˆ°å³å‡åºæ’åˆ—
- æ¯åˆ—çš„æ‰€æœ‰å…ƒç´ ä»ä¸Šåˆ°ä¸‹å‡åºæ’åˆ—
- `-109 <= target <= 109`

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ**

è‹¥ä½¿ç”¨æš´åŠ›æ³•éå†çŸ©é˜µ matrix ï¼Œåˆ™æ—¶é—´å¤æ‚åº¦ä¸º O(NM) ã€‚æš´åŠ›æ³•æœªåˆ©ç”¨çŸ©é˜µ â€œä»ä¸Šåˆ°ä¸‹é€’å¢ã€ä»å·¦åˆ°å³é€’å¢â€ çš„ç‰¹ç‚¹ï¼Œæ˜¾ç„¶ä¸æ˜¯æœ€ä¼˜è§£æ³•ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†çŸ©é˜µé€†æ—¶é’ˆæ—‹è½¬ 45Â° ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºå›¾å½¢å¼ï¼Œå‘ç°å…¶ç±»ä¼¼äº äºŒå‰æœç´¢æ ‘ ï¼Œå³å¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œå…¶å·¦åˆ†æ”¯å…ƒç´ æ›´å°ã€å³åˆ†æ”¯å…ƒç´ æ›´å¤§ã€‚å› æ­¤ï¼Œé€šè¿‡ä» â€œæ ¹èŠ‚ç‚¹â€ å¼€å§‹æœç´¢ï¼Œé‡åˆ°æ¯” target å¤§çš„å…ƒç´ å°±å‘å·¦ï¼Œåä¹‹å‘å³ï¼Œå³å¯æ‰¾åˆ°ç›®æ ‡å€¼ target ã€‚

 <img src="./assets/6584ea93812d27112043d203ea90e4b0950117d45e0452d0c630fcb247fbc4af-Picture1.png" alt="Picture1.png" style="zoom:48%;" />

â€œæ ¹èŠ‚ç‚¹â€ å¯¹åº”çš„æ˜¯çŸ©é˜µçš„ â€œå·¦ä¸‹è§’â€ å’Œ â€œå³ä¸Šè§’â€ å…ƒç´ ï¼Œæœ¬æ–‡ç§°ä¹‹ä¸º æ ‡å¿—æ•° ï¼Œä»¥ matrix ä¸­çš„ å·¦ä¸‹è§’å…ƒç´  ä¸ºæ ‡å¿—æ•° flag ï¼Œåˆ™æœ‰:

è‹¥ flag > target ï¼Œåˆ™ target ä¸€å®šåœ¨ flag æ‰€åœ¨ è¡Œçš„ä¸Šæ–¹ ï¼Œå³ flag æ‰€åœ¨è¡Œå¯è¢«æ¶ˆå»ã€‚
è‹¥ flag < target ï¼Œåˆ™ target ä¸€å®šåœ¨ flag æ‰€åœ¨ åˆ—çš„å³æ–¹ ï¼Œå³ flag æ‰€åœ¨åˆ—å¯è¢«æ¶ˆå»ã€‚
ç®—æ³•æµç¨‹ï¼š
ä»çŸ©é˜µ matrix å·¦ä¸‹è§’å…ƒç´ ï¼ˆç´¢å¼•è®¾ä¸º (i, j) ï¼‰å¼€å§‹éå†ï¼Œå¹¶ä¸ç›®æ ‡å€¼å¯¹æ¯”ï¼š
å½“ matrix\[i][j] > target æ—¶ï¼Œæ‰§è¡Œ i-- ï¼Œå³æ¶ˆå»ç¬¬ i è¡Œå…ƒç´ ã€‚
å½“ matrix\[i][j] < target æ—¶ï¼Œæ‰§è¡Œ j++ ï¼Œå³æ¶ˆå»ç¬¬ j åˆ—å…ƒç´ ã€‚
å½“ matrix\[i][j] = target æ—¶ï¼Œè¿”å› true ï¼Œä»£è¡¨æ‰¾åˆ°ç›®æ ‡å€¼ã€‚
è‹¥è¡Œç´¢å¼•æˆ–åˆ—ç´¢å¼•è¶Šç•Œï¼Œåˆ™ä»£è¡¨çŸ©é˜µä¸­æ— ç›®æ ‡å€¼ï¼Œè¿”å› false ã€‚
æ¯è½® i æˆ– j ç§»åŠ¨åï¼Œç›¸å½“äºç”Ÿæˆäº†â€œæ¶ˆå»ä¸€è¡Œï¼ˆåˆ—ï¼‰çš„æ–°çŸ©é˜µâ€ï¼Œ ç´¢å¼•(i,j) æŒ‡å‘æ–°çŸ©é˜µçš„å·¦ä¸‹è§’å…ƒç´ ï¼ˆæ ‡å¿—æ•°ï¼‰ï¼Œå› æ­¤å¯é‡å¤ä½¿ç”¨ä»¥ä¸Šæ€§è´¨æ¶ˆå»è¡Œï¼ˆåˆ—ï¼‰ã€‚

```c++
class Solution {
public:
    bool searchMatrix(vector<vector<int>>& matrix, int target) {
        int i = matrix.size() - 1, j = 0;
        while (i >= 0 && j < matrix[0].size()) {
            if (matrix[i][j] > target) i--;
            else if (matrix[i][j] < target) j++;
            else return true;
        }
        return false;
    }
};
```

æ—¶é—´å¤æ‚åº¦ O(M+N) ï¼šå…¶ä¸­ï¼ŒN å’Œ M åˆ†åˆ«ä¸ºçŸ©é˜µè¡Œæ•°å’Œåˆ—æ•°ï¼Œæ­¤ç®—æ³•æœ€å¤šå¾ªç¯ M+N æ¬¡ã€‚
ç©ºé—´å¤æ‚åº¦ O(1) : i, j æŒ‡é’ˆä½¿ç”¨å¸¸æ•°å¤§å°é¢å¤–ç©ºé—´ã€‚



## é“¾è¡¨

### ç»éªŒæ€»ç»“

#### 1. ä»€ä¹ˆæ—¶å€™è¦ç”¨dummyHeadï¼Ÿ

å½“headæŒ‡å‘çš„èŠ‚ç‚¹ä¼šè¢«æ”¹å˜ï¼Œæ¯”å¦‚å¤´èŠ‚ç‚¹**ä¸å†æ˜¯headæŒ‡å‘çš„èŠ‚ç‚¹**ã€headæŒ‡å‘èŠ‚ç‚¹**å¯èƒ½ä¼šè¢«åˆ é™¤**ç­‰æƒ…å†µæ—¶ï¼Œå°±éœ€è¦dummyHeadæ¥æŒ‡å‘æäº¤æ—¶çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚

### [160. ç›¸äº¤é“¾è¡¨](https://leetcode.cn/problems/intersection-of-two-linked-lists/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `headA` å’Œ `headB` ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚å¦‚æœä¸¤ä¸ªé“¾è¡¨ä¸å­˜åœ¨ç›¸äº¤èŠ‚ç‚¹ï¼Œè¿”å› `null` ã€‚

å›¾ç¤ºä¸¤ä¸ªé“¾è¡¨åœ¨èŠ‚ç‚¹ `c1` å¼€å§‹ç›¸äº¤**ï¼š**

[<img src="./assets/160_statement.png" alt="img" style="zoom:50%;" />](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_statement.png)

é¢˜ç›®æ•°æ® **ä¿è¯** æ•´ä¸ªé“¾å¼ç»“æ„ä¸­ä¸å­˜åœ¨ç¯ã€‚

**æ³¨æ„**ï¼Œå‡½æ•°è¿”å›ç»“æœåï¼Œé“¾è¡¨å¿…é¡» **ä¿æŒå…¶åŸå§‹ç»“æ„** ã€‚

**è‡ªå®šä¹‰è¯„æµ‹ï¼š**

**è¯„æµ‹ç³»ç»Ÿ** çš„è¾“å…¥å¦‚ä¸‹ï¼ˆä½ è®¾è®¡çš„ç¨‹åº **ä¸é€‚ç”¨** æ­¤è¾“å…¥ï¼‰ï¼š

- `intersectVal` - ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹çš„å€¼ã€‚å¦‚æœä¸å­˜åœ¨ç›¸äº¤èŠ‚ç‚¹ï¼Œè¿™ä¸€å€¼ä¸º `0`
- `listA` - ç¬¬ä¸€ä¸ªé“¾è¡¨
- `listB` - ç¬¬äºŒä¸ªé“¾è¡¨
- `skipA` - åœ¨ `listA` ä¸­ï¼ˆä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼‰è·³åˆ°äº¤å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹æ•°
- `skipB` - åœ¨ `listB` ä¸­ï¼ˆä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼‰è·³åˆ°äº¤å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹æ•°

è¯„æµ‹ç³»ç»Ÿå°†æ ¹æ®è¿™äº›è¾“å…¥åˆ›å»ºé“¾å¼æ•°æ®ç»“æ„ï¼Œå¹¶å°†ä¸¤ä¸ªå¤´èŠ‚ç‚¹ `headA` å’Œ `headB` ä¼ é€’ç»™ä½ çš„ç¨‹åºã€‚å¦‚æœç¨‹åºèƒ½å¤Ÿæ­£ç¡®è¿”å›ç›¸äº¤èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä½ çš„è§£å†³æ–¹æ¡ˆå°†è¢« **è§†ä½œæ­£ç¡®ç­”æ¡ˆ** ã€‚

**ç¤ºä¾‹ 1ï¼š**

[<img src="./assets/160_example_1_1.png" alt="img" style="zoom: 50%;" />](https://assets.leetcode.com/uploads/2018/12/13/160_example_1.png)

```
è¾“å…¥ï¼šintersectVal = 8, listA = [4,1,8,4,5], listB = [5,6,1,8,4,5], skipA = 2, skipB = 3
è¾“å‡ºï¼šIntersected at '8'
è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 8 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚
ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [4,1,8,4,5]ï¼Œé“¾è¡¨ B ä¸º [5,6,1,8,4,5]ã€‚
åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 2 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ã€‚
â€” è¯·æ³¨æ„ç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸ä¸º 1ï¼Œå› ä¸ºåœ¨é“¾è¡¨ A å’Œé“¾è¡¨ B ä¹‹ä¸­å€¼ä¸º 1 çš„èŠ‚ç‚¹ (A ä¸­ç¬¬äºŒä¸ªèŠ‚ç‚¹å’Œ B ä¸­ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹) æ˜¯ä¸åŒçš„èŠ‚ç‚¹ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬åœ¨å†…å­˜ä¸­æŒ‡å‘ä¸¤ä¸ªä¸åŒçš„ä½ç½®ï¼Œè€Œé“¾è¡¨ A å’Œé“¾è¡¨ B ä¸­å€¼ä¸º 8 çš„èŠ‚ç‚¹ (A ä¸­ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ï¼ŒB ä¸­ç¬¬å››ä¸ªèŠ‚ç‚¹) åœ¨å†…å­˜ä¸­æŒ‡å‘ç›¸åŒçš„ä½ç½®ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

[<img src="./assets/160_example_2.png" alt="img" style="zoom:50%;" />](https://assets.leetcode.com/uploads/2018/12/13/160_example_2.png)

```
è¾“å…¥ï¼šintersectVal = 2, listA = [1,9,1,2,4], listB = [3,2,4], skipA = 3, skipB = 1
è¾“å‡ºï¼šIntersected at '2'
è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 2 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚
ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [1,9,1,2,4]ï¼Œé“¾è¡¨ B ä¸º [3,2,4]ã€‚
åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 1 ä¸ªèŠ‚ç‚¹ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

[<img src="./assets/160_example_3.png" alt="img" style="zoom:50%;" />](https://assets.leetcode.com/uploads/2018/12/13/160_example_3.png)

```
è¾“å…¥ï¼šintersectVal = 0, listA = [2,6,4], listB = [1,5], skipA = 3, skipB = 2
è¾“å‡ºï¼šNo intersection
è§£é‡Šï¼šä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [2,6,4]ï¼Œé“¾è¡¨ B ä¸º [1,5]ã€‚
ç”±äºè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œæ‰€ä»¥ intersectVal å¿…é¡»ä¸º 0ï¼Œè€Œ skipA å’Œ skipB å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚
è¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œå› æ­¤è¿”å› null ã€‚
```

**æç¤ºï¼š**

- `listA` ä¸­èŠ‚ç‚¹æ•°ç›®ä¸º `m`
- `listB` ä¸­èŠ‚ç‚¹æ•°ç›®ä¸º `n`
- `1 <= m, n <= 3 * 104`
- `1 <= Node.val <= 105`
- `0 <= skipA <= m`
- `0 <= skipB <= n`
- å¦‚æœ `listA` å’Œ `listB` æ²¡æœ‰äº¤ç‚¹ï¼Œ`intersectVal` ä¸º `0`
- å¦‚æœ `listA` å’Œ `listB` æœ‰äº¤ç‚¹ï¼Œ`intersectVal == listA[skipA] == listB[skipB]`

**è¿›é˜¶ï¼š**ä½ èƒ½å¦è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ `O(m + n)` ã€ä»…ç”¨ `O(1)` å†…å­˜çš„è§£å†³æ–¹æ¡ˆï¼Ÿ

#### é¢˜è§£

1. å…ˆåˆ†åˆ«éå†Aã€Bä¸¤ä¸ªé“¾è¡¨ï¼Œå¾—åˆ°ä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦ï¼›
2. ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘å„è‡ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®©é•¿åº¦æ›´é•¿çš„é“¾è¡¨æŒ‡é’ˆå…ˆèµ°abs(lenA - lenB)ä¸ªèŠ‚ç‚¹ï¼›
3. ä¸¤ä¸ªé“¾è¡¨åŒæ—¶å‰è¿›ï¼š

- å¦‚æœæœ‰ç›¸äº¤ï¼Œåˆ™è¿”å›ç›¸äº¤èŠ‚ç‚¹ï¼›
- è‹¥å§‹ç»ˆæ²¡æœ‰ç›¸äº¤ï¼Œåˆ™æœ€åè¿”å›NULLï¼›

```c++
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode(int x) : val(x), next(NULL) {}
 * };
 */
class Solution {
public:
    ListNode *getIntersectionNode(ListNode *headA, ListNode *headB) {
        // å…ˆéå†Aï¼Œå¾—åˆ°Açš„é•¿åº¦
        int lenA = 0;
        ListNode* Apoint = headA;
        while (Apoint != NULL) {
            Apoint = Apoint->next;
            lenA++;
        }
        // å¾—åˆ°Bçš„é•¿åº¦
        int lenB = 0;
        ListNode* Bpoint = headB;
        while (Bpoint != NULL) {
            Bpoint = Bpoint->next;
            lenB++;
        }

        Apoint = headA;
        Bpoint = headB;
        int diff = abs(lenA - lenB);
        if (lenA > lenB) {
            while (diff--) Apoint = Apoint->next;
        } else {
            while (diff--) Bpoint = Bpoint->next;
        }

        while (Apoint != NULL && Bpoint != NULL) {
            if (Apoint == Bpoint) return Apoint;
            Apoint = Apoint->next;
            Bpoint = Bpoint->next;
        }

        return NULL;
    }
};
```

### [206. åè½¬é“¾è¡¨](https://leetcode.cn/problems/reverse-linked-list/)

#### é¢˜ç›®æè¿°

ç»™ä½ å•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œè¯·ä½ åè½¬é“¾è¡¨ï¼Œå¹¶è¿”å›åè½¬åçš„é“¾è¡¨ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/rev1ex1.jpg" alt="img" style="zoom: 67%;" />

```
è¾“å…¥ï¼šhead = [1,2,3,4,5]
è¾“å‡ºï¼š[5,4,3,2,1]
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/rev1ex2.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [1,2]
è¾“å‡ºï¼š[2,1]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šhead = []
è¾“å‡ºï¼š[]
```

**æç¤ºï¼š**

- é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ `[0, 5000]`
- `-5000 <= Node.val <= 5000`

 

**è¿›é˜¶ï¼š**é“¾è¡¨å¯ä»¥é€‰ç”¨è¿­ä»£æˆ–é€’å½’æ–¹å¼å®Œæˆåè½¬ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆ**

åŒæŒ‡é’ˆé€ä¸ªåè½¬nextæœå‘ï¼Œæ³¨æ„ï¼š

1. å¯ä»¥å€ŸåŠ©tempï¼Œè®©fastå‘å‰èµ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé¿å…åè½¬nextæœå‘åæ— æ³•ç»§ç»­å‘åéå†ï¼›
2. æ³¨æ„éœ€è¦æ”¹å˜ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘ï¼Œå¯ä»¥åœ¨whileä¸­ç‰¹æ®Šåˆ¤æ–­ï¼Œä¹Ÿå¯ä»¥åœ¨æœ€åç›´æ¥ç”¨headæŒ‡å®šï¼Œç„¶åè¿”å›slowä½œä¸ºæ–°çš„"head"èŠ‚ç‚¹ï¼›

```c++
class Solution {
public:
    ListNode* reverseList(ListNode* head) {
        // ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        if (head == nullptr) return nullptr;
        if (head->next == nullptr) return head;

        ListNode* slow = head;
        ListNode* fast = head->next;
        ListNode* temp;
        while (fast != nullptr) {
            temp = fast;
            fast = fast->next;
            temp->next = slow;
            slow = temp;
        }
        head->next = nullptr;  // è¦æ”¹å˜headæŒ‡å‘çš„èŠ‚ç‚¹çš„nextæŒ‡å‘ï¼Œå¦åˆ™å°±ä¼špoint1å’Œpoint2äº’æŒ‡é€ æˆå¾ªç¯ï¼›
        return slow;
    }
};
```

**æ–¹æ³•äºŒï¼šé€’å½’**

1. ä½¿ç”¨é€’å½’å‡½æ•°ï¼Œä¸€ç›´é€’å½’åˆ°é“¾è¡¨çš„æœ€åä¸€ä¸ªç»“ç‚¹ï¼Œè¯¥ç»“ç‚¹å°±æ˜¯åè½¬åçš„å¤´ç»“ç‚¹ï¼Œè®°ä½œ ret .
2. æ­¤åï¼Œæ¯æ¬¡å‡½æ•°åœ¨è¿”å›çš„è¿‡ç¨‹ä¸­ï¼Œè®©å½“å‰ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹ã€‚
3. åŒæ—¶è®©å½“å‰ç»“ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘ NULL ï¼Œä»è€Œå®ç°ä»é“¾è¡¨å°¾éƒ¨å¼€å§‹çš„å±€éƒ¨åè½¬
4. å½“é€’å½’å‡½æ•°å…¨éƒ¨å‡ºæ ˆåï¼Œé“¾è¡¨åè½¬å®Œæˆã€‚

 <img src="./assets/8951bc3b8b7eb4da2a46063c1bb96932e7a69910c0a93d973bd8aa5517e59fc8.gif" alt="img" style="zoom:60%;" />

```c++
class Solution {
public:
    ListNode* reverseList(ListNode* head) {
        if (head == nullptr || head->next == nullptr) {
            return head;
        }
        ListNode* ret = reverseList(head->next);
        head->next->next = head;
        head->next = nullptr;
        return ret;
    }
};
```

### [234. å›æ–‡é“¾è¡¨](https://leetcode.cn/problems/palindrome-linked-list/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œè¯·ä½ åˆ¤æ–­è¯¥é“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨ã€‚å¦‚æœæ˜¯ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/pal1linked-list.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [1,2,2,1]
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/pal2linked-list.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [1,2]
è¾“å‡ºï¼šfalse
```

**æç¤ºï¼š**

- é“¾è¡¨ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´`[1, 105]` å†…
- `0 <= Node.val <= 9`

**è¿›é˜¶ï¼š**ä½ èƒ½å¦ç”¨ `O(n)` æ—¶é—´å¤æ‚åº¦å’Œ `O(1)` ç©ºé—´å¤æ‚åº¦è§£å†³æ­¤é¢˜ï¼Ÿ

#### é¢˜è§£

å‚è€ƒé¢˜è§£ï¼š[O(1) ç©ºé—´åšæ³•ï¼šå¯»æ‰¾ä¸­é—´èŠ‚ç‚¹+åè½¬é“¾è¡¨](https://leetcode.cn/problems/palindrome-linked-list/solutions/2952645/o1-kong-jian-zuo-fa-xun-zhao-zhong-jian-rv0f3)

O(n)æ—¶é—´å¤æ‚åº¦ã€O(1)ç©ºé—´å¤æ‚åº¦è§£æ³•ï¼š

1. å…ˆéå†ä¸€æ¬¡é“¾è¡¨å¾—åˆ°é“¾è¡¨é•¿åº¦lenï¼ˆç›®çš„æ˜¯æ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´ä½ç½®ï¼‰ï¼›
2. åè½¬é“¾è¡¨ï¼Œä»0åˆ°midèŠ‚ç‚¹éƒ¨åˆ†çš„é“¾è¡¨ï¼Œæ¨å¯¼ä¸€ä¸‹å°±èƒ½çŸ¥é“éœ€è¦åè½¬(len - 1) / 2æ¬¡ï¼š

- å¦‚æœæœ‰å¥‡æ•°ä¸ªèŠ‚ç‚¹ï¼Œslowä¼šåˆšå¥½æŒ‡å‘midèŠ‚ç‚¹ï¼Œéœ€è¦å•ç‹¬nextä¸€æ¬¡æ‰èƒ½ä¸fastå¯¹é½ï¼›
- å¦‚æœæœ‰å¶æ•°ä¸ªèŠ‚ç‚¹ï¼Œåè½¬åçš„çŠ¶æ€å°±æ˜¯å¯¹é½çš„ï¼›

3. åŒæ—¶è®©fastå’Œslowå‰è¿›ï¼Œæ¯”è¾ƒé“¾è¡¨æ˜¯å¦å¯¹ç§°ï¼›

```c++
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode() : val(0), next(nullptr) {}
 *     ListNode(int x) : val(x), next(nullptr) {}
 *     ListNode(int x, ListNode *next) : val(x), next(next) {}
 * };
 */
class Solution {
public:
    bool isPalindrome(ListNode* head) {
        // 1 éå†ä¸€æ¬¡é“¾è¡¨ï¼Œå¾—åˆ°é“¾è¡¨é•¿åº¦
        int num = 0;
        ListNode* fast = head;
        while (fast != nullptr) {
            num++;
            fast = fast->next;
        }

        // 2 ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        ListNode* slow = head;
        fast = head->next;
        if (num == 1) {
            return true;
        } else if (num == 2) {
            if (slow->val == fast->val) return true;
            else return false;
        }

        // 3 åè½¬é“¾è¡¨(åè½¬0ï½midéƒ¨åˆ†)
        ListNode* temp;
        for (int i = 1; i <= (num - 1) / 2; i ++ ) {
            temp = fast;
            fast = fast->next;
            temp->next = slow;
            if (slow == head) {
                slow->next = nullptr;
            }
            slow = temp;
        }
        if (num % 2 == 1) {  // å¦‚æœæ˜¯å¥‡æ•°ï¼Œåè½¬åslowæŒ‡å‘midï¼Œéœ€è¦nextä¸€æ¬¡æ‰èƒ½ä¸fastå¯¹é½ï¼›
            slow = slow->next;
        }

        // 4 fastå’ŒslowåŒæ—¶å‰è¿›ï¼Œçœ‹æ˜¯å¦ä¸€è‡´
        while (fast != nullptr) {
            if (fast->val != slow->val) {
                return false;
            }
            fast = fast->next;
            slow = slow->next;
        }

        return true;
    }
};
```

### [141. ç¯å½¢é“¾è¡¨](https://leetcode.cn/problems/linked-list-cycle/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚

å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª `next` æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° `pos` æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚**æ³¨æ„ï¼š`pos` ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’** ã€‚ä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚

*å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯* ï¼Œåˆ™è¿”å› `true` ã€‚ å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/circularlinkedlist.png" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1
è¾“å‡ºï¼štrue
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/circularlinkedlist_test2.png" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [1,2], pos = 0
è¾“å‡ºï¼štrue
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

 <img src="./assets/circularlinkedlist_test3.png" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [1], pos = -1
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚
```

**æç¤ºï¼š**

- é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ `[0, 104]`
- `-105 <= Node.val <= 105`
- `pos` ä¸º `-1` æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ª **æœ‰æ•ˆç´¢å¼•** ã€‚

**è¿›é˜¶ï¼š**ä½ èƒ½ç”¨ `O(1)`ï¼ˆå³ï¼Œå¸¸é‡ï¼‰å†…å­˜è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ

#### é¢˜è§£

O(1)å†…å­˜æ–¹æ³•ï¼šå¿«æ…¢æŒ‡é’ˆ

1. å¼€å§‹fastå’Œslowéƒ½æŒ‡å‘headï¼›
2. fastæŒ‡é’ˆæ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œslowæ¯æ¬¡èµ°ä¸€æ­¥ï¼›
3. å¦‚æœfastä¸slowç›¸é‡ï¼Œåˆ™è¯´æ˜æœ‰ç¯ï¼Œreturn trueï¼›
4. å¦‚æœfastèµ°åˆ°äº†NULLï¼Œè¯´æ˜æ— ç¯ï¼Œreturn falseï¼›

```c++
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode(int x) : val(x), next(NULL) {}
 * };
 */
class Solution {
public:
    bool hasCycle(ListNode *head) {
        if (head == NULL || head->next == NULL) return false;
        ListNode* slow = head;
        ListNode* fast = head;
        while (fast != NULL && fast->next != NULL) {
            fast = fast->next->next;
            slow = slow->next;
            if (fast == slow) return true;
        }
        return false;
    }
};
```

### [142. ç¯å½¢é“¾è¡¨ II](https://leetcode.cn/problems/linked-list-cycle-ii/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹  `head` ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ *å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› `null`ã€‚*

å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª `next` æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° `pos` æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆ**ç´¢å¼•ä» 0 å¼€å§‹**ï¼‰ã€‚å¦‚æœ `pos` æ˜¯ `-1`ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚**æ³¨æ„ï¼š`pos` ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’**ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚

**ä¸å…è®¸ä¿®æ”¹** é“¾è¡¨ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/circularlinkedlist-20250326171341332.png" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1
è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/circularlinkedlist_test2-20250326171340900.png" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [1,2], pos = 0
è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 0 çš„é“¾è¡¨èŠ‚ç‚¹
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

 <img src="./assets/circularlinkedlist_test3-20250326171340938.png" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [1], pos = -1
è¾“å‡ºï¼šè¿”å› null
è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚
```

**æç¤ºï¼š**

- é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´åœ¨èŒƒå›´ `[0, 104]` å†…
- `-105 <= Node.val <= 105`
- `pos` çš„å€¼ä¸º `-1` æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ªæœ‰æ•ˆç´¢å¼•

**è¿›é˜¶ï¼š**ä½ æ˜¯å¦å¯ä»¥ä½¿ç”¨ `O(1)` ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ

#### é¢˜è§£

O(1)ç©ºé—´è§£æ³•ï¼š

1. å…ˆä½¿ç”¨ **å¿«æ…¢æŒ‡é’ˆ** æ‰¾åˆ°ç¯å†…çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼›
2. éå†ç¯ï¼ŒæŸ¥çœ‹ç¯å†…èŠ‚ç‚¹ä¸ªæ•°ï¼›
3. å°†fastæŒ‡å‘headå‘å‰numä¸ªèŠ‚ç‚¹ï¼ŒslowæŒ‡å‘headï¼Œç„¶ååŒæ—¶éå†ï¼Œæ­¤æ—¶fastä¸slowç›¸é‡çš„èŠ‚ç‚¹å°±æ˜¯ å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚

```c++
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode(int x) : val(x), next(NULL) {}
 * };
 */
class Solution {
public:
    ListNode *detectCycle(ListNode *head) {
        if (head == NULL || head->next == NULL) return NULL;
        // 1 æ‰¾åˆ°ç¯å†…çš„ä¸€ä¸ªèŠ‚ç‚¹
        ListNode* slow = head;
        ListNode* fast = head;
        while (true) {
            // å¦‚æœéå†åˆ°äº†NULLï¼Œè¯´æ˜æ— ç¯
            if (fast == NULL || fast->next == NULL) return NULL;

            fast = fast->next->next;
            slow = slow->next;
            if (fast == slow) break;  // æ­¤æ—¶æœ‰ç¯ï¼Œä¸”fastå’ŒslowæŒ‡å‘çš„æ˜¯åŒä¸€ç¯å†…èŠ‚ç‚¹
        }

        // 2 éå†ç¯ï¼ŒæŸ¥çœ‹ç¯å†…èŠ‚ç‚¹ä¸ªæ•°
        int num = 1;
        fast = fast->next;
        while (fast != slow) {
            fast = fast->next;
            num++;
        }

        // 3 å°†fastæŒ‡å‘headå‘å‰numä¸ªèŠ‚ç‚¹ï¼ŒslowæŒ‡å‘headï¼Œç„¶ååŒæ—¶éå†ï¼Œ
        // æ­¤æ—¶fastä¸slowç›¸é‡çš„èŠ‚ç‚¹å°±æ˜¯ å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚
        fast = head;
        while (num--) fast = fast->next;
        slow = head;
        while (fast != slow) {
            fast = fast->next;
            slow = slow->next;
        }

        return slow;
    }
};
```

### [21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨](https://leetcode.cn/problems/merge-two-sorted-lists/)

#### é¢˜ç›®æè¿°

å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ **å‡åº** é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚ 

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/merge_ex1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šl1 = [1,2,4], l2 = [1,3,4]
è¾“å‡ºï¼š[1,1,2,3,4,4]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šl1 = [], l2 = []
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šl1 = [], l2 = [0]
è¾“å‡ºï¼š[0]
```

**æç¤ºï¼š**

- ä¸¤ä¸ªé“¾è¡¨çš„èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯ `[0, 50]`
- `-100 <= Node.val <= 100`
- `l1` å’Œ `l2` å‡æŒ‰ **éé€’å‡é¡ºåº** æ’åˆ—

#### é¢˜è§£

æ ¸å¿ƒæ€æƒ³ï¼šdummyheadï¼ï¼ï¼ğŸŒŸ

1. åªéœ€è¦é¢å¤–æ·»åŠ ä¸€ä¸ªdummyheadï¼Œè¡¨ç¤ºèåˆåçš„ç”Ÿåºé“¾è¡¨çš„å¤´æŒ‡é’ˆï¼Œç„¶åæŒ‡å®šä¸€ä¸ªæŒ‡é’ˆtealæŒ‡å‘è¯¥é“¾è¡¨çš„æœ«å°¾ï¼›

2. while (l1 != nullptr && l2 != nullptr)éå†list1å’Œlist2:

- å¦‚æœ(l1->val <= l2->val)å°±å°†l1æ·»åŠ åˆ°æœ«å°¾ï¼›
- å¦‚æœ(l1->val >= l2->val)å°±å°†l2æ·»åŠ åˆ°æœ«å°¾ï¼›

3. æœ€åå¦‚æœé“¾è¡¨è¿˜æœ‰å‰©ä½™èŠ‚ç‚¹ï¼Œç›´æ¥åŠ åˆ°tealåé¢ï¼›

> dummyheadæ˜¯ç²¾é«“ï¼Œä¸è¦æƒ³ç€æŠŠå“ªä¸ªæ·»åŠ åˆ°å¦ä¸€ä¸ªä¸Šé¢ï¼Œç”¨dummyheadåªéœ€è¦O(1)çš„é¢å¤–ç©ºé—´å°±èƒ½è½»æ¾è§£å†³ã€‚

```c++
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode() : val(0), next(nullptr) {}
 *     ListNode(int x) : val(x), next(nullptr) {}
 *     ListNode(int x, ListNode *next) : val(x), next(next) {}
 * };
 */
class Solution {
public:
    ListNode* mergeTwoLists(ListNode* list1, ListNode* list2) {
        ListNode* l1 = list1;
        ListNode* l2 = list2;
        
        ListNode dummyHead(-1);  // å“‘èŠ‚ç‚¹
        ListNode* teal = &dummyHead;

        while (l1 != nullptr && l2 != nullptr) {
            if (l1->val <= l2->val) {
                teal->next = l1;
                l1 = l1->next;
                teal = teal->next;
            } else {
                teal->next = l2;
                l2 = l2->next;
                teal = teal->next;
            }
        }

        if (l1 != nullptr) teal->next = l1;
        if (l2 != nullptr) teal->next = l2;

        return dummyHead.next;
    }
};
```

### [2. ä¸¤æ•°ç›¸åŠ ](https://leetcode.cn/problems/add-two-numbers/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸¤ä¸ª **éç©º** çš„é“¾è¡¨ï¼Œè¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å®ƒä»¬æ¯ä½æ•°å­—éƒ½æ˜¯æŒ‰ç…§ **é€†åº** çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ **ä¸€ä½** æ•°å­—ã€‚

è¯·ä½ å°†ä¸¤ä¸ªæ•°ç›¸åŠ ï¼Œå¹¶ä»¥ç›¸åŒå½¢å¼è¿”å›ä¸€ä¸ªè¡¨ç¤ºå’Œçš„é“¾è¡¨ã€‚

ä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/addtwonumber1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šl1 = [2,4,3], l2 = [5,6,4]
è¾“å‡ºï¼š[7,0,8]
è§£é‡Šï¼š342 + 465 = 807.
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šl1 = [0], l2 = [0]
è¾“å‡ºï¼š[0]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šl1 = [9,9,9,9,9,9,9], l2 = [9,9,9,9]
è¾“å‡ºï¼š[8,9,9,9,0,0,0,1]
```

**æç¤ºï¼š**

- æ¯ä¸ªé“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°åœ¨èŒƒå›´ `[1, 100]` å†…
- `0 <= Node.val <= 9`
- é¢˜ç›®æ•°æ®ä¿è¯åˆ—è¡¨è¡¨ç¤ºçš„æ•°å­—ä¸å«å‰å¯¼é›¶

#### é¢˜è§£

> è¯¥é¢˜ç›®ä¸ç”¨è€ƒè™‘ç©ºé—´é—®é¢˜ï¼Œå¯ä»¥å®Œå…¨æ–°å»ºä¸€ä¸ªé“¾è¡¨ï¼Œæ¨¡æ‹Ÿè¿›ä½æ±‚å’Œå³å¯ã€‚

æ¨¡æ‹Ÿè¿›ä½æ±‚å’Œï¼Œå…³é”®åœ¨äº æƒ³æ¸…æ¥šæ¯ä¸€æ­¥çš„åšæ³•ï¼š

1. ä»list1å’Œlist2ä¸­å„å–ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¦‚æœå·²ç»éå†åˆ°äº†ç»“å°¾nullptrå°±å–0ï¼‰ï¼›
2. è®¡ç®—å½“å‰èŠ‚ç‚¹çš„å’Œï¼ˆæ³¨æ„ç´¯åŠ è¿›ä½ï¼‰ï¼›
3. è¿½åŠ èŠ‚ç‚¹ï¼š

- å¦‚æœæ±‚å’Œé“¾è¡¨ä¸ºç©ºï¼Œåˆ™éœ€è¦å°†headå’Œtealéƒ½æŒ‡å‘æ–°èŠ‚ç‚¹ï¼›
- å¦‚æœæ±‚å’Œé“¾è¡¨ä¸ä¸ºç©ºï¼Œåˆ™è¿½åŠ æ–°èŠ‚ç‚¹åˆ°tealæœ«å°¾ï¼›

4. è®¡ç®—å½“å‰æ˜¯å¦æœ‰è¿›ä½ï¼Œl1å’Œl2ä¸¤ä¸ªé“¾è¡¨æŒ‡é’ˆé€’è¿›ï¼›

5. æ³¨æ„ï¼Œå¾ªç¯ç´¯åŠ ç»“æŸåï¼Œè¿˜éœ€è¦åˆ¤æ–­æ˜¯å¦è¿˜å¸¦æœ‰è¿›ä½ï¼Œå¦‚æœæœ‰è¿›ä½åˆ™éœ€è¦è¿½åŠ åˆ°tealæœ«å°¾ï¼›

```c++
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode() : val(0), next(nullptr) {}
 *     ListNode(int x) : val(x), next(nullptr) {}
 *     ListNode(int x, ListNode *next) : val(x), next(next) {}
 * };
 */
class Solution {
public:
    ListNode* addTwoNumbers(ListNode* l1, ListNode* l2) {
        ListNode *head = nullptr, *tail = nullptr;
        int carry = 0;  // è¿›ä½
        while (l1 || l2) {
            int n1 = l1 ? l1->val : 0;
            int n2 = l2 ? l2->val : 0;
            int sum = n1 + n2 + carry;
            if (!head) {
                head = tail = new ListNode(sum % 10);
            } else {
                tail->next = new ListNode(sum % 10);
                tail = tail->next;
            }
            carry = sum / 10;
            if (l1) l1 = l1 -> next;
            if (l2) l2 = l2 -> next;
        }
        if (carry > 0) {
            tail->next = new ListNode(carry);
        }
        return head;
    }
};
```

### [19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹](https://leetcode.cn/problems/remove-nth-node-from-end-of-list/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ `n` ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/remove_ex1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [1,2,3,4,5], n = 2
è¾“å‡ºï¼š[1,2,3,5]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šhead = [1], n = 1
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šhead = [1,2], n = 1
è¾“å‡ºï¼š[1]
```

**æç¤ºï¼š**

- é“¾è¡¨ä¸­ç»“ç‚¹çš„æ•°ç›®ä¸º `sz`
- `1 <= sz <= 30`
- `0 <= Node.val <= 100`
- `1 <= n <= sz`

 

**è¿›é˜¶ï¼š**ä½ èƒ½å°è¯•ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ

#### é¢˜è§£

`ä¸€è¶Ÿæ‰«æå®ç°`é¢˜è§£ï¼š

1. å»ºç«‹dummyHeadå¹¶æŒ‡å‘headèŠ‚ç‚¹ğŸŒŸï¼›ï¼ˆæœ‰dummyheadä¸»è¦æ˜¯é˜²æ­¢åˆ é™¤headæŒ‡å‘çš„èŠ‚ç‚¹ï¼Œç”šè‡³éƒ½ä¸éœ€è¦ç‰¹æ®Šæƒ…å†µåˆ¤æ–­äº†ï¼‰
2. è®¾ç½®fastå’Œslowä¸¤ä¸ªæŒ‡é’ˆï¼Œè®©fastå…ˆèµ°nä¸ªèŠ‚ç‚¹ï¼›
3. fastå’ŒslowåŒæ—¶å‰è¿›ï¼Œå½“fastæŒ‡å‘æœ€åä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œslowçš„nextèŠ‚ç‚¹å°±æ˜¯éœ€è¦åˆ é™¤çš„ï¼›
4. åˆ é™¤slow->nextè¿™ä¸ªèŠ‚ç‚¹ï¼Œæœ€ç»ˆè¿”å›dummyHead.nextï¼›

```c++
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode() : val(0), next(nullptr) {}
 *     ListNode(int x) : val(x), next(nullptr) {}
 *     ListNode(int x, ListNode *next) : val(x), next(next) {}
 * };
 */
class Solution {
public:
    ListNode* removeNthFromEnd(ListNode* head, int n) {
        // // ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        // if (head->next == nullptr) return nullptr;

        // æœ‰dummyheadä¸»è¦æ˜¯é˜²æ­¢åˆ é™¤headæŒ‡å‘çš„èŠ‚ç‚¹ï¼Œç”šè‡³éƒ½ä¸éœ€è¦ç‰¹æ®Šæƒ…å†µåˆ¤æ–­äº†
        ListNode dummyHead(-1, head);
        ListNode *fast = &dummyHead, *slow = &dummyHead;
        // fastå‰è¿›nä¸ªèŠ‚ç‚¹
        while (n--) {
            fast = fast->next;
        }
        // fastå’ŒslowåŒæ—¶å‰è¿›ï¼Œå½“fastæŒ‡å‘æœ€åä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œslowçš„nextèŠ‚ç‚¹å°±æ˜¯éœ€è¦åˆ é™¤çš„
        while (fast->next != nullptr) {
            // cout << fast->val << " " << slow->val << endl;
            fast = fast->next;
            slow = slow->next;
        }

        fast = slow->next;
        slow->next = slow->next->next;
        delete fast;
        
        return dummyHead.next;
    }
};
```

### [24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹](https://leetcode.cn/problems/swap-nodes-in-pairs/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚ä½ å¿…é¡»åœ¨ä¸ä¿®æ”¹èŠ‚ç‚¹å†…éƒ¨çš„å€¼çš„æƒ…å†µä¸‹å®Œæˆæœ¬é¢˜ï¼ˆå³ï¼Œåªèƒ½è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ï¼‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/swap_ex1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [1,2,3,4]
è¾“å‡ºï¼š[2,1,4,3]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šhead = []
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šhead = [1]
è¾“å‡ºï¼š[1]
```

**æç¤ºï¼š**

- é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´ `[0, 100]` å†…
- `0 <= Node.val <= 100`

#### é¢˜è§£

å°±æ˜¯é€ä¸ªäº¤æ¢é“¾è¡¨æŒ‡é’ˆæŒ‡å‘ï¼Œå…³é”®ç‚¹åœ¨äºåªä½¿ç”¨curå’ŒtempæŒ‡é’ˆï¼Œç„¶åæœ€ç»ˆcurç§»åŠ¨åˆ°tempçš„ä½ç½®ä¸Šï¼ˆè¿™æ ·æ‰èƒ½ä¿è¯æ¯ä¸ªwhileä¸­æ¯æ¬¡çš„é€»è¾‘æ˜¯ä¸€è‡´çš„ï¼‰ï¼š

> å…³é”®ç‚¹åœ¨äºcuræŒ‡å‘â€œéœ€è¦äº¤æ¢çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹å‰çš„èŠ‚ç‚¹â€âœ…
>
> å¦‚æœä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªéœ€è¦äº¤æ¢çš„èŠ‚ç‚¹ï¼Œå¾ˆå®¹æ˜“é€»è¾‘é”™è¯¯âŒ

```c++
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode() : val(0), next(nullptr) {}
 *     ListNode(int x) : val(x), next(nullptr) {}
 *     ListNode(int x, ListNode *next) : val(x), next(next) {}
 * };
 */
class Solution {
public:
    ListNode* swapPairs(ListNode* head) {
        ListNode dummyHead(-1, head);
        ListNode *cur = &dummyHead, *temp;
        while (cur->next != nullptr && cur->next->next != nullptr) {
            temp = cur->next;
            cur->next = temp->next;
            temp->next = cur->next->next;
            cur->next->next = temp;

            cur = temp;
        }

        return dummyHead.next;
    }
};
```

### [25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨](https://leetcode.cn/problems/reverse-nodes-in-k-group/)

#### é¢˜ç›®æè¿°

ç»™ä½ é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œæ¯ `k` ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ä¿®æ”¹åçš„é“¾è¡¨ã€‚

`k` æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ `k` çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚

ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/reverse_ex1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [1,2,3,4,5], k = 2
è¾“å‡ºï¼š[2,1,4,3,5]
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/reverse_ex2.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [1,2,3,4,5], k = 3
è¾“å‡ºï¼š[3,2,1,4,5]
```

**æç¤ºï¼š**

- é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°ç›®ä¸º `n`
- `1 <= k <= n <= 5000`
- `0 <= Node.val <= 1000`

**è¿›é˜¶ï¼š**ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªåªç”¨ `O(1)` é¢å¤–å†…å­˜ç©ºé—´çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ

#### é¢˜è§£

 `O(1)` é¢å¤–å†…å­˜ç©ºé—´é¢˜è§£ï¼š

> ç›¸å½“äºåšpoint_cnt / kæ¬¡ï¼Œä»¥kä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„çš„ç¿»è½¬é“¾è¡¨ï¼Œæ‰€ä»¥æœ¬è´¨è¿˜æ˜¯**ç¿»è½¬é“¾è¡¨**ï¼ï¼

1. éå†ä¸€éé“¾è¡¨ï¼Œç»Ÿè®¡èŠ‚ç‚¹ä¸ªæ•°ï¼›
2. åšfor (;cnt >= k; cnt -= k)æ¬¡ç¿»è½¬é“¾è¡¨ï¼›
3. æ¯ç»„å½“ä¸­ä»¥kä¸ªä¸ºä¸€ç»„éœ€è¦ç¿»k-1æ¬¡æœå‘ï¼›

> æ³¨æ„ï¼šè€ƒè™‘æ¸…æ¥šæ¯æ¬¡startã€endã€tempæŒ‡å‘çš„èŠ‚ç‚¹å’Œå˜æ¢é€»è¾‘ã€‚

```c++
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode() : val(0), next(nullptr) {}
 *     ListNode(int x) : val(x), next(nullptr) {}
 *     ListNode(int x, ListNode *next) : val(x), next(next) {}
 * };
 */
class Solution {
public:
    ListNode* reverseKGroup(ListNode* head, int k) {
        ListNode dummyHead(-1, head);
        ListNode *cur = &dummyHead;
        // startæŒ‡å‘åè½¬çš„ä¸€å¯¹çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒendæŒ‡å‘åè½¬ä¸€å¯¹çš„åä¸€ä¸ªèŠ‚ç‚¹
        ListNode *start = cur->next, *end, *temp;

        // 1 å…ˆç»Ÿè®¡èŠ‚ç‚¹ä¸ªæ•°
        int cnt = 0;
        while (start != nullptr) {
            cnt++;
            start = start->next;
        }
        start = cur->next;

        for (;cnt >= k; cnt -= k) {
            start = cur->next;
            end = start->next; 
            for (int i = 1; i <= k - 1; i ++ ) {  // kä¸ªä¸€ç»„ï¼Œéœ€è¦åè½¬k-1æ¬¡
                temp = end->next;
                // printf("%d %d %d\n", start->val, end->val, temp->val);
                end->next = start;
                start = end;
                end = temp;
            }

            temp = cur->next;
            temp->next = end;
            cur->next = start;
            cur = temp;
        }

        return dummyHead.next;
    }
};
```

### [138. éšæœºé“¾è¡¨çš„å¤åˆ¶](https://leetcode.cn/problems/copy-list-with-random-pointer/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªé¢å¤–å¢åŠ çš„éšæœºæŒ‡é’ˆ `random` ï¼Œè¯¥æŒ‡é’ˆå¯ä»¥æŒ‡å‘é“¾è¡¨ä¸­çš„ä»»ä½•èŠ‚ç‚¹æˆ–ç©ºèŠ‚ç‚¹ã€‚

æ„é€ è¿™ä¸ªé“¾è¡¨çš„ **[æ·±æ‹·è´](https://baike.baidu.com/item/æ·±æ‹·è´/22785317?fr=aladdin)**ã€‚ æ·±æ‹·è´åº”è¯¥æ­£å¥½ç”± `n` ä¸ª **å…¨æ–°** èŠ‚ç‚¹ç»„æˆï¼Œå…¶ä¸­æ¯ä¸ªæ–°èŠ‚ç‚¹çš„å€¼éƒ½è®¾ä¸ºå…¶å¯¹åº”çš„åŸèŠ‚ç‚¹çš„å€¼ã€‚æ–°èŠ‚ç‚¹çš„ `next` æŒ‡é’ˆå’Œ `random` æŒ‡é’ˆä¹Ÿéƒ½åº”æŒ‡å‘å¤åˆ¶é“¾è¡¨ä¸­çš„æ–°èŠ‚ç‚¹ï¼Œå¹¶ä½¿åŸé“¾è¡¨å’Œå¤åˆ¶é“¾è¡¨ä¸­çš„è¿™äº›æŒ‡é’ˆèƒ½å¤Ÿè¡¨ç¤ºç›¸åŒçš„é“¾è¡¨çŠ¶æ€ã€‚**å¤åˆ¶é“¾è¡¨ä¸­çš„æŒ‡é’ˆéƒ½ä¸åº”æŒ‡å‘åŸé“¾è¡¨ä¸­çš„èŠ‚ç‚¹** ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœåŸé“¾è¡¨ä¸­æœ‰ `X` å’Œ `Y` ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­ `X.random --> Y` ã€‚é‚£ä¹ˆåœ¨å¤åˆ¶é“¾è¡¨ä¸­å¯¹åº”çš„ä¸¤ä¸ªèŠ‚ç‚¹ `x` å’Œ `y` ï¼ŒåŒæ ·æœ‰ `x.random --> y` ã€‚

è¿”å›å¤åˆ¶é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚

ç”¨ä¸€ä¸ªç”± `n` ä¸ªèŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨æ¥è¡¨ç¤ºè¾“å…¥/è¾“å‡ºä¸­çš„é“¾è¡¨ã€‚æ¯ä¸ªèŠ‚ç‚¹ç”¨ä¸€ä¸ª `[val, random_index]` è¡¨ç¤ºï¼š

- `val`ï¼šä¸€ä¸ªè¡¨ç¤º `Node.val` çš„æ•´æ•°ã€‚
- `random_index`ï¼šéšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ç´¢å¼•ï¼ˆèŒƒå›´ä» `0` åˆ° `n-1`ï¼‰ï¼›å¦‚æœä¸æŒ‡å‘ä»»ä½•èŠ‚ç‚¹ï¼Œåˆ™ä¸º `null` ã€‚

ä½ çš„ä»£ç  **åª** æ¥å—åŸé“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ä½œä¸ºä¼ å…¥å‚æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

![img](./assets/e1.png)

```
è¾“å…¥ï¼šhead = [[7,null],[13,0],[11,4],[10,2],[1,0]]
è¾“å‡ºï¼š[[7,null],[13,0],[11,4],[10,2],[1,0]]
```

**ç¤ºä¾‹ 2ï¼š**

![img](./assets/e2.png)

```
è¾“å…¥ï¼šhead = [[1,1],[2,1]]
è¾“å‡ºï¼š[[1,1],[2,1]]
```

**ç¤ºä¾‹ 3ï¼š**

**![img](./assets/e3.png)**

```
è¾“å…¥ï¼šhead = [[3,null],[3,0],[3,null]]
è¾“å‡ºï¼š[[3,null],[3,0],[3,null]]
```

**æç¤ºï¼š**

- `0 <= n <= 1000`
- `-104 <= Node.val <= 104`
- `Node.random` ä¸º `null` æˆ–æŒ‡å‘é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚

#### é¢˜è§£ï¼ˆéå“ˆå¸Œè¡¨ï¼Œäº¤é”™é“¾è¡¨æ³•ï¼‰

> éš¾ç‚¹åˆ†æï¼šéš¾ç‚¹ä¸»è¦åœ¨äºé“¾è¡¨ç»“æ„æœ¬èº«ï¼Œæ¯”è¾ƒç®€å•çš„æ€è€ƒå°±æ˜¯ç°å°†nextè¿™ä¸€æ¡é“¾è·¯å»ºç«‹ï¼Œç„¶åå†éå†ä¸€éæ¥æŒ‡å‡ºrandomçš„æŒ‡å‘ã€‚
>
> ä½†æ˜¯è¿™æ ·åšæ˜¯é”™çš„âŒï¼ŒåŸå› åœ¨äºé“¾è¡¨ä¸èƒ½ä»»æ„æ‰¾åˆ°èŠ‚ç‚¹ä½ç½®ï¼Œè¿™æ˜¯æœ€å¤§çš„é—®é¢˜ï¼›

æˆ‘ä»¬å¯ä»¥æŠŠæ–°é“¾è¡¨å’Œæ—§é“¾è¡¨ã€Œæ··åœ¨ä¸€èµ·ã€ã€‚

ä¾‹å¦‚é“¾è¡¨ 1â†’2â†’3ï¼Œä¾æ¬¡å¤åˆ¶æ¯ä¸ªèŠ‚ç‚¹ï¼ˆåˆ›å»ºæ–°èŠ‚ç‚¹å¹¶å¤åˆ¶ val å’Œ nextï¼‰ï¼ŒæŠŠæ–°èŠ‚ç‚¹ç›´æ¥æ’åˆ°åŸèŠ‚ç‚¹çš„åé¢ï¼Œå½¢æˆä¸€ä¸ªäº¤é”™é“¾è¡¨ï¼š

 <img src="./assets/image-20250328105543610.png" alt="image-20250328105543610" style="zoom:50%;" />

å¦‚æ­¤ä¸€æ¥ï¼ŒåŸé“¾è¡¨èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±æ˜¯å…¶å¯¹åº”çš„æ–°é“¾è¡¨èŠ‚ç‚¹äº†ï¼

ç„¶åéå†è¿™ä¸ªäº¤é”™é“¾è¡¨ï¼Œå‡å¦‚èŠ‚ç‚¹ 1 çš„ random æŒ‡å‘èŠ‚ç‚¹ 3ï¼Œé‚£ä¹ˆå°±æŠŠèŠ‚ç‚¹ 1' çš„ random æŒ‡å‘èŠ‚ç‚¹ 3 çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ 3â€² ï¼Œè¿™æ ·å°±å®Œæˆäº†å¯¹ random æŒ‡é’ˆçš„å¤åˆ¶ã€‚

æœ€åï¼Œä»äº¤é”™é“¾è¡¨é“¾è¡¨ä¸­åˆ†ç¦»å‡º <img src="./assets/image-20250328105637150.png" alt="image-20250328105637150" style="zoom:50%;" />ï¼Œå³ä¸ºæ·±æ‹·è´åçš„é“¾è¡¨ã€‚åšæ³•ç±»ä¼¼ 328. å¥‡å¶é“¾è¡¨ã€‚

âš æ³¨æ„ï¼šæœ€åè¦å°†åŸé“¾è¡¨è¿˜åŸï¼Œå› ä¸ºé¢˜ç›®è¦æ±‚åŸé“¾è¡¨çš„ next ä¸èƒ½ä¿®æ”¹ã€‚ï¼ˆä½† Python å¯ä»¥è¿™ä¹ˆåšï¼‰

```c++
/*
// Definition for a Node.
class Node {
public:
    int val;
    Node* next;
    Node* random;
    
    Node(int _val) {
        val = _val;
        next = NULL;
        random = NULL;
    }
};
*/

class Solution {
public:
    Node* copyRandomList(Node* head) {
        if (head == nullptr) {
            return nullptr;
        }

        // å¤åˆ¶æ¯ä¸ªèŠ‚ç‚¹ï¼ŒæŠŠæ–°èŠ‚ç‚¹ç›´æ¥æ’åˆ°åŸèŠ‚ç‚¹çš„åé¢
        for (Node* cur = head; cur; cur = cur->next->next) {
            cur->next = new Node(cur->val, cur->next, nullptr);
        }

        // éå†äº¤é”™é“¾è¡¨ä¸­çš„åŸé“¾è¡¨èŠ‚ç‚¹
        for (Node* cur = head; cur; cur = cur->next->next) {
            if (cur->random) {
                // è¦å¤åˆ¶çš„ random æ˜¯ cur->random çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
                cur->next->random = cur->random->next;
            }
        }

        // æŠŠäº¤é”™é“¾è¡¨åˆ†ç¦»æˆä¸¤ä¸ªé“¾è¡¨
        Node* new_head = head->next;
        Node* cur = head;
        for (; cur->next->next; cur = cur->next) {
            Node* copy = cur->next;
            cur->next = copy->next; // æ¢å¤åŸèŠ‚ç‚¹çš„ next
            copy->next = copy->next->next; // è®¾ç½®æ–°èŠ‚ç‚¹çš„ next
        }
        cur->next = nullptr; // æ¢å¤åŸèŠ‚ç‚¹çš„ next
        return new_head;
    }
};
```

### [148. æ’åºé“¾è¡¨](https://leetcode.cn/problems/sort-list/)

#### é¢˜ç›®æè¿°

ç»™ä½ é“¾è¡¨çš„å¤´ç»“ç‚¹ `head` ï¼Œè¯·å°†å…¶æŒ‰ **å‡åº** æ’åˆ—å¹¶è¿”å› **æ’åºåçš„é“¾è¡¨** ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/sort_list_1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [4,2,1,3]
è¾“å‡ºï¼š[1,2,3,4]
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/sort_list_2.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šhead = [-1,5,3,4,0]
è¾“å‡ºï¼š[-1,0,3,4,5]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šhead = []
è¾“å‡ºï¼š[]
```

**æç¤ºï¼š**

- é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´ `[0, 5 * 104]` å†…
- `-105 <= Node.val <= 105`

**è¿›é˜¶ï¼š**ä½ å¯ä»¥åœ¨ `O(n log n)` æ—¶é—´å¤æ‚åº¦å’Œå¸¸æ•°çº§ç©ºé—´å¤æ‚åº¦ä¸‹ï¼Œå¯¹é“¾è¡¨è¿›è¡Œæ’åºå—ï¼Ÿ

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šå½’å¹¶æ’åºï¼ˆåˆ†æ²»ï¼‰**

> æ—¶é—´å¤æ‚åº¦`O(nlogn)`ï¼Œç©ºé—´å¤æ‚åº¦`O(logn)`
>
> å¹¶éæœ€ä¼˜ï¼Œæœ€ä¼˜æ–¹æ³•â€œè¿­ä»£å½’å¹¶æ’åºâ€æ˜¯å¸¸æ•°ç©ºé—´å¤æ‚åº¦ï¼Œè§çµèŒ¶å±±è‰¾åºœé¢˜è§£ã€‚

1. åˆ¤æ–­æ˜¯å¦ä¸ºç©ºæˆ–å•èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›headï¼›
2. æ‰¾åˆ°ä¸­é—´èŠ‚ç‚¹head2ï¼Œå¹¶æ–­å¼€head2ä¸å‰ä¸€ä¸ªèŠ‚ç‚¹çš„è¿æ¥ï¼›ï¼ˆå¯¹åº” [876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹](https://leetcode.cn/problems/middle-of-the-linked-list/)ï¼‰
3. åˆ†æ²»ï¼Œé€’å½’è°ƒç”¨ sortListï¼Œåˆ†åˆ«æ’åº *head*ï¼ˆåªæœ‰å‰ä¸€åŠï¼‰å’Œ *head*2ã€‚
4. åˆå¹¶ä¸¤ä¸ªæ’åºåçš„é“¾è¡¨ï¼›ï¼ˆå¯¹åº” [21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨](https://leetcode.cn/problems/merge-two-sorted-lists/)ï¼‰

```c++
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode() : val(0), next(nullptr) {}
 *     ListNode(int x) : val(x), next(nullptr) {}
 *     ListNode(int x, ListNode *next) : val(x), next(next) {}
 * };
 */
class Solution {
private:
    // 876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰
    ListNode* middleNode(ListNode* head){
        ListNode *pre=head;  // æŒ‡å‘ä¸­é—´èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹
        ListNode *slow=head;  // æŒ‡å‘ä¸­é—´èŠ‚ç‚¹ï¼ˆå¥‡æ•°ï¼‰/å³è¾¹ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¶æ•°ï¼‰
        ListNode *fast=head;  // æŒ‡å‘æœ€ç»ˆèŠ‚ç‚¹
        while (fast && fast->next) {
            pre = slow;
            slow = slow->next;
            fast = fast->next->next;
        }
        pre->next = nullptr;  // å°†headåˆ‡åˆ†ä¸ºä¸¤æ®µ
        return slow;
    }

    // 21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ï¼ˆåŒæŒ‡é’ˆï¼‰
    ListNode *mergeTwoLists(ListNode *head, ListNode *head2) {
        ListNode dummyHead(-1);
        ListNode *cur = &dummyHead;
        while (head && head2) {
            if (head->val <= head2->val) {
                cur->next = head;
                head = head->next;
            } else {
                cur->next = head2;
                head2 = head2->next;
            }
            cur = cur->next;
        }
        cur->next = head? head : head2;

        return dummyHead.next;
    }

public:
    ListNode* sortList(ListNode* head) {
        // å¦‚æœé“¾è¡¨ä¸ºç©ºæˆ–è€…åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ— éœ€æ’åº
        if (head == nullptr || head->next == nullptr) return head;

        // æ‰¾åˆ°ä¸­é—´èŠ‚ç‚¹ head2ï¼Œå¹¶æ–­å¼€ head2 ä¸å…¶å‰ä¸€ä¸ªèŠ‚ç‚¹çš„è¿æ¥
        // æ¯”å¦‚ head=[4,2,1,3]ï¼Œé‚£ä¹ˆ middleNode è°ƒç”¨ç»“æŸå head=[4,2] head2=[1,3]
        ListNode *head2 = middleNode(head);

        // åˆ†æ²»ï¼Œheadå’Œhead2åˆ†åˆ«æŒ‡å‘çš„æ˜¯ä¸¤ä¸ªæœ‰åºé“¾è¡¨
        head = sortList(head);
        head2 = sortList(head2);

        // åˆå¹¶
        return mergeTwoLists(head, head2);
    }
};
```

### [23. åˆå¹¶ K ä¸ªå‡åºé“¾è¡¨](https://leetcode.cn/problems/merge-k-sorted-lists/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªé“¾è¡¨æ•°ç»„ï¼Œæ¯ä¸ªé“¾è¡¨éƒ½å·²ç»æŒ‰å‡åºæ’åˆ—ã€‚

è¯·ä½ å°†æ‰€æœ‰é“¾è¡¨åˆå¹¶åˆ°ä¸€ä¸ªå‡åºé“¾è¡¨ä¸­ï¼Œè¿”å›åˆå¹¶åçš„é“¾è¡¨ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šlists = [[1,4,5],[1,3,4],[2,6]]
è¾“å‡ºï¼š[1,1,2,3,4,4,5,6]
è§£é‡Šï¼šé“¾è¡¨æ•°ç»„å¦‚ä¸‹ï¼š
[
  1->4->5,
  1->3->4,
  2->6
]
å°†å®ƒä»¬åˆå¹¶åˆ°ä¸€ä¸ªæœ‰åºé“¾è¡¨ä¸­å¾—åˆ°ã€‚
1->1->2->3->4->4->5->6
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šlists = []
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šlists = [[]]
è¾“å‡ºï¼š[]
```

**æç¤ºï¼š**

- `k == lists.length`
- `0 <= k <= 10^4`
- `0 <= lists[i].length <= 500`
- `-10^4 <= lists[i][j] <= 10^4`
- `lists[i]` æŒ‰ **å‡åº** æ’åˆ—
- `lists[i].length` çš„æ€»å’Œä¸è¶…è¿‡ `10^4`

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šåˆ†æ²»æ³•**

> æ—¶é—´å¤æ‚åº¦ï¼šO(nlogk)ï¼Œå…¶ä¸­ k ä¸º lists çš„é•¿åº¦ï¼Œn ä¸ºæ‰€æœ‰é“¾è¡¨çš„èŠ‚ç‚¹æ•°ä¹‹å’Œã€‚æ¯ä¸ªèŠ‚ç‚¹å‚ä¸é“¾è¡¨åˆå¹¶çš„æ¬¡æ•°ä¸º O(logk) æ¬¡ï¼Œä¸€å…±æœ‰ n ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º O(nlogk)ã€‚
>
> ç©ºé—´å¤æ‚åº¦ï¼šO(logk)ã€‚é€’å½’æ·±åº¦ä¸º O(logk)ï¼Œéœ€è¦ç”¨åˆ° O(logk) çš„æ ˆç©ºé—´ã€‚Python å¿½ç•¥åˆ‡ç‰‡äº§ç”Ÿçš„é¢å¤–ç©ºé—´ã€‚

æ ¸å¿ƒæ€æƒ³ä¸ºï¼š**åˆ†æ²»æ³•**ï¼Œè·Ÿâ€œ148.æ’åºé“¾è¡¨â€ä¸€æ ·ï¼Œå…ˆæŠŠé“¾è¡¨vectoræ‹†æˆå•ä¸ªçš„æœ‰åºé“¾è¡¨ï¼Œç„¶åä¸¤ä¸¤åˆå¹¶ã€‚

> è¯¥é¢˜ç›®çš„æ ¸å¿ƒåœ¨äºï¼šâ€œ148.æ’åºé“¾è¡¨â€æ˜¯åˆ†æ²»æ³•æ’åºèŠ‚ç‚¹ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªå•ä½ï¼›è¿™ä¸ªé¢˜æ˜¯åˆ†æ²»æ³•æ’åºé“¾è¡¨ï¼Œæ¯ä¸€ä¸ªé“¾è¡¨æ˜¯ä¸€ä¸ªå•ä½ã€‚

ä¸€ä¸ªå·§å¦™çš„æ€è·¯æ˜¯ï¼ŒæŠŠ lists ä¸€åˆ†ä¸ºäºŒï¼ˆå°½é‡å‡åˆ†ï¼‰ï¼Œå…ˆåˆå¹¶å‰ä¸€åŠçš„é“¾è¡¨ï¼Œå†åˆå¹¶åä¸€åŠçš„é“¾è¡¨ï¼Œç„¶åæŠŠè¿™ä¸¤ä¸ªé“¾è¡¨åˆå¹¶æˆæœ€ç»ˆçš„é“¾è¡¨ã€‚å¦‚ä½•åˆå¹¶å‰ä¸€åŠçš„é“¾è¡¨å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç»§ç»­ä¸€åˆ†ä¸ºäºŒã€‚å¦‚æ­¤åˆ†ä¸‹å»ç›´åˆ°åªæœ‰ä¸€ä¸ªé“¾è¡¨ï¼Œæ­¤æ—¶æ— éœ€åˆå¹¶ã€‚

æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªé€’å½’æ¥å®Œæˆä¸Šè¿°é€»è¾‘ã€‚

æŒ‰ç…§ä¸€åˆ†ä¸ºäºŒå†åˆå¹¶çš„é€»è¾‘ï¼Œé€’å½’åƒæ˜¯åœ¨ååºéå†ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚ç”±äºå¹³è¡¡æ ‘çš„é«˜åº¦æ˜¯ O(logk)ï¼Œæ‰€ä»¥æ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹åªä¼šå‡ºç°åœ¨ O(logk) æ¬¡åˆå¹¶ä¸­ï¼è¿™æ ·å°±åšåˆ°äº†æ›´å¿«çš„ O(nlogk) æ—¶é—´ã€‚

```c++
class Solution {
    // 21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨
    ListNode* mergeTwoLists(ListNode* list1, ListNode* list2) {
        ListNode dummy{}; // ç”¨å“¨å…µèŠ‚ç‚¹ç®€åŒ–ä»£ç é€»è¾‘
        auto cur = &dummy; // cur æŒ‡å‘æ–°é“¾è¡¨çš„æœ«å°¾
        while (list1 && list2) {
            if (list1->val < list2->val) {
                cur->next = list1; // æŠŠ list1 åŠ åˆ°æ–°é“¾è¡¨ä¸­
                list1 = list1->next;
            } else { // æ³¨ï¼šç›¸ç­‰çš„æƒ…å†µåŠ å“ªä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¯ä»¥çš„
                cur->next = list2; // æŠŠ list2 åŠ åˆ°æ–°é“¾è¡¨ä¸­
                list2 = list2->next;
            }
            cur = cur->next;
        }
        cur->next = list1 ? list1 : list2; // æ‹¼æ¥å‰©ä½™é“¾è¡¨
        return dummy.next;
    }

    // åˆå¹¶ä» lists[i] åˆ° lists[j-1] çš„é“¾è¡¨
    ListNode* mergeKLists(vector<ListNode*>& lists, int i, int j) {
        int m = j - i;
        if (m == 0) {
            return nullptr; // æ³¨æ„è¾“å…¥çš„ lists å¯èƒ½æ˜¯ç©ºçš„
        }
        if (m == 1) {
            return lists[i]; // æ— éœ€åˆå¹¶ï¼Œç›´æ¥è¿”å›
        }
        auto left = mergeKLists(lists, i, i + m / 2); // åˆå¹¶å·¦åŠéƒ¨åˆ†
        auto right = mergeKLists(lists, i + m / 2, j); // åˆå¹¶å³åŠéƒ¨åˆ†
        return mergeTwoLists(left, right); // æœ€åæŠŠå·¦åŠå’Œå³åŠåˆå¹¶
    }

public:
    ListNode* mergeKLists(vector<ListNode*>& lists) {
        return mergeKLists(lists, 0, lists.size());
    }
};
```

### [146. LRU ç¼“å­˜](https://leetcode.cn/problems/lru-cache/)

#### é¢˜ç›®æè¿°

è¯·ä½ è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ»¡è¶³ [LRU (æœ€è¿‘æœ€å°‘ä½¿ç”¨) ç¼“å­˜](https://baike.baidu.com/item/LRU) çº¦æŸçš„æ•°æ®ç»“æ„ã€‚

å®ç° `LRUCache` ç±»ï¼š

- `LRUCache(int capacity)` ä»¥ **æ­£æ•´æ•°** ä½œä¸ºå®¹é‡ `capacity` åˆå§‹åŒ– LRU ç¼“å­˜
- `int get(int key)` å¦‚æœå…³é”®å­— `key` å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› `-1` ã€‚
- `void put(int key, int value)` å¦‚æœå…³é”®å­— `key` å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ `value` ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘ç¼“å­˜ä¸­æ’å…¥è¯¥ç»„ `key-value` ã€‚å¦‚æœæ’å…¥æ“ä½œå¯¼è‡´å…³é”®å­—æ•°é‡è¶…è¿‡ `capacity` ï¼Œåˆ™åº”è¯¥ **é€å‡º** æœ€ä¹…æœªä½¿ç”¨çš„å…³é”®å­—ã€‚

å‡½æ•° `get` å’Œ `put` å¿…é¡»ä»¥ `O(1)` çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥
["LRUCache", "put", "put", "get", "put", "get", "put", "get", "get", "get"]
[[2], [1, 1], [2, 2], [1], [3, 3], [2], [4, 4], [1], [3], [4]]
è¾“å‡º
[null, null, null, 1, null, -1, null, -1, 3, 4]

è§£é‡Š
LRUCache lRUCache = new LRUCache(2);
lRUCache.put(1, 1); // ç¼“å­˜æ˜¯ {1=1}
lRUCache.put(2, 2); // ç¼“å­˜æ˜¯ {1=1, 2=2}
lRUCache.get(1);    // è¿”å› 1
lRUCache.put(3, 3); // è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 2 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {1=1, 3=3}
lRUCache.get(2);    // è¿”å› -1 (æœªæ‰¾åˆ°)
lRUCache.put(4, 4); // è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 1 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {4=4, 3=3}
lRUCache.get(1);    // è¿”å› -1 (æœªæ‰¾åˆ°)
lRUCache.get(3);    // è¿”å› 3
lRUCache.get(4);    // è¿”å›  
```

**æç¤ºï¼š**

- `1 <= capacity <= 3000`
- `0 <= key <= 10000`
- `0 <= value <= 105`
- æœ€å¤šè°ƒç”¨ `2 * 105` æ¬¡ `get` å’Œ `put`

#### é¢˜è§£

>  **åŒå‘é“¾è¡¨ + å“ˆå¸Œè¡¨un-map<int, node*>æ¨¡æ‹Ÿ**

 <img src="./assets/1696039105-PSyHej-146-3-c.png" alt="å›¾è§£ LRU" style="zoom: 33%;" />

ç­”ç–‘

é—®ï¼šéœ€è¦å‡ ä¸ªå“¨å…µèŠ‚ç‚¹ï¼Ÿ

ç­”ï¼šä¸€ä¸ªå°±å¤Ÿäº†ã€‚ä¸€å¼€å§‹å“¨å…µèŠ‚ç‚¹ dummy çš„ prev å’Œ next éƒ½æŒ‡å‘ dummyã€‚éšç€èŠ‚ç‚¹çš„æ’å…¥ï¼Œdummy çš„ next æŒ‡å‘é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆæœ€ä¸Šé¢çš„ä¹¦ï¼‰ï¼Œprev æŒ‡å‘é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ˆæœ€ä¸‹é¢çš„ä¹¦ï¼‰ã€‚

é—®ï¼šä¸ºä»€ä¹ˆèŠ‚ç‚¹è¦æŠŠ key ä¹Ÿå­˜ä¸‹æ¥ï¼Ÿ

ç­”ï¼šåœ¨åˆ é™¤é“¾è¡¨æœ«å°¾èŠ‚ç‚¹æ—¶ï¼Œä¹Ÿè¦åˆ é™¤å“ˆå¸Œè¡¨ä¸­çš„è®°å½•ï¼Œè¿™éœ€è¦çŸ¥é“æœ«å°¾èŠ‚ç‚¹çš„ keyã€‚

```c++
class Node {
public:
    int key;
    int value;
    Node* prev;
    Node* next;

    Node(int k = 0, int v = 0) : key(k), value(v) {}
};

class LRUCache {
private:
    int capacity;
    Node* dummy; // å“¨å…µèŠ‚ç‚¹
    unordered_map<int, Node*> key_to_node;

    // åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆæŠ½å‡ºä¸€æœ¬ä¹¦ï¼‰
    void remove(Node* x) {
        x->prev->next = x->next;
        x->next->prev = x->prev;
    }

    // åœ¨é“¾è¡¨å¤´æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆæŠŠä¸€æœ¬ä¹¦æ”¾åœ¨æœ€ä¸Šé¢ï¼‰
    void push_front(Node* x) {
        x->prev = dummy;
        x->next = dummy->next;
        x->prev->next = x;
        x->next->prev = x;
    }

    // è·å– key å¯¹åº”çš„èŠ‚ç‚¹ï¼ŒåŒæ—¶æŠŠè¯¥èŠ‚ç‚¹ç§»åˆ°é“¾è¡¨å¤´éƒ¨
    Node* get_node(int key) {
        auto it = key_to_node.find(key);
        if (it == key_to_node.end()) { // æ²¡æœ‰è¿™æœ¬ä¹¦
            return nullptr;
        }
        Node* node = it->second; // æœ‰è¿™æœ¬ä¹¦
        remove(node); // æŠŠè¿™æœ¬ä¹¦æŠ½å‡ºæ¥
        push_front(node); // æ”¾åœ¨æœ€ä¸Šé¢
        return node;
    }

public:
    LRUCache(int capacity) : capacity(capacity), dummy(new Node()) {
        dummy->prev = dummy;
        dummy->next = dummy;
    }

    int get(int key) {
        Node* node = get_node(key); // get_node ä¼šæŠŠå¯¹åº”èŠ‚ç‚¹ç§»åˆ°é“¾è¡¨å¤´éƒ¨
        return node ? node->value : -1;
    }

    void put(int key, int value) {
        Node* node = get_node(key);
        if (node) { // æœ‰è¿™æœ¬ä¹¦
            node->value = value; // æ›´æ–° value
            return;
        }
        key_to_node[key] = node = new Node(key, value); // æ–°ä¹¦
        push_front(node); // æ”¾åœ¨æœ€ä¸Šé¢
        if (key_to_node.size() > capacity) { // ä¹¦å¤ªå¤šäº†
            Node* back_node = dummy->prev;
            key_to_node.erase(back_node->key);
            remove(back_node); // å»æ‰æœ€åä¸€æœ¬ä¹¦
            delete back_node; // é‡Šæ”¾å†…å­˜
        }
    }
};

```

## äºŒå‰æ ‘

### [94. äºŒå‰æ ‘çš„ä¸­åºéå†](https://leetcode.cn/problems/binary-tree-inorder-traversal/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å› *å®ƒçš„ **ä¸­åº** éå†* ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/inorder_1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [1,null,2,3]
è¾“å‡ºï¼š[1,3,2]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = []
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [1]
è¾“å‡ºï¼š[1]
```

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ `[0, 100]` å†…
- `-100 <= Node.val <= 100`

**è¿›é˜¶:** é€’å½’ç®—æ³•å¾ˆç®€å•ï¼Œä½ å¯ä»¥é€šè¿‡è¿­ä»£ç®—æ³•å®Œæˆå—ï¼Ÿ

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šé€’å½’**

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
private:
    vector<int> ans;
    void dfs(TreeNode *root) {
        // ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        if (root == nullptr) return;

        dfs(root->left);  // å·¦
        ans.push_back(root->val);  // ä¸­
        dfs(root->right);  // å³
    }
public:
    vector<int> inorderTraversal(TreeNode* root) {
        dfs(root);
        return ans;
    }
};
```

**æ–¹æ³•äºŒï¼šè¿­ä»£æ³•**

è¿­ä»£æ³•çš„éš¾ç‚¹åœ¨äºï¼Œå¦‚æœroot pushè¿›æ ˆåï¼Œç¬¬ä¸€æ¬¡å–å‡ºæ—¶ä¸èƒ½ä¿å­˜åˆ°ansä¸­ï¼Œå› ä¸ºè¦**â€œå…ˆå·¦å†ä¸­â€**ï¼ˆè€Œå‰åºå¯ä»¥ç›´æ¥ä¿å­˜åˆ°ansï¼Œååºå¯ä»¥ç”±å‰åºåè½¬å¾—åˆ°ï¼‰ã€‚

æ‰€ä»¥ä¸­åºåœ¨ç¬¬ä¸€æ¬¡ä»æ ˆä¸­å–å‡ºrootæ—¶ï¼Œè¦éµä» pushå³èŠ‚ç‚¹ â¡ï¸ push(root + nullptr)(å†pushä¸€æ¬¡) â¡ï¸ pushå·¦èŠ‚ç‚¹ çš„é¡ºåºï¼Œç„¶ååœ¨å–å‡ºæ—¶é‡åˆ°nullptræ—¶å–ä¸¤æ¬¡ï¼ŒæŠŠè¿™æ¬¡å–å‡ºçš„valä¿å­˜åˆ°ansï¼Œè¿™æ ·æ‰èƒ½ä¿è¯é¡ºåºä¸ºå·¦->ä¸­->å³ã€‚

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
public:
    vector<int> inorderTraversal(TreeNode* root) {
        stack<TreeNode*> stk;
        if (root != nullptr) stk.push(root);
        vector<int> ans;
        while (!stk.empty()) {
            TreeNode *node = stk.top(); stk.pop();
            if (node) printf("%d\n", node->val);
            if (node == nullptr) {  // å¦‚æœå–å‡ºnullptrï¼Œéœ€è¦å†å–ä¸€æ¬¡å¹¶ä¿å­˜
                node = stk.top(); stk.pop();
                ans.push_back(node->val);
            } else {
                // è¦æŒ‰ å³->ä¸­->å·¦ çš„é¡ºåºä¿å­˜åˆ°æ ˆï¼Œè¾“å‡ºæ—¶æ‰æ˜¯å·¦ä¸­å³ã€‚
                if (node->right) stk.push(node->right);  // å³
                stk.push(node);
                stk.push(nullptr);  // ä¿å­˜æ ‡å¿—
                if (node->left) stk.push(node->left);  // å·¦
            }   
        }

        return ans;
    }
};
```

### [104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦](https://leetcode.cn/problems/maximum-depth-of-binary-tree/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ `root` ï¼Œè¿”å›å…¶æœ€å¤§æ·±åº¦ã€‚

äºŒå‰æ ‘çš„ **æœ€å¤§æ·±åº¦** æ˜¯æŒ‡ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/tmp-tree.jpg" alt="img" style="zoom:67%;" />

 

```
è¾“å…¥ï¼šroot = [3,9,20,null,null,15,7]
è¾“å‡ºï¼š3
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = [1,null,2]
è¾“å‡ºï¼š2
```

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡åœ¨ `[0, 104]` åŒºé—´å†…ã€‚
- `-100 <= Node.val <= 100`

#### é¢˜è§£

å±‚åºéå†äºŒå‰æ ‘ï¼Œå¹¶åœ¨æ¯ä¸€å±‚ä½¿max_depth++ï¼Œå¦‚ä½•æ‰èƒ½ä¸€å±‚ä¸€å±‚éå†ï¼š**åœ¨while (!que.empty())å¼€å§‹ï¼Œå…ˆè®°å½•ä¸‹å½“å‰queçš„å¤§å°ï¼Œç„¶åå°±èƒ½æŒ‰å½“å‰å±‚çš„å¤§å°åªéå†ä¸€å±‚ã€‚ï¼ˆğŸŒŸï¼Œç²¾é«“æ‰€åœ¨ï¼‰**

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
public:
    int maxDepth(TreeNode* root) {
        queue<TreeNode*> que;
        if (root) que.push(root);
        int max_depth = 0, nums;
        while (!que.empty()) {
            max_depth++;
            nums = que.size();  // ç²¾é«“
            while (nums--) {
                TreeNode* cur = que.front(); que.pop();
                if (cur->left) que.push(cur->left);
                if (cur->right) que.push(cur->right);
            }
        }

        return max_depth;
    }
};
```

### [226. ç¿»è½¬äºŒå‰æ ‘](https://leetcode.cn/problems/invert-binary-tree/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œç¿»è½¬è¿™æ£µäºŒå‰æ ‘ï¼Œå¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/invert1-tree.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [4,2,7,1,3,6,9]
è¾“å‡ºï¼š[4,7,2,9,6,3,1]
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/invert2-tree.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [2,1,3]
è¾“å‡ºï¼š[2,3,1]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = []
è¾“å‡ºï¼š[]
```

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´åœ¨ `[0, 100]` å†…
- `-100 <= Node.val <= 100`

#### é¢˜è§£

å±‚åºéå†ï¼Œä½†æ˜¯è¦ä¸€å±‚ä¸€å±‚éå†ï¼ˆåŸç†ä¸104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ç›¸åŒï¼‰ï¼Œç„¶åæ¯ä¸€å±‚çš„èŠ‚ç‚¹éƒ½è¦äº¤æ¢ä¸€æ¬¡ã€‚

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
public:
    TreeNode* invertTree(TreeNode* root) {
        queue<TreeNode*> que;
        if (root) que.push(root);
        while (!que.empty()) {
            int que_size = que.size();
            while (que_size--) {
                TreeNode *cur = que.front(); que.pop();
                // äº¤æ¢å·¦å³å­æ ‘
                TreeNode *temp = cur->left;
                cur->left = cur->right;
                cur->right = temp;

                if (cur->left) que.push(cur->left);
                if (cur->right) que.push(cur->right);
            }
        }

        return root;
    }
};
```

### [101. å¯¹ç§°äºŒå‰æ ‘](https://leetcode.cn/problems/symmetric-tree/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œ æ£€æŸ¥å®ƒæ˜¯å¦è½´å¯¹ç§°ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/1698026966-JDYPDU-image.png" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [1,2,2,3,4,4,3]
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/1698027008-nPFLbM-image.png" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [1,2,2,null,3,null,3]
è¾“å‡ºï¼šfalse
```

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ `[1, 1000]` å†…
- `-100 <= Node.val <= 100` 

**è¿›é˜¶ï¼š**ä½ å¯ä»¥è¿ç”¨é€’å½’å’Œè¿­ä»£ä¸¤ç§æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ

#### é¢˜è§£

é€’å½’å®ç°ï¼Œåˆ¤æ–­å·¦ä¾§ç»“ç‚¹ä¸å³ä¾§ç»“ç‚¹çš„å†…å¤–ä¾§æ˜¯å¦ç›¸åŒã€‚

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
private:
    bool dfs(TreeNode* left, TreeNode* right) {
        if (left == nullptr && right == nullptr) return true;
        else if (left == nullptr || right == nullptr) return false;

        if (dfs(left->left, right->right) && dfs(left->right, right->left) && left->val == right->val) return true;  // æ³¨æ„è¿˜è¦åˆ¤æ–­å½“å‰çš„leftå’Œrightçš„valæ˜¯å¦ç›¸åŒ
        return false;  
    }
public:
    bool isSymmetric(TreeNode* root) {
        return dfs(root->left, root->right);
    }
};
```

### [543. äºŒå‰æ ‘çš„ç›´å¾„](https://leetcode.cn/problems/diameter-of-binary-tree/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¿”å›è¯¥æ ‘çš„ **ç›´å¾„** ã€‚

äºŒå‰æ ‘çš„ **ç›´å¾„** æ˜¯æŒ‡æ ‘ä¸­ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ€é•¿è·¯å¾„çš„ **é•¿åº¦** ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç»è¿‡ä¹Ÿå¯èƒ½ä¸ç»è¿‡æ ¹èŠ‚ç‚¹ `root` ã€‚

ä¸¤èŠ‚ç‚¹ä¹‹é—´è·¯å¾„çš„ **é•¿åº¦** ç”±å®ƒä»¬ä¹‹é—´è¾¹æ•°è¡¨ç¤ºã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/diamtree.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [1,2,3,4,5]
è¾“å‡ºï¼š3
è§£é‡Šï¼š3 ï¼Œå–è·¯å¾„ [4,2,1,3] æˆ– [5,2,1,3] çš„é•¿åº¦ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = [1,2]
è¾“å‡ºï¼š1
```

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ `[1, 104]` å†…
- `-100 <= Node.val <= 100`

#### é¢˜è§£

æœ¬é¢˜æœ‰ä¸¤ä¸ªå…³é”®æ¦‚å¿µï¼š

- é“¾ï¼šä»å­æ ‘ä¸­çš„å¶å­èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„ã€‚æŠŠæœ€é•¿é“¾çš„é•¿åº¦ï¼Œä½œä¸º *dfs* çš„è¿”å›å€¼ã€‚æ ¹æ®è¿™ä¸€å®šä¹‰ï¼Œç©ºèŠ‚ç‚¹çš„é“¾é•¿æ˜¯ 0ï¼Œå¶å­èŠ‚ç‚¹çš„é“¾é•¿æ˜¯ 1ã€‚
- ç›´å¾„ï¼š
- ç­‰ä»·äºç”±ä¸¤æ¡ï¼ˆæˆ–è€…ä¸€æ¡ï¼‰é“¾æ‹¼æˆçš„è·¯å¾„ã€‚æˆ‘ä»¬æšä¸¾æ¯ä¸ª nodeï¼Œå‡è®¾ç›´å¾„åœ¨è¿™é‡Œã€Œæ‹å¼¯ã€ï¼Œä¹Ÿå°±æ˜¯è®¡ç®—ç”±å·¦å³ä¸¤æ¡ä»ä¸‹é¢çš„å¶å­èŠ‚ç‚¹åˆ° node çš„é“¾çš„èŠ‚ç‚¹å€¼ä¹‹å’Œï¼Œå»æ›´æ–°ç­”æ¡ˆçš„æœ€å¤§å€¼ã€‚

âš **æ³¨æ„**ï¼š*dfs* è¿”å›çš„æ˜¯**é“¾**çš„é•¿åº¦ï¼Œä¸æ˜¯**ç›´å¾„**çš„é•¿åº¦ã€‚

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
private:
    int ans = 0;
    int dfs(TreeNode *root) {
        if (root == nullptr) return 0;
        if (root->left == nullptr && root->right == nullptr) return 1;

        int left_len = dfs(root->left);  // å·¦è¾¹çš„æœ€å¤§é“¾é•¿
        int right_len = dfs(root->right);  // å³è¾¹çš„æœ€å¤§é“¾é•¿

        ans = max(ans, left_len + right_len);  // ä¸¤è¾¹é“¾é•¿

        return max(left_len + 1, right_len + 1);  // è¿”å›æœ€å¤§é“¾é•¿ï¼Œé€‰æœ€é•¿çš„ä¸€è¾¹
    }
public:
    int diameterOfBinaryTree(TreeNode* root) {
        dfs(root);

        return ans;
    }
};
```

### [102. äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode.cn/problems/binary-tree-level-order-traversal/)

#### é¢˜ç›®æè¿°

ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„ **å±‚åºéå†** ã€‚ ï¼ˆå³é€å±‚åœ°ï¼Œä»å·¦åˆ°å³è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/tree1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [3,9,20,null,null,15,7]
è¾“å‡ºï¼š[[3],[9,20],[15,7]]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = [1]
è¾“å‡ºï¼š[[1]]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = []
è¾“å‡ºï¼š[]
```

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ `[0, 2000]` å†…
- `-1000 <= Node.val <= 1000`

#### é¢˜è§£

**BFSï¼Œé˜Ÿåˆ—å®ç°å±‚åºéå†**

è¦ç‚¹ï¼šå¦‚æœæƒ³æ¯ä¸€å±‚å•ç‹¬ä¿å­˜ï¼Œå°±éœ€è¦å…ˆä¿å­˜ä¸‹ä¸€å±‚çš„å¤§å°ï¼Œå…³é”®ä»£ç ï¼š`int que_size = que.size();`

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
public:
    vector<vector<int>> levelOrder(TreeNode* root) {
        vector<vector<int>> ans;
        queue<TreeNode*> que;
        if (root) que.push(root);
        while (!que.empty()) {
            int que_size = que.size();
            vector<int> tmp;
            while (que_size--) {
                TreeNode *cur = que.front(); que.pop();
                tmp.push_back(cur->val);
                if (cur->left) que.push(cur->left);
                if (cur->right) que.push(cur->right);
            }
            ans.push_back(tmp);
        }
        return ans;
    }
};
```

### [108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/convert-sorted-array-to-binary-search-tree/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œå…¶ä¸­å…ƒç´ å·²ç»æŒ‰ **å‡åº** æ’åˆ—ï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºä¸€æ£µ å¹³è¡¡ äºŒå‰æœç´¢æ ‘ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/btree1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šnums = [-10,-3,0,5,9]
è¾“å‡ºï¼š[0,-3,9,-10,null,5]
è§£é‡Šï¼š[0,-10,5,null,-3,null,9] ä¹Ÿå°†è¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆï¼š
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/btree.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šnums = [1,3]
è¾“å‡ºï¼š[3,1]
è§£é‡Šï¼š[1,null,3] å’Œ [3,1] éƒ½æ˜¯é«˜åº¦å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚
```

**æç¤ºï¼š**

- `1 <= nums.length <= 104`
- `-104 <= nums[i] <= 104`
- `nums` æŒ‰ **ä¸¥æ ¼é€’å¢** é¡ºåºæ’åˆ—

#### é¢˜è§£

**é€’å½’æ³•**

æ¯æ¬¡å–æ•°ç»„ä¸­é—´å€¼mid**æ„å»ºå½“å‰èŠ‚ç‚¹**ï¼Œç„¶åé€’å½’æ„é€ å…¶å·¦å³å­æ ‘ã€‚

å·¦å­æ ‘ä½¿ç”¨midå·¦è¾¹çš„åŒºé—´ï¼Œå³å­æ ‘ä½¿ç”¨midå³è¾¹çš„åŒºé—´ï¼Œè¿™æ ·æ„å»ºå‡ºçš„æ ‘ä¸€å®šæ˜¯å¹³è¡¡ä¸”æ˜¯æœç´¢æ ‘ã€‚

æ³¨æ„ï¼šé€’å½’æ—¶å°½é‡ç”¨vector\<int>& numsï¼Œåœ¨åŸæ•°ç»„ä¸Šç”¨indexç´¢å¼•ï¼Œè€Œä¸æ˜¯ç›´æ¥ç”¨vector\<int> numsæ„é€ ï¼Œé‚£æ ·ä¼šæµªè´¹å¾ˆå¤šç©ºé—´ã€‚

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
private:
    TreeNode *dfs(vector<int>& nums, int start, int end) {
        // ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        if (start > end) return nullptr;

        // å¦‚æœæ˜¯å¥‡æ•°åˆ™å–ä¸­é—´ï¼Œå¦‚æœæ˜¯å¶æ•°åˆ™å–å‰è€…
        int mid = (start + end) / 2;
        TreeNode *node = new TreeNode(nums[mid]);  // æ„é€ å½“å‰èŠ‚ç‚¹
        // é€’å½’æ„é€ å·¦å³å­æ ‘
        node->left = dfs(nums, start, mid - 1);
        node->right = dfs(nums, mid + 1, end);

        return node;
    }
public:
    TreeNode* sortedArrayToBST(vector<int>& nums) {
        return dfs(nums, 0, nums.size() - 1);
    }
};
```

### [98. éªŒè¯äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/validate-binary-search-tree/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚

**æœ‰æ•ˆ** äºŒå‰æœç´¢æ ‘å®šä¹‰å¦‚ä¸‹ï¼š

- èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å« **å°äº** å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚
- èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å« **å¤§äº** å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚
- æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/tree1-20250405163311012.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [2,1,3]
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/tree2.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [5,1,4,null,null,3,6]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ ¹èŠ‚ç‚¹çš„å€¼æ˜¯ 5 ï¼Œä½†æ˜¯å³å­èŠ‚ç‚¹çš„å€¼æ˜¯ 4 ã€‚
```

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´åœ¨`[1, 104]` å†…
- `-231 <= Node.val <= 231 - 1`

#### é¢˜è§£

**é€’å½’ï¼Œä¸­åºéå†ï¼Œåˆ¤æ–­åºåˆ—æ˜¯å¦æœ‰åº**

åˆ©ç”¨äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§ï¼šä¸­åºéå†æ˜¯ä¸€ä¸ªé€’å¢åºåˆ—ã€‚

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
private:
    long pre = LONG_MIN;
public:
    bool isValidBST(TreeNode* root) {
        // ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        if (root == nullptr) return true;

        // é€’å½’ï¼Œä¸­åºéå†
        bool judge_left = isValidBST(root->left);  // å·¦

        if (pre < root->val) pre = root->val;  // ä¸­
        else return false;  // åˆ©ç”¨äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§ï¼šä¸­åºéå†æ˜¯é€’å¢åºåˆ—

        bool judge_right = isValidBST(root->right);  // å³

        return judge_left&&judge_right;
    }
};
```

### [230. äºŒå‰æœç´¢æ ‘ä¸­ç¬¬ K å°çš„å…ƒç´ ](https://leetcode.cn/problems/kth-smallest-element-in-a-bst/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œå’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªç®—æ³•æŸ¥æ‰¾å…¶ä¸­ç¬¬ `k` å°çš„å…ƒç´ ï¼ˆä» 1 å¼€å§‹è®¡æ•°ï¼‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/kthtree1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [3,1,4,null,2], k = 1
è¾“å‡ºï¼š1
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/kthtree2.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [5,3,6,2,4,null,null,1], k = 3
è¾“å‡ºï¼š3
```

**æç¤ºï¼š**

- æ ‘ä¸­çš„èŠ‚ç‚¹æ•°ä¸º `n` ã€‚
- `1 <= k <= n <= 104`
- `0 <= Node.val <= 104` 

**è¿›é˜¶ï¼š**å¦‚æœäºŒå‰æœç´¢æ ‘ç»å¸¸è¢«ä¿®æ”¹ï¼ˆæ’å…¥/åˆ é™¤æ“ä½œï¼‰å¹¶ä¸”ä½ éœ€è¦é¢‘ç¹åœ°æŸ¥æ‰¾ç¬¬ `k` å°çš„å€¼ï¼Œä½ å°†å¦‚ä½•ä¼˜åŒ–ç®—æ³•ï¼Ÿ

#### é¢˜è§£

åœ¨äºŒå‰æœç´¢æ ‘ä¸­ï¼Œä»»æ„å­èŠ‚ç‚¹éƒ½æ»¡è¶³â€œå·¦å­èŠ‚ç‚¹ < æ ¹èŠ‚ç‚¹ < å³å­èŠ‚ç‚¹â€çš„è§„åˆ™ã€‚å› æ­¤äºŒå‰æœç´¢æ ‘å…·æœ‰ä¸€ä¸ªé‡è¦æ€§è´¨ï¼šäºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ä¸ºé€’å¢åºåˆ—ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬é¢˜å¯è¢«è½¬åŒ–ä¸ºæ±‚ä¸­åºéå†çš„ç¬¬ k ä¸ªèŠ‚ç‚¹ã€‚

 <img src="./assets/1690460306-SMjxpo-Picture1.png" alt="Picture1.png" style="zoom:22%;" />

ä¸ºæ±‚ç¬¬ k ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦å®ç°ä»¥ä¸‹ä¸‰é¡¹å·¥ä½œï¼š

é€’å½’éå†æ—¶è®¡æ•°ï¼Œç»Ÿè®¡å½“å‰èŠ‚ç‚¹çš„åºå·ã€‚

é€’å½’åˆ°ç¬¬ k ä¸ªèŠ‚ç‚¹æ—¶ï¼Œåº”è®°å½•ç»“æœ res ã€‚

**å‰ªæï¼š**è®°å½•ç»“æœåï¼ˆk = 0ï¼‰ï¼Œåç»­çš„éå†å³å¤±å»æ„ä¹‰ï¼Œåº”æå‰è¿”å›ã€‚

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
private:
    int ans, k;
    void dfs(TreeNode *root) {
        if (root == nullptr) return;

        // ä¸­åºéå†
        dfs(root->left);  // å·¦
        if (k == 0) return;  // å‰ªæï¼Œkç¬¬ä¸€æ¬¡ä¸º0æ—¶å·²ç»ç»™ansèµ‹å€¼
        if (--k == 0) ans = root->val;  // ä¸­
        dfs(root->right);  // å³
    }
public:
    int kthSmallest(TreeNode* root, int k) {
        this->k = k;
        dfs(root);
        return ans;
    }
};
```

### [199. äºŒå‰æ ‘çš„å³è§†å›¾](https://leetcode.cn/problems/binary-tree-right-side-view/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„ **æ ¹èŠ‚ç‚¹** `root`ï¼Œæƒ³è±¡è‡ªå·±ç«™åœ¨å®ƒçš„å³ä¾§ï¼ŒæŒ‰ç…§ä»é¡¶éƒ¨åˆ°åº•éƒ¨çš„é¡ºåºï¼Œè¿”å›ä»å³ä¾§æ‰€èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹å€¼ã€‚

**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š**root = [1,2,3,null,5,null,4]

**è¾“å‡ºï¼š**[1,3,4]

**è§£é‡Šï¼š**

 <img src="./assets/tmpd5jn43fs-1.png" alt="img" style="zoom:67%;" />

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š**root = [1,2,3,4,null,null,null,5]

**è¾“å‡ºï¼š**[1,3,4,5]

**è§£é‡Šï¼š**

 <img src="./assets/tmpkpe40xeh-1.png" alt="img" style="zoom:67%;" />

**ç¤ºä¾‹ 3ï¼š**

**è¾“å…¥ï¼š**root = [1,null,3]

**è¾“å‡ºï¼š**[1,3]

**ç¤ºä¾‹ 4ï¼š**

**è¾“å…¥ï¼š**root = []

**è¾“å‡ºï¼š**[]

**æç¤º:**

- äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯ `[0,100]`
- `-100 <= Node.val <= 100` 

#### é¢˜è§£

**å±‚åºéå†ï¼Œå–æ¯å±‚çš„æœ€å³ä¾§ä¸€ä¸ªèŠ‚ç‚¹çš„val**

ä¸å±‚åºéå†ä¸åŒçš„ä¸€ç‚¹æ˜¯ï¼š

å½“æ¯å±‚éå†åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œæ‰åŠ å…¥ansï¼š`if (que_size == 0) ans.push_back(cur->val);`

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
public:
    vector<int> rightSideView(TreeNode* root) {
        queue<TreeNode*> que;
        if (root) que.push(root);
        vector<int> ans;
        // å±‚åºéå†
        while (!que.empty()) {
            int que_size = que.size();
            while (que_size--) {
                TreeNode *cur = que.front(); que.pop();
                if (que_size == 0) ans.push_back(cur->val);  // å°†æ¯å±‚çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹valåŠ å…¥ans
                if (cur->left) que.push(cur->left);
                if (cur->right) que.push(cur->right);
            }
        }
        return ans;
    }
};
```

### [114. äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨](https://leetcode.cn/problems/flatten-binary-tree-to-linked-list/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™ä½ äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹ `root` ï¼Œè¯·ä½ å°†å®ƒå±•å¼€ä¸ºä¸€ä¸ªå•é“¾è¡¨ï¼š

- å±•å¼€åçš„å•é“¾è¡¨åº”è¯¥åŒæ ·ä½¿ç”¨ `TreeNode` ï¼Œå…¶ä¸­ `right` å­æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ä¸­ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œè€Œå·¦å­æŒ‡é’ˆå§‹ç»ˆä¸º `null` ã€‚
- å±•å¼€åçš„å•é“¾è¡¨åº”è¯¥ä¸äºŒå‰æ ‘ [**å…ˆåºéå†**](https://baike.baidu.com/item/å…ˆåºéå†/6442839?fr=aladdin) é¡ºåºç›¸åŒã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/flaten.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [1,2,5,3,4,null,6]
è¾“å‡ºï¼š[1,null,2,null,3,null,4,null,5,null,6]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = []
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [0]
è¾“å‡ºï¼š[0]
```

**æç¤ºï¼š**

- æ ‘ä¸­ç»“ç‚¹æ•°åœ¨èŒƒå›´ `[0, 2000]` å†…
- `-100 <= Node.val <= 100`

**è¿›é˜¶ï¼š**ä½ å¯ä»¥ä½¿ç”¨åŸåœ°ç®—æ³•ï¼ˆ`O(1)` é¢å¤–ç©ºé—´ï¼‰å±•å¼€è¿™æ£µæ ‘å—ï¼Ÿ

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šå¤´æ’æ³•ï¼ˆåŸåœ°ç®—æ³•ï¼‰**

> è§£å†³é¢˜ç›®çš„å…³é”®åœ¨äºä¸èƒ½ç ´ç¯åŸæ¥æ ‘çš„ç»“æ„ï¼Œ**æŒ‰ç…§å³ -> å·¦ -> ä¸­éå†è¿›è¡Œå¤´æ’**ï¼Œä¹Ÿå°±æ˜¯â€œå³åœ¨æœ€åâ€ã€â€œå·¦åœ¨å³åâ€ã€â€œä¸­åœ¨å·¦åâ€çš„å…ˆåé¡ºåºï¼Œè€Œå…ˆéå†åˆ°çš„ä¼šåˆ°åé¢ï¼Œæœ€ç»ˆå½¢æˆçš„å•é“¾è¡¨å°±ä¼šæ˜¯å…ˆåºéå†çš„å½¢åŠ¿ã€‚

æ ¸å‹ï¼špreæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚

é‡‡ç”¨å¤´æ’æ³•æ„å»ºé“¾è¡¨ï¼Œä¹Ÿå°±æ˜¯ä»èŠ‚ç‚¹ 6 å¼€å§‹ï¼Œåœ¨ 6 çš„å‰é¢æ’å…¥ 5ï¼Œåœ¨ 5 çš„å‰é¢æ’å…¥ 4ï¼Œä¾æ­¤ç±»æ¨ã€‚

ä¸ºæ­¤ï¼Œè¦æŒ‰ç…§ 6â†’5â†’4â†’3â†’2â†’1 çš„é¡ºåºè®¿é—®èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§å³å­æ ‘ - å·¦å­æ ‘ - æ ¹çš„é¡ºåº DFS è¿™æ£µæ ‘ã€‚

DFS çš„åŒæ—¶ï¼Œè®°å½•å½“å‰é“¾è¡¨çš„å¤´èŠ‚ç‚¹ä¸º preã€‚ä¸€å¼€å§‹ head æ˜¯ç©ºèŠ‚ç‚¹ã€‚

å…·ä½“æ¥è¯´ï¼š

1. å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å›ã€‚
2. é€’å½’å³å­æ ‘ã€‚
3. é€’å½’å·¦å­æ ‘ã€‚
4. æŠŠ root.left ç½®ä¸ºç©ºã€‚
5. å¤´æ’æ³•ï¼ŒæŠŠ root æ’åœ¨ head çš„å‰é¢ï¼Œä¹Ÿå°±æ˜¯ root.right=preã€‚
6. ç°åœ¨ root æ˜¯é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼ŒæŠŠ pre æ›´æ–°ä¸º rootã€‚

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
private:
    TreeNode *pre = nullptr;  // æŒ‡å‘å‰ä¸€ä¸ªéå†è¿‡çš„èŠ‚ç‚¹
public:
    void flatten(TreeNode* root) {
        // ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        if (root == nullptr) return;

        // å³ -> å·¦ -> ä¸­
        flatten(root->right);
        flatten(root->left);

        root->left = nullptr;
        root->right = pre;
        pre = root;
    }
};
```

### [105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ `preorder` å’Œ `inorder` ï¼Œå…¶ä¸­ `preorder` æ˜¯äºŒå‰æ ‘çš„**å…ˆåºéå†**ï¼Œ `inorder` æ˜¯åŒä¸€æ£µæ ‘çš„**ä¸­åºéå†**ï¼Œè¯·æ„é€ äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ 1:**

 <img src="./assets/tree.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥: preorder = [3,9,20,15,7], inorder = [9,3,15,20,7]
è¾“å‡º: [3,9,20,null,null,15,7]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: preorder = [-1], inorder = [-1]
è¾“å‡º: [-1]
```

**æç¤º:**

- `1 <= preorder.length <= 3000`
- `inorder.length == preorder.length`
- `-3000 <= preorder[i], inorder[i] <= 3000`
- `preorder` å’Œ `inorder` å‡ **æ— é‡å¤** å…ƒç´ 
- `inorder` å‡å‡ºç°åœ¨ `preorder`
- `preorder` **ä¿è¯** ä¸ºäºŒå‰æ ‘çš„å‰åºéå†åºåˆ—
- `inorder` **ä¿è¯** ä¸ºäºŒå‰æ ‘çš„ä¸­åºéå†åºåˆ—

#### é¢˜è§£

**dfsé€’å½’æ„é€ äºŒå‰æ ‘**

1. åœ¨å‰åºéå†çš„preorder_startè·å¾—å½“å‰èŠ‚ç‚¹çš„valï¼›
2. åœ¨ä¸­åºéå†çš„inorder_startï½inorder_endä¸­å¯»æ‰¾å¯¹åº”çš„indexï¼›
3. ä¸­åºçš„inorder_startï½inorder_indexï¼ˆå³inorder_indexçš„å·¦è¾¹ï¼‰çš„æ•°å­—ä¸ªæ•°ä¸preorder_startä¹‹åçš„æ•°å­—ä¸ªæ•°å¯¹åº”ï¼›ä¸­åºçš„inorder_indexï½inorder_endï¼ˆå³inorder_indexå³è¾¹ï¼‰çš„æ•°å­—ä¸ªæ•°ä¸preorder_endä¹‹å‰çš„æ•°å­—ä¸ªæ•°å¯¹åº”ï¼›ï¼ˆğŸŒŸï¼Œè¿™é‡Œå°±åˆ’åˆ†å‡ºäº†å·¦å³å­æ ‘çš„æ•°å­—èŒƒå›´ï¼‰
4. é€’å½’æ„é€ å·¦å³å­æ ‘ï¼›

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
private:
    TreeNode *dfs(vector<int>& preorder, int preorder_start, int preorder_end, vector<int>& inorder, int inorder_start, int inorder_end) {
        // ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        if (preorder_start > preorder_end) return nullptr;

        // æ„é€ å½“å‰èŠ‚ç‚¹
        TreeNode *node = new TreeNode(preorder[preorder_start]);

        // åœ¨ä¸­åºinorderä¸­å¯»æ‰¾åˆ‡åˆ†ç‚¹
        int inorder_index = inorder_start;
        for (; inorder_index <= inorder_end; inorder_index ++ ) {
            if (inorder[inorder_index] == preorder[preorder_start]) break;
        }

        node->left = dfs(preorder, preorder_start + 1, preorder_start + (inorder_index - inorder_start), inorder, inorder_start, inorder_index - 1);
        node->right = dfs(preorder, preorder_end - (inorder_end - inorder_index) + 1, preorder_end, inorder, inorder_index + 1, inorder_end);

        return node;
    }
public:
    TreeNode* buildTree(vector<int>& preorder, vector<int>& inorder) {
        return dfs(preorder, 0, preorder.size() - 1, inorder, 0, inorder.size() - 1);
    }
};
```

### [437. è·¯å¾„æ€»å’Œ III](https://leetcode.cn/problems/path-sum-iii/)ğŸŒŸğŸŒŸğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œå’Œä¸€ä¸ªæ•´æ•° `targetSum` ï¼Œæ±‚è¯¥äºŒå‰æ ‘é‡ŒèŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äº `targetSum` çš„ **è·¯å¾„** çš„æ•°ç›®ã€‚

**è·¯å¾„** ä¸éœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿä¸éœ€è¦åœ¨å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯è·¯å¾„æ–¹å‘å¿…é¡»æ˜¯å‘ä¸‹çš„ï¼ˆåªèƒ½ä»çˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/pathsum3-1-tree.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [10,5,-3,3,2,null,11,3,-2,null,1], targetSum = 8
è¾“å‡ºï¼š3
è§£é‡Šï¼šå’Œç­‰äº 8 çš„è·¯å¾„æœ‰ 3 æ¡ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22
è¾“å‡ºï¼š3
```

**æç¤º:**

- äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯ `[0,1000]`
- `-109 <= Node.val <= 109` 
- `-1000 <= targetSum <= 1000` 

#### é¢˜è§£

æœ¬é¢˜åšæ³•å’Œ **560. å’Œä¸ºKçš„å­æ•°ç»„**æ˜¯ä¸€æ ·çš„ï¼ˆä¹Ÿæ˜¯hot 100ï¼Œåœ¨å­ä¸²æ¨¡å—ä¸­ï¼‰ï¼Œå‰ç¼€å’Œ+å“ˆå¸Œè¡¨ã€‚

> **æ ¸å¿ƒæ€æƒ³ï¼š**æˆ‘ä»¬æƒ³è¦çŸ¥é“çš„æ˜¯å½“å‰èŠ‚ç‚¹ä¸‹cnt[node] - cnt[nodeä¹‹å‰çš„å¦ä¸€ä¸ªèŠ‚ç‚¹] = targetçš„æ•°é‡ï¼Œç„¶åç´¯åŠ åˆ°ansä¸­ï¼Œäº¤æ¢ä¸€ä¸‹ï¼Œå°±æ˜¯cnt[node] - target = cnt[nodeä¹‹å‰çš„å¦ä¸€ä¸ªèŠ‚ç‚¹] çš„æ•°é‡æ˜¯å¤šå°‘ã€‚
>
> åˆå› ä¸ºcnt[nodeä¹‹å‰çš„å¦ä¸€ä¸ªèŠ‚ç‚¹]ä¸€å®šå‡ºç°åœ¨nodeä¹‹å‰ï¼Œå› æ­¤cnt[node] - target = cnt[nodeä¹‹å‰çš„å¦ä¸€ä¸ªèŠ‚ç‚¹]è¿™æ ·è®¡ç®—æ˜¯å®Œå…¨å¯è¡Œçš„ã€‚

åœ¨äºŒå‰æ ‘ä¸Šï¼Œå‰ç¼€å’Œç›¸å½“äºä»æ ¹èŠ‚ç‚¹å¼€å§‹çš„è·¯å¾„å…ƒç´ å’Œã€‚ç”¨å“ˆå¸Œè¡¨ cnt ç»Ÿè®¡å‰ç¼€å’Œçš„å‡ºç°æ¬¡æ•°ï¼Œå½“æˆ‘ä»¬é€’å½’åˆ°èŠ‚ç‚¹ node æ—¶ï¼Œè®¾ä»æ ¹åˆ° node çš„è·¯å¾„å…ƒç´ å’Œä¸º sï¼Œé‚£ä¹ˆå°±æ‰¾åˆ°äº† cnt[sâˆ’targetSum] ä¸ªç¬¦åˆè¦æ±‚çš„è·¯å¾„ï¼ŒåŠ å…¥ç­”æ¡ˆã€‚

ç­”ç–‘
é—®ï¼šä¸ºä»€ä¹ˆè¦åˆå§‹åŒ–å“ˆå¸Œè¡¨ cnt[0]=1ï¼Ÿ

ç­”ï¼šè¿™é‡Œçš„ 0 ç›¸å½“äºå‰ç¼€å’Œæ•°ç»„ä¸­çš„ s[0]=0ã€‚ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œæ ¹èŠ‚ç‚¹å€¼ä¸º 1ï¼ŒtargetSum=1ã€‚å¦‚æœä¸æŠŠ 0 åŠ åˆ°å“ˆå¸Œè¡¨ä¸­ï¼ŒæŒ‰ç…§æˆ‘ä»¬çš„ç®—æ³•ï¼Œæ²¡æ³•ç®—å‡ºè¿™é‡Œæœ‰ 1 æ¡ç¬¦åˆè¦æ±‚çš„è·¯å¾„ã€‚ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼Œè¦æƒ³æŠŠä»»æ„è·¯å¾„å’Œéƒ½è¡¨ç¤ºæˆä¸¤ä¸ªå‰ç¼€å’Œçš„å·®ï¼Œå¿…é¡»æ·»åŠ ä¸€ä¸ª 0ï¼Œå¦åˆ™å½“è·¯å¾„æ˜¯å‰ç¼€æ—¶ï¼ˆä»æ ¹èŠ‚ç‚¹å¼€å§‹çš„è·¯å¾„ï¼‰ï¼Œæ²¡æ³•å‡å»ä¸€ä¸ªæ•°ï¼ˆï¼Œå…·ä½“è§ å‰ç¼€å’ŒåŠå…¶æ‰©å±• ä¸­çš„è®²è§£ã€‚ã€è¿™é‡Œæœ‰ç‚¹éš¾ç†è§£ï¼Œæš‚æ—¶å…ˆè®°ä½å§ï¼Œå¦‚æœè¿è¡Œå‘ç°ä¸å¯¹ï¼Œå¯ä»¥ä¼˜å…ˆçœ‹æ˜¯ä¸æ˜¯æ¼äº†è¿™é‡Œã€‘

é—®ï¼šä¸ºä»€ä¹ˆä»£ç ä¸­è¦å…ˆæ›´æ–° ansï¼Œå†æ›´æ–° cntï¼Ÿ

ç­”ï¼šåœ¨ targetSumï¼=0 çš„æƒ…å†µä¸‹ï¼Œè¿™ä¿©è°å…ˆè°åéƒ½å¯ä»¥ã€‚ä½†å¦‚æœ targetSum=0ï¼Œå‡è®¾æ ¹èŠ‚ç‚¹å€¼ä¸º 1ï¼Œå¦‚æœå…ˆæŠŠ cnt[1] å¢åŠ  1ï¼Œå†æŠŠ ans å¢åŠ  cnt[sâˆ’targetSum]=cnt[1]=1ï¼Œå°±ç›¸å½“äºæˆ‘ä»¬æ‰¾åˆ°äº†ä¸€æ¡å’Œä¸º targetSum=0 çš„è·¯å¾„ï¼Œä½†å’Œä¸º 0 çš„è·¯å¾„æ˜¯ä¸å­˜åœ¨çš„ã€‚å¦ä¸€ç§ç†è§£æ–¹å¼æ˜¯ï¼Œç©ºè·¯å¾„çš„å…ƒç´ å’Œç­‰äº 0ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ª 0 å½“ä½œäº†ç¬¦åˆè¦æ±‚çš„è·¯å¾„ï¼Œä½†é¢˜ç›®è¦ç»Ÿè®¡çš„æ˜¯éç©ºè·¯å¾„ã€‚

é—®ï¼šä»£ç ä¸­çš„ã€Œæ¢å¤ç°åœºã€ç”¨æ„ä½•åœ¨ï¼Ÿ

ç­”ï¼šå¦‚æœä¸æ¢å¤ç°åœºï¼Œå½“æˆ‘ä»¬é€’å½’å®Œå·¦å­æ ‘ï¼Œè¦é€’å½’å³å­æ ‘æ—¶ï¼Œcnt ä¸­è¿˜ä¿å­˜ç€å·¦å­æ ‘çš„æ•°æ®ã€‚ä½†é€’å½’åˆ°å³å­æ ‘ï¼Œè¦è®¡ç®—çš„è·¯å¾„å¹¶ä¸æ¶‰åŠåˆ°å·¦å­æ ‘çš„ä»»ä½•èŠ‚ç‚¹ï¼Œå¦‚æœä¸æ¢å¤ç°åœºï¼Œcnt ä¸­ç»Ÿè®¡çš„å‰ç¼€å’Œä¸ªæ•°ä¼šæ›´å¤šï¼Œæˆ‘ä»¬ç®—å‡ºæ¥çš„ç­”æ¡ˆå¯èƒ½æ¯”æ­£ç¡®ç­”æ¡ˆæ›´å¤§ã€‚

é—®ï¼šä¸ºä»€ä¹ˆè¦åœ¨é€’å½’å®Œå³å­æ ‘åæ‰èƒ½æ¢å¤ç°åœºï¼Ÿèƒ½å¦åœ¨é€’å½’å®Œå·¦å­æ ‘åå°±æ¢å¤ç°åœºå‘¢ï¼Ÿ

ç­”ï¼šæƒ³ä¸€æƒ³ï¼Œæ¢å¤ç°åœºæ¢å¤çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å»æ‰å½“å‰èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚é€’å½’å³å­æ ‘çš„æ—¶å€™éœ€ä¸éœ€è¦å½“å‰èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Ÿéœ€è¦ã€‚æ‰€ä»¥è¦åœ¨é€’å½’å®Œå³å­æ ‘åï¼Œæ‰èƒ½æ¢å¤ç°åœºã€‚

é—®ï¼šä¸ºä»€ä¹ˆé€’å½’å‚æ•° s ä¸éœ€è¦æ¢å¤ç°åœºï¼Ÿ

ç­”ï¼šs æ˜¯åŸºæœ¬ç±»å‹ï¼Œåœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™ä¼šå¤åˆ¶ä¸€ä»½å¾€ä¸‹ä¼ é€’ï¼Œs += node.val ä¿®æ”¹çš„ä»…ä»…æ˜¯å½“å‰é€’å½’å‡½æ•°ä¸­çš„ s å‚æ•°ï¼Œå¹¶ä¸ä¼šå½±å“åˆ°å…¶ä»–é€’å½’å‡½æ•°ä¸­çš„ sã€‚æ³¨ï¼šå¦‚æœæŠŠ s æ”¾åœ¨é€’å½’å‡½æ•°å¤–ï¼Œæ­¤æ—¶åªæœ‰ä¸€ä¸ª sï¼Œæ‰§è¡Œ s += node.val å°±ä¼šå½±å“å…¨å±€äº†ã€‚

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
private:
    int ans = 0;
    int targetSum;
    unordered_map<long long, int> umap{{0, 1}};
    void dfs(TreeNode *root, long long sum) {
        if (root == nullptr) return;

        sum += root->val;
        ans += (umap.find(sum - targetSum) != umap.end()) ? umap[sum - targetSum] : 0;
        umap[sum]++;
        dfs(root->left, sum);
        dfs(root->right, sum);
        umap[sum]--;  // æ¢å¤ç°åœº
    }
public:
    int pathSum(TreeNode* root, int targetSum) {
        this->targetSum = targetSum;
        dfs(root, 0);
        return ans;
    }
};
```

### [236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚

[ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/æœ€è¿‘å…¬å…±ç¥–å…ˆ/8918834?fr=aladdin)ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªèŠ‚ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªèŠ‚ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆ**ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆ**ï¼‰ã€‚â€

**ç¤ºä¾‹ 1ï¼š**

 ![img](./assets/binarytree.png)

```
è¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1
è¾“å‡ºï¼š3
è§£é‡Šï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 3 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

 ![img](./assets/binarytree.png)

```
è¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4
è¾“å‡ºï¼š5
è§£é‡Šï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 5 ã€‚å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [1,2], p = 1, q = 2
è¾“å‡ºï¼š1
```

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ `[2, 105]` å†…ã€‚
- `-109 <= Node.val <= 109`
- æ‰€æœ‰ `Node.val` `äº’ä¸ç›¸åŒ` ã€‚
- `p != q`
- `p` å’Œ `q` å‡å­˜åœ¨äºç»™å®šçš„äºŒå‰æ ‘ä¸­ã€‚

#### é¢˜è§£

ååºéå†é€’å½’ï¼Œä½†æ˜¯é‡åˆ°ç¬¦åˆçš„å°±è¿”å›è¿™ä¸ªèŠ‚ç‚¹ï¼Œæœ‰ä¸¤ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹ï¼š
1. åˆ©ç”¨leftå’Œrightèƒ½å¤Ÿä½¿ä¸‹å±‚çš„å…±åŒç¥–å…ˆä¸€ç›´returnå‡ºå»
2. ç›´æ¥è¿”å›ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ï¼Œå› ä¸ºæ˜¯ä»ä¸‹å¾€ä¸Šéå†ï¼Œå› æ­¤returnçš„ä¸€å®šæ˜¯æœ€ä¸Šå±‚çš„ï¼Œä¹Ÿå°±æ˜¯å…±åŒç¥–å…ˆã€‚

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode(int x) : val(x), left(NULL), right(NULL) {}
 * };
 */
class Solution {
public:
    TreeNode* lowestCommonAncestor(TreeNode* root, TreeNode* p, TreeNode* q) {
        if (root == NULL) return NULL;  // æœåˆ°äº†ç©º/å¶å­èŠ‚ç‚¹ä¸‹é¢
        if (root == p || root == q) return root;  // æœåˆ°p/qå°±å¾€ä¸Šä¼ ï¼Œè¡¨ç¤ºè¿™æ¡è·¯ä¸Šæœ‰p/q

        // ååºéå†
        TreeNode *left = lowestCommonAncestor(root->left, p, q);
        TreeNode *right = lowestCommonAncestor(root->right, p, q);
        // å¦‚æœå·¦å³ä¸¤æ¡è·¯éƒ½æœ‰æŒ‡å®šèŠ‚ç‚¹ï¼Œè¯´æ˜rootæ˜¯å…¬å…±ç¥–å…ˆ
        if (left != NULL && right != NULL) return root;  
        // å¦‚æœåªæœ‰ä¸€è¾¹æœ‰æŒ‡å®šèŠ‚ç‚¹ï¼Œå°±æŠŠè¿™ä¸ªèŠ‚ç‚¹å¾€ä¸Šä¼ ï¼Œè¡¨ç¤ºï¼šè¿™æ¡è·¯ä¸ŠåŒ…å«p/q
        else if (left == NULL) return right;
        else if (right == NULL) return left;
        else return NULL;  // å¦‚æœå·¦å³ä¸¤è¾¹éƒ½æ— æŒ‡å®šèŠ‚ç‚¹ï¼Œåˆ™è¿”å›NULLï¼Œè¡¨ç¤ºï¼šè¿™æ¡è·¯ä¸Šä¸åŒ…å«p/q
    }
};
```

### [124. äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ](https://leetcode.cn/problems/binary-tree-maximum-path-sum/)

#### é¢˜ç›®æè¿°

äºŒå‰æ ‘ä¸­çš„ **è·¯å¾„** è¢«å®šä¹‰ä¸ºä¸€æ¡èŠ‚ç‚¹åºåˆ—ï¼Œåºåˆ—ä¸­æ¯å¯¹ç›¸é‚»èŠ‚ç‚¹ä¹‹é—´éƒ½å­˜åœ¨ä¸€æ¡è¾¹ã€‚åŒä¸€ä¸ªèŠ‚ç‚¹åœ¨ä¸€æ¡è·¯å¾„åºåˆ—ä¸­ **è‡³å¤šå‡ºç°ä¸€æ¬¡** ã€‚è¯¥è·¯å¾„ **è‡³å°‘åŒ…å«ä¸€ä¸ª** èŠ‚ç‚¹ï¼Œä¸”ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹ã€‚

**è·¯å¾„å’Œ** æ˜¯è·¯å¾„ä¸­å„èŠ‚ç‚¹å€¼çš„æ€»å’Œã€‚

ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å›å…¶ **æœ€å¤§è·¯å¾„å’Œ** ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/exx1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [1,2,3]
è¾“å‡ºï¼š6
è§£é‡Šï¼šæœ€ä¼˜è·¯å¾„æ˜¯ 2 -> 1 -> 3 ï¼Œè·¯å¾„å’Œä¸º 2 + 1 + 3 = 6
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/exx2.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [-10,9,20,null,null,15,7]
è¾“å‡ºï¼š42
è§£é‡Šï¼šæœ€ä¼˜è·¯å¾„æ˜¯ 15 -> 20 -> 7 ï¼Œè·¯å¾„å’Œä¸º 15 + 20 + 7 = 42 
```

**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯ `[1, 3 * 104]`
- `-1000 <= Node.val <= 1000`

#### é¢˜è§£

**é“¾+ç›´å¾„ï¼ˆè·Ÿ 543. äºŒå‰æ ‘çš„ç›´å¾„ å¼‚æ›²åŒå·¥ï¼‰**

> è¿™ä¸ªé¢˜å’Œä¸Šä¸€é¢˜ 236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ ä¹Ÿæœ‰ç›¸ä¼¼ç‚¹ï¼Œå³**ååºéå†**ï¼Œè¿™ç§ç”±ä¸‹è€Œä¸Šæˆ–è€…åªå…³æ³¨å·¦å³å­æ ‘çš„é¢˜ï¼Œå°±è¯¥æƒ³åˆ°ååºéå†èƒ½ä¸èƒ½è¡Œã€‚

æœ¬é¢˜æœ‰ä¸¤ä¸ªå…³é”®æ¦‚å¿µï¼š

é“¾ï¼šä»ä¸‹é¢çš„æŸä¸ªèŠ‚ç‚¹ï¼ˆä¸ä¸€å®šæ˜¯å¶å­ï¼‰åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„ã€‚æŠŠè¿™æ¡é“¾çš„èŠ‚ç‚¹å€¼ä¹‹å’Œï¼Œä½œä¸º dfs çš„è¿”å›å€¼ã€‚å¦‚æœèŠ‚ç‚¹å€¼ä¹‹å’Œæ˜¯è´Ÿæ•°ï¼Œåˆ™è¿”å› 0ã€‚
ç›´å¾„ï¼šç­‰ä»·äºç”±ä¸¤æ¡ï¼ˆæˆ–è€…ä¸€æ¡ï¼‰é“¾æ‹¼æˆçš„è·¯å¾„ã€‚æˆ‘ä»¬æšä¸¾æ¯ä¸ª nodeï¼Œå‡è®¾ç›´å¾„åœ¨è¿™é‡Œã€Œæ‹å¼¯ã€ï¼Œä¹Ÿå°±æ˜¯è®¡ç®—ç”±å·¦å³ä¸¤æ¡ä»ä¸‹é¢çš„æŸä¸ªèŠ‚ç‚¹ï¼ˆä¸ä¸€å®šæ˜¯å¶å­ï¼‰åˆ° node çš„é“¾çš„èŠ‚ç‚¹å€¼ä¹‹å’Œï¼Œå»æ›´æ–°ç­”æ¡ˆçš„æœ€å¤§å€¼ã€‚
âš æ³¨æ„ï¼šdfs è¿”å›çš„æ˜¯é“¾çš„èŠ‚ç‚¹å€¼ä¹‹å’Œï¼Œä¸æ˜¯ç›´å¾„çš„èŠ‚ç‚¹å€¼ä¹‹å’Œã€‚

ç­”ç–‘
é—®ï¼šå¦‚æœæ‰€æœ‰èŠ‚ç‚¹å€¼éƒ½æ˜¯è´Ÿæ•°ï¼Œä»£ç ä¼šç®—å‡ºä»€ä¹ˆç»“æœï¼Ÿ

ç­”ï¼šåœ¨æ‰€æœ‰èŠ‚ç‚¹å€¼éƒ½ä¸ºè´Ÿæ•°çš„æƒ…å†µä¸‹ï¼Œä»£ç ä¸­çš„ ans = max(ans, l_val + r_val + node.val) ç­‰ä»·äº ans = max(ans, node.val)ï¼Œæˆ‘ä»¬æ±‚çš„æ˜¯æœ€å¤§èŠ‚ç‚¹å€¼ï¼ˆç»å¯¹å€¼æœ€å°çš„è´Ÿæ•°ï¼‰ã€‚è¿™æ˜¯ç¬¦åˆé¢˜ç›®è¦æ±‚çš„ï¼Œå› ä¸ºåœ¨æ‰€æœ‰èŠ‚ç‚¹å€¼éƒ½ä¸ºè´Ÿæ•°çš„æƒ…å†µä¸‹ï¼Œè·¯å¾„åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯æœ€ä¼˜çš„ï¼ˆæ¯•ç«ŸèŠ‚ç‚¹è¶Šå¤šï¼Œå…ƒç´ å’Œè¶Šå°ï¼‰ã€‚ç±»æ¯” 53. æœ€å¤§å­æ•°ç»„å’Œï¼Œå½“æ•°ç»„å…ƒç´ éƒ½æ˜¯è´Ÿæ•°çš„æ—¶å€™ï¼Œç­”æ¡ˆå°±æ˜¯ max(nums)ã€‚

```c++
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
 * };
 */
class Solution {
private:
    int ans = INT_MIN;  // æ³¨æ„è¿™é‡Œæ˜¯INT_MINè€Œä¸æ˜¯0
    int dfs(TreeNode *root) {
        // ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        if (root == nullptr) return 0;

        // é€’å½’
        int left_size = dfs(root->left);
        int right_size = dfs(root->right);
        ans = max(ans, left_size + right_size + root->val);

        return max(max(left_size, right_size) + root->val, 0);  // è¿™é‡Œå¯ä»¥ä¸0å–maxæ˜¯å› ä¸ºèƒ½å¤Ÿç›´æ¥ä¸é€‰è¿™ä¸ªèŠ‚ç‚¹
    }
public:
    int maxPathSum(TreeNode* root) {
        dfs(root);
        return ans;
    }
};
```



## å›¾è®º

### [200. å²›å±¿æ•°é‡](https://leetcode.cn/problems/number-of-islands/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªç”± `'1'`ï¼ˆé™†åœ°ï¼‰å’Œ `'0'`ï¼ˆæ°´ï¼‰ç»„æˆçš„çš„äºŒç»´ç½‘æ ¼ï¼Œè¯·ä½ è®¡ç®—ç½‘æ ¼ä¸­å²›å±¿çš„æ•°é‡ã€‚

å²›å±¿æ€»æ˜¯è¢«æ°´åŒ…å›´ï¼Œå¹¶ä¸”æ¯åº§å²›å±¿åªèƒ½ç”±æ°´å¹³æ–¹å‘å’Œ/æˆ–ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿æ¥å½¢æˆã€‚

æ­¤å¤–ï¼Œä½ å¯ä»¥å‡è®¾è¯¥ç½‘æ ¼çš„å››æ¡è¾¹å‡è¢«æ°´åŒ…å›´ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šgrid = [
  ["1","1","1","1","0"],
  ["1","1","0","1","0"],
  ["1","1","0","0","0"],
  ["0","0","0","0","0"]
]
è¾“å‡ºï¼š1
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šgrid = [
  ["1","1","0","0","0"],
  ["1","1","0","0","0"],
  ["0","0","1","0","0"],
  ["0","0","0","1","1"]
]
è¾“å‡ºï¼š3
```

**æç¤ºï¼š**

- `m == grid.length`
- `n == grid[i].length`
- `1 <= m, n <= 300`
- `grid[i][j]` çš„å€¼ä¸º `'0'` æˆ– `'1'`

#### é¢˜è§£

åŸåœ°ä¿®æ”¹gridï¼Œå°†è®¿é—®è¿‡çš„è®¾ç½®ä¸º'2'ï¼Œæœªè®¿é—®è¿‡çš„è®¾ç½®ä¸º'1'ï¼Œå¯ä»¥ä¼˜åŒ–æ‰visitedçŸ©é˜µã€‚

1. éå†gridï¼Œå¦‚æœgrid[i][j] == '1'è¯´æ˜æ‰¾åˆ°äº†ä¸€ä¸ªæ–°çš„å²›ï¼Œans++ï¼›
2. dfs/bfséå†è¿™ä¸ªæ–°çš„å²›ï¼Œå°†å…¶è®¾ç½®ä¸º2ï¼Œè¡¨ç¤ºå·²ç»è®¿é—®è¿‡ï¼›
3. return ansï¼›

```c++
class Solution {
private:
    int dir[4][2] = {1, 0, -1, 0, 0, 1, 0, -1};
    void dfs(vector<vector<char>>& grid, int x, int y) {
        for (int i = 0; i < 4; i ++ ) {
            int next_x = x + dir[i][0];
            int next_y = y + dir[i][1];
            if (next_x < 0 || next_x >= grid.size() || next_y < 0 || next_y >= grid[0].size() || grid[next_x][next_y] != '1') continue;
            
            if (grid[next_x][next_y] == '1') {
                grid[next_x][next_y] = '2';
                dfs(grid, next_x, next_y);
            }
        }
    }
public:
    int numIslands(vector<vector<char>>& grid) {
        int ans = 0;
        for (int i = 0; i < grid.size(); i ++ ) {
            for (int j = 0; j < grid[0].size(); j ++ ) {
                if (grid[i][j] == '1') {
                    grid[i][j] = '2';
                    ans++;
                    dfs(grid, i, j);
                }
            }
        }

        return ans;
    }
};
```

### [994. è…çƒ‚çš„æ©˜å­](https://leetcode.cn/problems/rotting-oranges/)

#### é¢˜ç›®æè¿°

åœ¨ç»™å®šçš„ `m x n` ç½‘æ ¼ `grid` ä¸­ï¼Œæ¯ä¸ªå•å…ƒæ ¼å¯ä»¥æœ‰ä»¥ä¸‹ä¸‰ä¸ªå€¼ä¹‹ä¸€ï¼š

- å€¼ `0` ä»£è¡¨ç©ºå•å…ƒæ ¼ï¼›
- å€¼ `1` ä»£è¡¨æ–°é²œæ©˜å­ï¼›
- å€¼ `2` ä»£è¡¨è…çƒ‚çš„æ©˜å­ã€‚

æ¯åˆ†é’Ÿï¼Œè…çƒ‚çš„æ©˜å­ **å‘¨å›´ 4 ä¸ªæ–¹å‘ä¸Šç›¸é‚»** çš„æ–°é²œæ©˜å­éƒ½ä¼šè…çƒ‚ã€‚

è¿”å› *ç›´åˆ°å•å…ƒæ ¼ä¸­æ²¡æœ‰æ–°é²œæ©˜å­ä¸ºæ­¢æ‰€å¿…é¡»ç»è¿‡çš„æœ€å°åˆ†é’Ÿæ•°ã€‚å¦‚æœä¸å¯èƒ½ï¼Œè¿”å› `-1`* ã€‚

**ç¤ºä¾‹ 1ï¼š**

 **<img src="./assets/oranges.png" alt="img" style="zoom:50%;" />**

```
è¾“å…¥ï¼šgrid = [[2,1,1],[1,1,0],[0,1,1]]
è¾“å‡ºï¼š4
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šgrid = [[2,1,1],[0,1,1],[1,0,1]]
è¾“å‡ºï¼š-1
è§£é‡Šï¼šå·¦ä¸‹è§’çš„æ©˜å­ï¼ˆç¬¬ 2 è¡Œï¼Œ ç¬¬ 0 åˆ—ï¼‰æ°¸è¿œä¸ä¼šè…çƒ‚ï¼Œå› ä¸ºè…çƒ‚åªä¼šå‘ç”Ÿåœ¨ 4 ä¸ªæ–¹å‘ä¸Šã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šgrid = [[0,2]]
è¾“å‡ºï¼š0
è§£é‡Šï¼šå› ä¸º 0 åˆ†é’Ÿæ—¶å·²ç»æ²¡æœ‰æ–°é²œæ©˜å­äº†ï¼Œæ‰€ä»¥ç­”æ¡ˆå°±æ˜¯ 0 ã€‚
```

#### é¢˜è§£

1. è®¾ç½®ä¸€ä¸ªå…¨å±€é˜Ÿåˆ—ï¼Œå…ˆè¿›è¡Œä¸¤é‡forå¾ªç¯æ‰¾åˆ°æ‰€æœ‰â€œæœ¬æ¥å°±è…çƒ‚çš„æ©˜å­â€ï¼ŒåŠ å…¥é˜Ÿåˆ—ï¼›
2. bfsä»¥æ‰€æœ‰â€œæœ¬æ¥å°±è…çƒ‚çš„æ©˜å­â€ä¸ºä¸­å¿ƒå¼€å§‹è”“å»¶ï¼Œè¦æ±‚æ¯ä¸€è½®bfséƒ½éœ€è¦è·å–que_sizeï¼Œç„¶åä¸€æ¬¡æ€§éå†å®Œï¼ˆå› ä¸ºæ©˜å­æ˜¯ä»¥â€œæœ¬æ¥å°±è…çƒ‚çš„æ©˜å­â€ä¸ºä¸­å¿ƒä¸€åœˆä¸€åœˆè…çƒ‚çš„ï¼‰ï¼›
3. å†è¿›è¡Œä¸¤é‡forå¾ªç¯æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ–°é²œæ©˜å­ï¼Œå¦‚æœæœ‰å°±return -1ï¼Œæ²¡æœ‰å°±return ansï¼›

```c++
class Solution {
private:
    int ans = -1;
    int row, col;
    int dir[4][2] = {1, 0, -1, 0, 0, 1, 0, -1};
    queue<pair<int, int>> que;
    
    void bfs(vector<vector<int>>& grid) {
        while (!que.empty()) {
            int que_size = que.size();
            ans++;
            // printf("ans:%d, que_size:%d\n", ans, que_size);
            while (que_size--) {  // æ©˜å­æ˜¯ä¸€åœˆä¸€åœˆè…çƒ‚çš„ï¼Œå› æ­¤
                pair<int, int> node = que.front(); que.pop();
                // printf("%d %d\n", node.first, node.second);
                for (int i = 0; i < 4; i ++ ) {
                    int nextx = node.first + dir[i][0];
                    int nexty = node.second + dir[i][1];
                    if (nextx < 0 || nextx >= row || nexty < 0 || nexty >= col || grid[nextx][nexty] != 1) continue;

                    grid[nextx][nexty] = 2;
                    que.push({nextx, nexty});
                }
            }
            
        }
    }
public:
    int orangesRotting(vector<vector<int>>& grid) {
        this->row = grid.size(), this->col = grid[0].size();
        // å¼€å§‹å…ˆä¿å­˜æ‰€æœ‰è…çƒ‚æ©˜å­çš„ä½ç½®ï¼Œç„¶åå†bfsï¼ŒåŒæ—¶å¼€å§‹è”“å»¶è…çƒ‚ 
        for (int i = 0; i < row; i ++ ) {
            for (int j = 0; j < col; j ++ ) {
                if (grid[i][j] == 2) {
                    que.push({i, j});  
                }
            }
        }
        bfs(grid);
        // å†æ£€éªŒä¸€éï¼Œå¦‚æœæœ‰æ–°é²œæ©˜å­ï¼Œè¯´æ˜æœ‰æ–°é²œæ©˜å­è”“å»¶ä¸åˆ°ï¼Œåˆ™è¿”å›-1
        for (int i = 0; i < row; i ++ ) {
            for (int j = 0; j < col; j ++ ) {
                if (grid[i][j] == 1) return -1;
            }
        }
        return ans == -1? 0 : ans;
    }
};
```

### [207. è¯¾ç¨‹è¡¨](https://leetcode.cn/problems/course-schedule/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ä½ è¿™ä¸ªå­¦æœŸå¿…é¡»é€‰ä¿® `numCourses` é—¨è¯¾ç¨‹ï¼Œè®°ä¸º `0` åˆ° `numCourses - 1` ã€‚

åœ¨é€‰ä¿®æŸäº›è¯¾ç¨‹ä¹‹å‰éœ€è¦ä¸€äº›å…ˆä¿®è¯¾ç¨‹ã€‚ å…ˆä¿®è¯¾ç¨‹æŒ‰æ•°ç»„ `prerequisites` ç»™å‡ºï¼Œå…¶ä¸­ `prerequisites[i] = [ai, bi]` ï¼Œè¡¨ç¤ºå¦‚æœè¦å­¦ä¹ è¯¾ç¨‹ `ai` åˆ™ **å¿…é¡»** å…ˆå­¦ä¹ è¯¾ç¨‹ `bi` ã€‚

- ä¾‹å¦‚ï¼Œå…ˆä¿®è¯¾ç¨‹å¯¹ `[0, 1]` è¡¨ç¤ºï¼šæƒ³è¦å­¦ä¹ è¯¾ç¨‹ `0` ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ `1` ã€‚

è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ ï¼Ÿå¦‚æœå¯ä»¥ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0]]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å®Œæˆè¯¾ç¨‹ 0 ã€‚è¿™æ˜¯å¯èƒ½çš„ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0],[0,1]]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 0 ï¼›å¹¶ä¸”å­¦ä¹ è¯¾ç¨‹ 0 ä¹‹å‰ï¼Œä½ è¿˜åº”å…ˆå®Œæˆè¯¾ç¨‹ 1 ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚
```

**æç¤ºï¼š**

- `1 <= numCourses <= 2000`
- `0 <= prerequisites.length <= 5000`
- `prerequisites[i].length == 2`
- `0 <= ai, bi < numCourses`
- `prerequisites[i]` ä¸­çš„æ‰€æœ‰è¯¾ç¨‹å¯¹ **äº’ä¸ç›¸åŒ**

#### é¢˜è§£

> é¢˜ç›®æŠ½è±¡ï¼šç»™å®šä¸€ä¸ªæœ‰å‘å›¾ï¼Œæ£€æŸ¥å›¾ä¸­æ˜¯å¦æœ‰ç¯ã€‚

å‡è®¾å›¾ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼Œ

 <img src="./assets/1731932427-qCTQYV-lc207.png" alt="lc207.png" style="zoom: 25%;" />

å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ xï¼Œéƒ½å®šä¹‰ä¸‰ç§é¢œè‰²å€¼ï¼ˆçŠ¶æ€å€¼ï¼‰ï¼š

0ï¼šèŠ‚ç‚¹ x å°šæœªè¢«è®¿é—®åˆ°ã€‚
1ï¼šèŠ‚ç‚¹ x æ­£åœ¨è®¿é—®ä¸­ï¼Œdfs(x) å°šæœªç»“æŸã€‚
2ï¼šèŠ‚ç‚¹ x å·²ç»å®Œå…¨è®¿é—®å®Œæ¯•ï¼Œdfs(x) å·²è¿”å›ã€‚

âš è¯¯åŒºï¼šä¸èƒ½åªç”¨ä¸¤ç§çŠ¶æ€è¡¨ç¤ºèŠ‚ç‚¹ã€Œæ²¡æœ‰è®¿é—®è¿‡ã€å’Œã€Œè®¿é—®è¿‡ã€ã€‚ä¾‹å¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬å…ˆ dfs(0)ï¼Œå† dfs(1)ï¼Œæ­¤æ—¶ 1 çš„é‚»å±… 0 å·²ç»è®¿é—®è¿‡ï¼Œä½†è¿™å¹¶ä¸èƒ½è¡¨ç¤ºæ­¤æ—¶å°±æ‰¾åˆ°äº†ç¯ã€‚

ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œå¯ä»¥æ—‹è½¬ä¸€ä¸‹å°†å¾—åˆ°ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼ˆæ­£å¸¸æ˜¯æ— ç¯çš„ï¼‰ï¼Œ

 <img src="./assets/image-20250413161312096.png" alt="image-20250413161312096" style="zoom:35%;" />

ç®—æ³•å°±æ˜¯ä»ä¸Šå¾€ä¸‹è¿›è¡Œdfsï¼Œç„¶åå°†dfsä¸­æš‚å­˜çš„èŠ‚ç‚¹ï¼ˆå½“å‰ï¼‰è®¾ç½®ä¸º1ï¼Œå°†dfsæ·±å±‚å·²ç»éå†å®Œè¿”å›çš„è®¾ç½®ä¸º2ã€‚

å¦‚æœdfsè¿‡ç¨‹ä¸­ä¼šé‡åˆ°ä¸‹åˆ—å‡ ç§æƒ…å†µï¼š

- ç¢°åˆ°äº†1ï¼Œè¯´æ˜å‡ºç°äº†ç¯ï¼Œreturn falseï¼›
- ç¢°åˆ°äº†2ï¼Œè¯´æ˜æ·±å±‚èŠ‚ç‚¹å·²ç»éå†è¿‡äº†ï¼Œä»¥è¯¥èŠ‚ç‚¹ç»“æŸçš„è·¯å¾„ä¸­æ— ç¯ï¼Œç»§ç»­éå†æˆ–returnå³å¯ï¼›
- ç¢°åˆ°äº†0ï¼Œè¯´æ˜è¯¥èŠ‚ç‚¹è¿˜æ²¡éå†è¿‡ï¼Œéœ€è¦è¿›è¡Œæ›´æ·±ä¸€å±‚çš„dfsï¼›

> **è¦ç‚¹ï¼š**dfsä¸€å®šè¦ä¼ åœ°å€ï¼Œå¦åˆ™ä¼šè¶…æ—¶ã€‚

```c++
class Solution {
private:
    bool dfs(vector<vector<int>> &g, vector<int> &colors, int x) {  // ä»¥xèŠ‚ç‚¹ä¸ºèµ·ç‚¹éå†ï¼Œå¯»æ‰¾xèŠ‚ç‚¹æ‰€åœ¨çš„å›¾ä¸­æ˜¯å¦æœ‰â€œç¯â€
        colors[x] = 1;
        for (int y : g[x]) {  // æŸ¥çœ‹è¯¾ç¨‹xçš„å‰ç½®è¯¾ç¨‹
            if (colors[y] == 1 || colors[y] == 0 && dfs(g, colors, y)) {
                return true;  // æœ‰ç¯
            }
        }
        colors[x] = 2;  // x å®Œå…¨è®¿é—®å®Œæ¯•
        return false;  // æ²¡æœ‰æ‰¾åˆ°ç¯
    }
public:
    bool canFinish(int numCourses, vector<vector<int>>& prerequisites) {
        vector<vector<int>> g(numCourses);  // é‚»æ¥è¡¨
        vector<int> colors(numCourses);
        for (vector<int> p : prerequisites) {
            g[p[0]].push_back(p[1]);  // å­¦ä¹ p[0]ä¹‹å‰ï¼Œéœ€è¦å…ˆå­¦ä¹ å‰ç½®è¯¾ç¨‹p[1]
        }

        for (int i = 0; i < numCourses; i ++ ) {
            if (colors[i] == 0 && dfs(g, colors, i)) {
                return false;
            }
        }

        return true;
    }
};
```

### [208. å®ç° Trie (å‰ç¼€æ ‘)](https://leetcode.cn/problems/implement-trie-prefix-tree/)ğŸŒŸ

#### é¢˜ç›®æè¿°

**[Trie](https://baike.baidu.com/item/å­—å…¸æ ‘/9825209?fr=aladdin)**ï¼ˆå‘éŸ³ç±»ä¼¼ "try"ï¼‰æˆ–è€…è¯´ **å‰ç¼€æ ‘** æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œç”¨äºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢å­—ç¬¦ä¸²æ•°æ®é›†ä¸­çš„é”®ã€‚è¿™ä¸€æ•°æ®ç»“æ„æœ‰ç›¸å½“å¤šçš„åº”ç”¨æƒ…æ™¯ï¼Œä¾‹å¦‚è‡ªåŠ¨è¡¥å…¨å’Œæ‹¼å†™æ£€æŸ¥ã€‚

è¯·ä½ å®ç° Trie ç±»ï¼š

- `Trie()` åˆå§‹åŒ–å‰ç¼€æ ‘å¯¹è±¡ã€‚
- `void insert(String word)` å‘å‰ç¼€æ ‘ä¸­æ’å…¥å­—ç¬¦ä¸² `word` ã€‚
- `boolean search(String word)` å¦‚æœå­—ç¬¦ä¸² `word` åœ¨å‰ç¼€æ ‘ä¸­ï¼Œè¿”å› `true`ï¼ˆå³ï¼Œåœ¨æ£€ç´¢ä¹‹å‰å·²ç»æ’å…¥ï¼‰ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
- `boolean startsWith(String prefix)` å¦‚æœä¹‹å‰å·²ç»æ’å…¥çš„å­—ç¬¦ä¸² `word` çš„å‰ç¼€ä¹‹ä¸€ä¸º `prefix` ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥
["Trie", "insert", "search", "search", "startsWith", "insert", "search"]
[[], ["apple"], ["apple"], ["app"], ["app"], ["app"], ["app"]]
è¾“å‡º
[null, null, true, false, true, null, true]

è§£é‡Š
Trie trie = new Trie();
trie.insert("apple");
trie.search("apple");   // è¿”å› True
trie.search("app");     // è¿”å› False
trie.startsWith("app"); // è¿”å› True
trie.insert("app");
trie.search("app");     // è¿”å› True
```

**æç¤ºï¼š**

- `1 <= word.length, prefix.length <= 2000`
- `word` å’Œ `prefix` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- `insert`ã€`search` å’Œ `startsWith` è°ƒç”¨æ¬¡æ•° **æ€»è®¡** ä¸è¶…è¿‡ `3 * 104` æ¬¡

#### é¢˜è§£

> æ ¸å¿ƒæ€æƒ³ï¼š26å‰æ ‘ï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰26ä¸ªæ–¹å‘å¯ä»¥å»ºç«‹å­æ ‘ï¼‰ï¼›

insertçš„è¿‡ç¨‹ï¼Œç›¸å½“äºå»ºç«‹ä¸€ä¸ª26å‰æ ‘çš„ä¸€æ¡è·¯å¾„ï¼Œæ³¨æ„ï¼šåœ¨æ­¤æ ‘ä¸­æ²¡æœ‰åˆ†æ”¯ç»“æœï¼Œåªæœ‰ä¸€æ¡é“¾è·¯ã€‚

```c++
struct Node {
    Node *son[26]{};
    bool end = false;
};

class Trie {
    Node *root = new Node();

    int find(string word) {
        Node *cur = root;
        for (char c : word) {
            c -= 'a';
            if (cur->son[c] == nullptr) {
                return 0;  // è¯´æ˜ä¸insertçš„å‰ç¼€å­—ç¬¦å¯¹ä¸ä¸Š
            }
            cur = cur->son[c];
        }

        // åˆ°æ­¤ä¸ºæ­¢ï¼Œè‡³å°‘å‰ç¼€æ˜¯åŒ¹é…çš„
        // å¦‚æœcur->end==trueï¼Œè¯´æ˜å‰ç¼€å°±æ˜¯insertå­—ç¬¦ï¼ˆé•¿åº¦ç›¸åŒï¼‰ï¼Œåˆ™è¿”å›searchåŒ¹é…ç»“æœï¼›
        // å¦‚æœfalseï¼Œè¯´æ˜å‰ç¼€é•¿åº¦ < insertå­—ç¬¦ï¼Œè¿”å›çš„æ˜¯å‰ç¼€åŒ¹é…ç»“æœï¼›
        return cur->end ? 2 : 1;
    }
public:
    Trie() {}
    
    void insert(string word) {
        Node *cur = root;
        for (char c : word) {
            c -= 'a';
            if (cur->son[c] == nullptr) {
                cur->son[c] = new Node();
            }
            cur = cur->son[c];
        }
        cur->end = true;
    }
    
    bool search(string word) {
        return find(word) == 2 ? true : false;
    }
    
    bool startsWith(string prefix) {
        return find(prefix) ? true : false;  // æ³¨æ„è¿™é‡Œfindç»“æœä¸º1å’Œ2éƒ½å¯ä»¥
    }
};

/**
 * Your Trie object will be instantiated and called as such:
 * Trie* obj = new Trie();
 * obj->insert(word);
 * bool param_2 = obj->search(word);
 * bool param_3 = obj->startsWith(prefix);
 */
```

## å›æº¯

### [46. å…¨æ’åˆ—](https://leetcode.cn/problems/permutations/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ `nums` ï¼Œè¿”å›å…¶ *æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—* ã€‚ä½ å¯ä»¥ **æŒ‰ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0,1]
è¾“å‡ºï¼š[[0,1],[1,0]]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1]
è¾“å‡ºï¼š[[1]]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 6`
- `-10 <= nums[i] <= 10`
- `nums` ä¸­çš„æ‰€æœ‰æ•´æ•° **äº’ä¸ç›¸åŒ**

#### é¢˜è§£

**ç»å…¸â€œæ’åˆ—é—®é¢˜â€**

ä¸â€œç»„åˆâ€é—®é¢˜ä¸åŒï¼Œæ’åˆ—é—®é¢˜ä¸€èˆ¬åœ¨index >= nums.size()æ—¶ï¼Œå°†pathæ·»åŠ åˆ°ansï¼›

- â€œç»„åˆâ€é—®é¢˜ï¼šindexä¸€èˆ¬è¡¨ç¤ºè¯¥ä»å“ªé‡Œé€‰æ‹©numsä¸­çš„æ•°ï¼ˆâ€œé€‰è¯å¡«ç©ºâ€ä¸­ï¼Œè¡¨ç¤ºé€‰å“ªä¸ªè¯ï¼‰ï¼›
- â€œæ’åˆ—â€é—®é¢˜ï¼šindexè¡¨ç¤ºè¯¥å¡«pathä¸­çš„å“ªä¸ªä½ç½®ï¼ˆâ€œé€‰è¯å¡«ç©ºâ€ä¸­ï¼Œè¡¨ç¤ºè¯¥å¾€å“ªä¸ªç©ºä¸­å¡«ï¼‰ï¼›

```c++
class Solution {
private:
    vector<vector<int>> ans;
    vector<int> path;

    void backTracking(vector<int>& nums, vector<bool>& used) {
        // 1 ç»ˆæ­¢åˆ¤æ–­
        if (path.size() >= nums.size()) {
            ans.push_back(path);
        }

        // 2 é€’å½’
        for (int i = 0; i < nums.size(); i ++ ) {
            if (!used[i]) {
                path.push_back(nums[i]);
                used[i] = true;
                backTracking(nums, used);
                // å›æº¯
                path.pop_back();
                used[i] = false;
            }
        }
    }
public:
    vector<vector<int>> permute(vector<int>& nums) {
        vector<bool> used(nums.size(), false);
        backTracking(nums, used);
        return ans;
    }
};
```

### [78. å­é›†](https://leetcode.cn/problems/subsets/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ•°ç»„ä¸­çš„å…ƒç´  **äº’ä¸ç›¸åŒ** ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›è§£é›†ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[[],[1],[2],[1,2],[3],[1,3],[2,3],[1,2,3]]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0]
è¾“å‡ºï¼š[[],[0]]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 10`
- `-10 <= nums[i] <= 10`
- `nums` ä¸­çš„æ‰€æœ‰å…ƒç´  **äº’ä¸ç›¸åŒ**

#### é¢˜è§£

ç”±äºè¦æ±‚äº’ä¸é‡å¤ï¼Œå› æ­¤ç”¨startindexæ¥æ ‡è®°è®¿é—®åˆ°ç¬¬å‡ ä¸ªnumï¼Œè®¿é—®è¿‡çš„numä¸å†é‡å¤ä½¿ç”¨ï¼›

æ³¨æ„ï¼Œä¸ä¹‹å‰çš„é¢˜ä¸åŒï¼Œè¿™ç§â€œç»„åˆâ€ç±»å‹çš„é¢˜åœ¨æ¯ä¸€é‡é€’å½’ä¸­éƒ½éœ€è¦pushä¸€æ¬¡pathï¼Œè€Œéè¾¾åˆ°ç»ˆæ­¢æ¡ä»¶æ—¶æ‰pushï¼ˆå½“ç„¶å¯ä»¥ç”¨ç»ˆæ­¢æ¡ä»¶æ¥returnï¼‰ï¼›

```c++
class Solution {
private:
    vector<vector<int>> ans;
    vector<int> path;
public:
    void backTracking(vector<int>& nums, int index) {
        ans.push_back(path);
        // 1 ç»ˆæ­¢åˆ¤æ–­
        if (index >= nums.size()) {
            return;
        }

        // 2 é€’å½’
        for (int i = index; i < nums.size(); i ++ ) {
            path.push_back(nums[i]);
            backTracking(nums, i + 1);
            path.pop_back();
        }
    }
    vector<vector<int>> subsets(vector<int>& nums) {
        backTracking(nums, 0);
        return ans;
    }
};
```

### [17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ](https://leetcode.cn/problems/letter-combinations-of-a-phone-number/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— `2-9` çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ã€‚

ç»™å‡ºæ•°å­—åˆ°å­—æ¯çš„æ˜ å°„å¦‚ä¸‹ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ã€‚æ³¨æ„ 1 ä¸å¯¹åº”ä»»ä½•å­—æ¯ã€‚

 ![img](./assets/200px-telephone-keypad2svg.png)

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šdigits = "23"
è¾“å‡ºï¼š["ad","ae","af","bd","be","bf","cd","ce","cf"]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šdigits = ""
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šdigits = "2"
è¾“å‡ºï¼š["a","b","c"]
```

**æç¤ºï¼š**

- `0 <= digits.length <= 4`
- `digits[i]` æ˜¯èŒƒå›´ `['2', '9']` çš„ä¸€ä¸ªæ•°å­—ã€‚

#### é¢˜è§£

1. å…ˆç”¨ä¸€ä¸ªconst string lettermap[10]å°†æ•°å­—ä¸å­—æ¯åšæ˜ å°„ï¼›
2. åšå­—ç¬¦ä¸²ä¹‹é—´çš„â€œç»„åˆé—®é¢˜â€æ±‚è§£ï¼›

```c++
class Solution {
private:
    const string letterMap[10] = {
        "", // 0
        "", // 1
        "abc",  // 2
        "def",  // 3
        "ghi",  // 4
        "jkl",  // 5
        "mno",  // 6
        "pqrs",  // 7
        "tuv",  // 8
        "wxyz",  // 9
    };
    vector<string> ans;
    string path = "";
public:
    void backTracking(const string& digits, int curindex) {
        // 1 ç»ˆæ­¢åˆ¤æ–­
        if (path.size() == digits.size()) {
            if (digits != "") ans.push_back(path);  // è¿™ä¸ªåˆ¤æ–­å¾ˆé‡è¦
            return;
        }

        // 2 é€’å½’
        string curstr = letterMap[digits[curindex] - '0'];
        for (char s:curstr) {
            path += s;
            backTracking(digits, curindex + 1);
            path.pop_back();
        }
    }

    vector<string> letterCombinations(string digits) {
        backTracking(digits, 0);
        return ans;
    }
};
```

### [39. ç»„åˆæ€»å’Œ](https://leetcode.cn/problems/combination-sum/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ª **æ— é‡å¤å…ƒç´ ** çš„æ•´æ•°æ•°ç»„ `candidates` å’Œä¸€ä¸ªç›®æ ‡æ•´æ•° `target` ï¼Œæ‰¾å‡º `candidates` ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•° `target` çš„ æ‰€æœ‰ **ä¸åŒç»„åˆ** ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›è¿™äº›ç»„åˆã€‚

`candidates` ä¸­çš„ **åŒä¸€ä¸ª** æ•°å­—å¯ä»¥ **æ— é™åˆ¶é‡å¤è¢«é€‰å–** ã€‚å¦‚æœè‡³å°‘ä¸€ä¸ªæ•°å­—çš„è¢«é€‰æ•°é‡ä¸åŒï¼Œåˆ™ä¸¤ç§ç»„åˆæ˜¯ä¸åŒçš„ã€‚ 

å¯¹äºç»™å®šçš„è¾“å…¥ï¼Œä¿è¯å’Œä¸º `target` çš„ä¸åŒç»„åˆæ•°å°‘äº `150` ä¸ªã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šcandidates = [2,3,6,7], target = 7
è¾“å‡ºï¼š[[2,2,3],[7]]
è§£é‡Šï¼š
2 å’Œ 3 å¯ä»¥å½¢æˆä¸€ç»„å€™é€‰ï¼Œ2 + 2 + 3 = 7 ã€‚æ³¨æ„ 2 å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚
7 ä¹Ÿæ˜¯ä¸€ä¸ªå€™é€‰ï¼Œ 7 = 7 ã€‚
ä»…æœ‰è¿™ä¸¤ç§ç»„åˆã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥: candidates = [2,3,5], target = 8
è¾“å‡º: [[2,2,2,2],[2,3,3],[3,5]]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥: candidates = [2], target = 1
è¾“å‡º: []
```

**æç¤ºï¼š**

- `1 <= candidates.length <= 30`
- `2 <= candidates[i] <= 40`
- `candidates` çš„æ‰€æœ‰å…ƒç´  **äº’ä¸ç›¸åŒ**
- `1 <= target <= 40`

#### é¢˜è§£

**æ³¨æ„æœ¬é¢˜å’Œ[77.ç»„åˆ (opens new window)](https://programmercarl.com/0077.ç»„åˆ.html)ã€[216.ç»„åˆæ€»å’ŒIII (opens new window)](https://programmercarl.com/0216.ç»„åˆæ€»å’ŒIII.html)çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼šæœ¬é¢˜å…ƒç´ ä¸ºå¯é‡å¤é€‰å–çš„**ã€‚

è¿™å°±æ¶‰åŠåˆ°äº†ä¸¤ä¸ªé—®é¢˜ï¼š

1. æ— é™å–ï¼Œå¯¼è‡´æ— æ³•ç»ˆæ­¢ï¼Œè¿è¡Œæ—¶é—´è¿‡é•¿ï¼›

   **è§£å†³æ–¹æ¡ˆï¼š**å‰ªæï¼Œå¦‚æœsum>targetå°±return;

2. éšä¾¿å–ä¼šå¯¼è‡´sumç›¸åŒä½†æ˜¯é¡ºåºä¸åŒï¼Œä»è€Œé‡å¤pushï¼Œå¦‚[2,2,3],[2,3,2],[3,2,2]è¿™ç§æƒ…å†µï¼›

   è§£å†³æ–¹æ¡ˆï¼šå…ˆå¯¹candidatesæ’åºï¼Œç„¶åå›ºå®šè®¿é—®çš„é¡ºåºï¼Œåªæœ‰if (tmp.empty() || c >= tmp.back())æ—¶æ‰èƒ½pushï¼›

```c++
class Solution {
private:
    vector<vector<int>> ans;
    vector<int> tmp;
public:
    void backTracking(vector<int>& candidates, int curnum, int target) {
        // 1 ç»ˆæ­¢åˆ¤æ–­
        if (curnum == target) {
            ans.push_back(tmp);
            return;
        } else if (curnum > target) return;

        // 2 é€’å½’
        for (int c:candidates) {
            // å›ºå®šé¡ºåºï¼Œå°±ä¸ä¼šå‡ºç°ç±»ä¼¼[2,2,3],[2,3,2],[3,2,2]è¿™æ ·çš„é‡å¤åºåˆ—
            if (tmp.empty() || c >= tmp.back()) {
                tmp.push_back(c);
                backTracking(candidates, curnum + c, target);
                tmp.pop_back();
            }
        }
    }

    vector<vector<int>> combinationSum(vector<int>& candidates, int target) {
      	sort(candidates.begin(), candidates.end());
        backTracking(candidates, 0, target);
        return ans;
    }
};
```

### [22. æ‹¬å·ç”Ÿæˆ](https://leetcode.cn/problems/generate-parentheses/)ğŸŒŸ

#### é¢˜ç›®æè¿°

æ•°å­— `n` ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” **æœ‰æ•ˆçš„** æ‹¬å·ç»„åˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 3
è¾“å‡ºï¼š["((()))","(()())","(())()","()(())","()()()"]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 1
è¾“å‡ºï¼š["()"]
```

**æç¤ºï¼š**

- `1 <= n <= 8`

#### é¢˜è§£

é€šè¿‡è·Ÿè¸ªåˆ°ç›®å‰ä¸ºæ­¢æ”¾ç½®çš„å·¦æ‹¬å·å’Œå³æ‹¬å·çš„æ•°ç›®ï¼Œä½¿å¾—åªåœ¨åºåˆ—ä»ç„¶ä¿æŒæœ‰æ•ˆæ—¶æ‰æ·»åŠ  â€˜(â€™ æˆ– â€˜)â€™ï¼š

- å¦‚æœå·¦æ‹¬å·æ•°é‡ä¸å¤§äº *n*ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾ä¸€ä¸ªå·¦æ‹¬å·ã€‚
- å¦‚æœå³æ‹¬å·æ•°é‡å°äºå·¦æ‹¬å·çš„æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾ä¸€ä¸ªå³æ‹¬å·ã€‚

```c++
class Solution {
private:
    vector<string> ans;
    string temp;
    void dfs(int start_num, int end_num, int n) {
        // 1 ç»ˆæ­¢åˆ¤æ–­
        if (temp.size() == 2*n) {
            ans.push_back(temp);
            return;
        }
        // 2 é€’å½’
        if (start_num < n) {
            temp.push_back('(');
            dfs(start_num + 1, end_num, n);
            temp.pop_back();  // å›æº¯
        }
        if (end_num < start_num) {
            temp.push_back(')');
            dfs(start_num, end_num + 1, n);
            temp.pop_back();  // å›æº¯
        }
    }
public:
    vector<string> generateParenthesis(int n) {
        dfs(0, 0, n);
        return ans;
    }
};
```

### [79. å•è¯æœç´¢](https://leetcode.cn/problems/word-search/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ª `m x n` äºŒç»´å­—ç¬¦ç½‘æ ¼ `board` å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ `word` ã€‚å¦‚æœ `word` å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/word2.jpg" alt="img" style="zoom: 67%;" />

```
è¾“å…¥ï¼šboard = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "ABCCED"
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/word-1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šboard = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "SEE"
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 3ï¼š**

 <img src="./assets/word3.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šboard = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "ABCB"
è¾“å‡ºï¼šfalse
```

#### é¢˜è§£

æ€è·¯ï¼š

1. éå†boardä¸­çš„æ¯ä¸€ä¸ªç‚¹ï¼Œå¦‚æœè¯¥ç‚¹ == word[0]è¯´æ˜èµ·å§‹ä½ç½®åŒ¹é…ï¼Œè¿›å…¥dfsï¼›

2. æˆ‘ä»¬åŒ¹é…çš„æ˜¯ï¼šå¦‚æœåŒ¹é…ä¸Šçš„å­—ç¬¦é•¿åº¦==wordé•¿åº¦ï¼Œè¯´æ˜æœç´¢æˆåŠŸï¼›

   å› æ­¤ç»ˆæ­¢åˆ¤æ–­å¯ä»¥å†™ä¸ºï¼šï¼ˆindex == word.size() || ansï¼‰ï¼›

3. å‘å››ä¸ªæ–¹å‘è¿›è¡Œé€’å½’ï¼š

   1. å¦‚æœè¶Šç•Œï¼Œåˆ™continueï¼›
   2. å¦‚æœä¸‹ä¸€ä¸ªä½ç½®èƒ½å¤ŸåŒ¹é…ä¸Šï¼ˆboard\[next_x][next_y] == word[index]ï¼‰ï¼Œåˆ™è¿›è¡Œæ›´æ·±ä¸€å±‚çš„dfsï¼Œå¹¶index++ï¼›

ğŸŒŸ**æ³¨æ„ä¸Šé¢åªæ˜¯å¤§æ¦‚æ€è·¯ï¼Œè¯¥é¢˜ç›®éœ€è¦è¿›è¡Œå¾ˆå¤šä¼˜åŒ–ï¼Œå¦åˆ™å¾ˆå®¹æ˜“è¶…æ—¶ï¼š**

> ç‰¹æ®Šå®¹æ˜“è¶…æ—¶ç”¨ä¾‹ï¼š
>
> board =
>
> [["A","A","a","a","A","a"],
>
>  ["a","a","a","A","A","a"],
>
>  ["A","a","A","a","a","A"]]
>
> word = "AAaaAAaAaaAaAaA"

1. å‰ªæğŸŒŸï¼šï¼ˆæœ¬é¢˜ç›®åªè¦æœåˆ°ä¸€æ¡è·¯å¾„å°±å¯ä»¥å…¨éƒ¨ç»ˆæ­¢ï¼Œç›´æ¥returnï¼Œå› æ­¤éœ€è¦å¤§é‡å‰ªæï¼‰

   - dfså‰ªæï¼Œåœ¨ç»ˆæ­¢åˆ¤æ–­ä¸­åŠ å…¥ansåˆ¤æ–­ï¼š`if (index == word.size() || ans)`ï¼›
   - æœ€åˆåŒ¹é…æ—¶çš„boardéå†å‰ªæï¼š`if (ans) return ans;`åªè¦æ‰¾åˆ°ä¸€æ¡è·¯å¾„ï¼Œç«‹é©¬return anså°±å¯ä»¥äº†ï¼›

2. ä¼˜åŒ–visitedçŸ©é˜µï¼Œåœ¨æ­£å¸¸éå†æ—¶æˆ‘ä»¬ä¸€èˆ¬éœ€è¦ä¸€ä¸ªvisitedçŸ©é˜µï¼Œé˜²æ­¢åå¤èµ°å›å¤´è·¯ä»è€Œè¶…æ—¶ï¼›

   è§£å†³æ–¹æ¡ˆï¼š

   ç”±äºæœ‰wordåšåŒ¹é…ï¼Œå¦‚æœåŒ¹é…ä¸Šboardå’Œwordæ˜¯å¯¹åº”çš„ï¼Œå› æ­¤å›æº¯æ—¶å¯ä»¥ç”¨wordé‡æ–°èµ‹å€¼ï¼›

   å› æ­¤å¯ä»¥å°†boardèµ‹å€¼ä¸º`å…¶å®ƒå€¼`ï¼Œç„¶å`å›æº¯`æ—¶é‡æ–°èµ‹å€¼ä¸ºwordå°±å¯ä»¥ï¼›

   ```c++
   board[next_x][next_y] = '0';
   dfs(board, word, next_x, next_y, index + 1);
   // å›æº¯
   board[next_x][next_y] = word[index];
   ```

```c++
class Solution {
private:
    bool ans = false;

    int dir[4][2] = {1, 0, -1, 0, 0, 1, 0, -1};
    void dfs(vector<vector<char>> &board, string &word, int x, int y, int index) {
        // 1 ç»ˆæ­¢åˆ¤æ–­
        if (index == word.size() || ans) {  // "|| ans"æ˜¯å‰ªæï¼Œä¸ç„¶dfså¤ªæ·±
            ans = true;
            return;
        }

        // 2 é€’å½’
        for (int i = 0; i < 4; i ++ ) {  // éå†4ä¸ªæ–¹å‘
            int next_x = x + dir[i][0];
            int next_y = y + dir[i][1];
            if (next_x < 0 || next_x >= board.size() || next_y < 0 || next_y >= board[0].size()) continue;
            if (board[next_x][next_y] == word[index]) {  // å¦‚æœåŒ¹é…ä¸Š
                board[next_x][next_y] = '0';
                dfs(board, word, next_x, next_y, index + 1);
                // å›æº¯
                board[next_x][next_y] = word[index];
            }
        }
    }
public:
    bool exist(vector<vector<char>>& board, string word) {
        int row = board.size();
        int col = board[0].size();
        for (int i = 0; i < row; i ++ ) {
            for (int j = 0; j < col; j ++ ) {
                if (board[i][j] == word[0]) {  // å¦‚æœansä¸º
                    board[i][j] = '0';  // è¡¨ç¤ºå·²ç»è®¿é—®è¿‡ï¼Œä»£æ›¿visitedçŸ©é˜µ
                    dfs(board, word, i, j, 1);
                    // å›æº¯
                    board[i][j] = word[0];
                }
                if (ans) return ans;  // å‰ªæ
            }
        }
        return ans;
    }
};
```



### [131. åˆ†å‰²å›æ–‡ä¸²](https://leetcode.cn/problems/palindrome-partitioning/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œè¯·ä½ å°† `s` åˆ†å‰²æˆä¸€äº› å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯ **å›æ–‡ä¸²** ã€‚è¿”å› `s` æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "aab"
è¾“å‡ºï¼š[["a","a","b"],["aa","b"]]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "a"
è¾“å‡ºï¼š[["a"]]
```

**æç¤ºï¼š**

- `1 <= s.length <= 16`
- `s` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

#### é¢˜è§£

å°†startindexåˆ°iè¿™ä¸€æ®µä½œä¸ºåˆ‡å‰²åºåˆ—ï¼Œç„¶ååˆ¤æ–­è¿™ä¸€æ®µæ˜¯å¦æ˜¯å›æ–‡ï¼Œif trueåˆ™ä¿å­˜åˆ°tmpï¼Œif falseåˆ™continueï¼›
æ³¨æ„ï¼šæ— è®ºæ˜¯åˆ¤æ–­å›æ–‡å‡½æ•°è¿˜æ˜¯backTrackingå‡½æ•°ï¼Œéƒ½å°†åŸsä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»¥å‡å°‘ç©ºé—´å¤æ‚åº¦ã€‚

```c++
class Solution {
private:
    vector<vector<string>> ans;
    vector<string> temp;

    bool ishuiwen(string &s, int start, int end) {
        for (; start <= end; start++, end--) {
            if (s[start] != s[end]) return false;
        }
        return true;
    }

    void dfs(string &s, int startindex) {
        // 1 ç»ˆæ­¢åˆ¤æ–­
        if (startindex >= s.size()) {
            ans.push_back(temp);
            return;
        }

        // 2 é€’å½’
        for (int i = startindex; i < s.size(); i ++ ) {
            if (ishuiwen(s, startindex, i)) {
                string leftstr = s.substr(startindex, i - startindex + 1);
                temp.push_back(leftstr);
                dfs(s, i + 1);
                temp.pop_back();  // å›æº¯
            }
        }
    }
public:
    vector<vector<string>> partition(string s) {
        dfs(s, 0);
        return ans;
    }
};
```

### [51. N çš‡å](https://leetcode.cn/problems/n-queens/)

#### é¢˜ç›®æè¿°

æŒ‰ç…§å›½é™…è±¡æ£‹çš„è§„åˆ™ï¼Œçš‡åå¯ä»¥æ”»å‡»ä¸ä¹‹å¤„åœ¨åŒä¸€è¡Œæˆ–åŒä¸€åˆ—æˆ–åŒä¸€æ–œçº¿ä¸Šçš„æ£‹å­ã€‚

**n çš‡åé—®é¢˜** ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† `n` ä¸ªçš‡åæ”¾ç½®åœ¨ `nÃ—n` çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¿”å›æ‰€æœ‰ä¸åŒçš„ **n çš‡åé—®é¢˜** çš„è§£å†³æ–¹æ¡ˆã€‚

æ¯ä¸€ç§è§£æ³•åŒ…å«ä¸€ä¸ªä¸åŒçš„ **n çš‡åé—®é¢˜** çš„æ£‹å­æ”¾ç½®æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä¸­ `'Q'` å’Œ `'.'` åˆ†åˆ«ä»£è¡¨äº†çš‡åå’Œç©ºä½ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/queens.jpg" alt="img" style="zoom:50%;" />

```
è¾“å…¥ï¼šn = 4
è¾“å‡ºï¼š[[".Q..","...Q","Q...","..Q."],["..Q.","Q...","...Q",".Q.."]]
è§£é‡Šï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 1
è¾“å‡ºï¼š[["Q"]]
```

**æç¤ºï¼š**

- `1 <= n <= 9`

#### é¢˜è§£

ä¸»è¦æ˜¯åˆ¤æ–­ï¼Œæ£‹ç›˜æ˜¯å¦åˆæ³•ï¼š

åœ¨0ï½row - 1ä¸­ï¼šï¼ˆå› ä¸ºdfsæ˜¯é€è¡Œæ”¾ç½®Qï¼Œå› æ­¤åªéœ€è¦åˆ¤æ–­å½“å‰è¡Œä¹‹å‰çš„è¡Œä¸­æ˜¯å¦åˆæ³•å³å¯ï¼‰

1. åŒåˆ—ä¸èƒ½æœ‰Qï¼›
2. å·¦ä¸Š-å³ä¸‹è¿™æ¡çº¿ä¸Šä¸èƒ½æœ‰Qï¼›
3. å³ä¸Š-å·¦ä¸‹è¿™æ¡çº¿ä¸Šä¸èƒ½æœ‰Qï¼›

```c++
class Solution {
private:
    vector<vector<string>> ans;
    bool isValid(vector<string> &graph, int x, int y) {
        int row = graph.size();
        int col = graph[0].size();
        // 1 åˆ¤æ–­åŒä¸€è¡Œä¸­æ˜¯å¦æœ‰Q
        for (int i = 0; i < col; i ++ ) {
            if (graph[i][y] == 'Q') return false;
        }

        // 2 åˆ¤æ–­å·¦ä¸Šâ€”â€”å³ä¸‹æ˜¯å¦æœ‰Qï¼ˆåªéœ€è¦åˆ¤æ–­xè¡Œä»¥å‰çš„ï¼‰
        for (int i = x - 1, j = y - 1; i >= 0 && j >= 0; i--, j--) {
            if (graph[i][j] == 'Q') return false;
        }

        // 3 åˆ¤æ–­å·¦ä¸‹â€”â€”å³ä¸Šæ˜¯å¦æœ‰Qï¼ˆåªéœ€åˆ¤æ–­xè¡Œä»¥å‰çš„ï¼‰
        for (int i = x - 1, j = y + 1; i >=0 && j < col; i--, j++) {
            if (graph[i][j] == 'Q') return false;
        }

        return true;
    }

    void dfs(vector<string> &graph, int k) {
        // 1 ç»ˆæ­¢åˆ¤æ–­
        if (k >= graph.size()) {
            ans.push_back(graph);
            return;
        }

        // 2 é€’å½’(æ¯è¡Œæ”¾ä¸€ä¸ªQ)
        for (int i = 0; i < graph.size(); i ++ ) {  // éå†ç¬¬kè¡Œçš„ç¬¬iåˆ—
            if (isValid(graph, k, i)) {
                graph[k][i] = 'Q';
                dfs(graph, k + 1);
                graph[k][i] = '.';  // å›æº¯
            }
        }
    }
public:
    vector<vector<string>> solveNQueens(int n) {
        // åˆ›å»ºæ£‹ç›˜
        vector<string> graph(n, std::string(n, '.'));  // è¦æ³¨æ„è¿™é‡Œçš„ç”¨æ³•ï¼šstd::string
        dfs(graph, 0);
        return ans;
    }
};
```



## äºŒåˆ†æŸ¥æ‰¾

### [35. æœç´¢æ’å…¥ä½ç½®](https://leetcode.cn/problems/search-insert-position/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚

è¯·å¿…é¡»ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸º `O(log n)` çš„ç®—æ³•ã€‚ 

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,3,5,6], target = 5
è¾“å‡º: 2
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [1,3,5,6], target = 2
è¾“å‡º: 1
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: nums = [1,3,5,6], target = 7
è¾“å‡º: 4
```

**æç¤º:**

- `1 <= nums.length <= 104`
- `-104 <= nums[i] <= 104`
- `nums` ä¸º **æ— é‡å¤å…ƒç´ ** çš„ **å‡åº** æ’åˆ—æ•°ç»„
- `-104 <= target <= 104`

#### é¢˜è§£

> äºŒåˆ†æ³•ï¼Œæœ€ç»ˆreturn right + 1æˆ–return leftï¼›

æ ¸å¿ƒæ€æƒ³ï¼šè¿™ç±»é¢˜ç›®è¦æŠ½è±¡æˆ â€œæ‰¾å‡ºç¬¬ 1 ä¸ª **å¤§äºç­‰äº** ç›®æ ‡å…ƒç´ çš„ä¸‹æ ‡â€ æˆ– â€œæ‰¾å‡ºç¬¬ 1 ä¸ª **å°äºç­‰äº** ç›®æ ‡å…ƒç´ çš„ä¸‹æ ‡â€ï¼›ï¼ˆå…·ä½“æ˜¯å“ªç§è¦çœ‹ç¤ºä¾‹ï¼Œå¦‚è¿™é‡Œ[1,3,5,6] target=2æ—¶è¾“å‡ºä¸º1ï¼Œè¯´æ˜è¯¥é¢˜æ˜¯**â€œå¤§äºç­‰äºâ€**è¿™ç§æƒ…å†µï¼‰

è¯¥ç±»é¢˜ç›®è¦ä»¥leftæˆ–è€…rightä½œä¸ºè¿”å›å€¼ï¼ˆå¯èƒ½éœ€è¦right/left +- 1ï¼Œæ ¹æ®é¢˜ç›®åˆ¤æ–­ï¼‰ï¼Œè€Œémiddleï¼Œä»¥ä¸‹åˆ—æƒ…å†µä¸ºä¾‹ï¼š

> è‹¥é¢˜ç›®æŠ½è±¡ä¸ºï¼šâ€œæ‰¾å‡ºç¬¬ 1 ä¸ª **å¤§äºç­‰äº** ç›®æ ‡å…ƒç´ çš„ä¸‹æ ‡â€ 
>
> å¦‚æœnums = [1,3,5,6], target = 7ï¼ˆåŠ åœ¨æœ«å°¾ï¼‰ï¼Œåˆ™middleæœ€ç»ˆæŒ‡å‘3ï¼Œmiddle + 1 == 4ï¼Œæ²¡é—®é¢˜ï¼›
>
> è€Œå¦‚æœnums = [1,3,5,6], target = 0ï¼ˆåŠ åœ¨å¼€å¤´ï¼‰ï¼Œåˆ™middleæœ€ç»ˆæŒ‡å‘0ï¼Œmiddle + 1 == 1ï¼Œå°±ä¸å¯¹äº†ï¼›
>
> å¯ä»¥å‘ç°middleä¸€èˆ¬æŒ‡å‘çš„æ˜¯leftå’Œrighté‡åˆæ—¶çš„ä½ç½®ï¼Œæˆ–è€…æœ‰targetæ—¶æŒ‡å‘targetï¼Œè€Œä¸Šè¿°å‡ºç°åœ¨å¼€å¤´æˆ–æœ«å°¾çš„æƒ…å†µä¸‹ï¼ŒmiddleæŒ‡å‘çš„æ˜¯æ•°ç»„çš„å¼€å¤´/æœ«å°¾ï¼Œmiddle+1å¿…å°†å†²çªâŒï¼›
>
> **æ­£ç¡®é¢˜è§£ï¼š**
>
> åœ¨è¯¥é¢˜ç›®ä¸­ï¼Œ1ï¸âƒ£ å¦‚æœmiddleæœ€ç»ˆåœ¨å¼€å¤´ï¼Œæ­¤æ—¶left == rightè¿˜éœ€è¦è¿›ä¸€æ¬¡å¾ªç¯ï¼Œæ˜¯right = middle - 1ï¼Œè€Œleftä¸å˜ï¼›2ï¸âƒ£ å¦‚æœmiddleæœ€ç»ˆåœ¨ç»“å°¾ï¼Œåˆ™left = middle + 1ï¼Œç¬¦åˆæˆ‘ä»¬éœ€è¦çš„è¾“å‡ºï¼Œå› æ­¤æœ€ç»ˆreturn leftï¼›

```c++
class Solution {
public:
    int searchInsert(vector<int>& nums, int target) {
        int left = 0, right = nums.size() - 1;
        int middle;
        while (left <= right) {
            middle = left + (right - left) / 2;
            if (nums[middle] == target) return middle;
            else if (nums[middle] < target) {
                left = middle + 1;
            }
            else if (nums[middle] > target) {
                right = middle - 1;
            }
        }
        return left;
    }
};
```

### [74. æœç´¢äºŒç»´çŸ©é˜µ](https://leetcode.cn/problems/search-a-2d-matrix/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ»¡è¶³ä¸‹è¿°ä¸¤æ¡å±æ€§çš„ `m x n` æ•´æ•°çŸ©é˜µï¼š

- æ¯è¡Œä¸­çš„æ•´æ•°ä»å·¦åˆ°å³æŒ‰éä¸¥æ ¼é€’å¢é¡ºåºæ’åˆ—ã€‚
- æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°å¤§äºå‰ä¸€è¡Œçš„æœ€åä¸€ä¸ªæ•´æ•°ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `target` ï¼Œå¦‚æœ `target` åœ¨çŸ©é˜µä¸­ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ 1ï¼š**

 <img src="./assets/mat.jpg" alt="img" style="zoom: 67%;" />

```
è¾“å…¥ï¼šmatrix = [[1,3,5,7],[10,11,16,20],[23,30,34,60]], target = 3
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**

 <img src="./assets/mat2-20250415114712987.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šmatrix = [[1,3,5,7],[10,11,16,20],[23,30,34,60]], target = 13
è¾“å‡ºï¼šfalse
```

**æç¤ºï¼š**

- `m == matrix.length`
- `n == matrix[i].length`
- `1 <= m, n <= 100`
- `-104 <= matrix[i][j], target <= 104`

#### é¢˜è§£

æ ¹æ®çŸ©é˜µæè¿°ï¼Œå°†çŸ©é˜µæŒ‰è¡Œå±•å¼€å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªâ€œæœ‰åºæ•°ç»„â€ï¼Œ

å› æ­¤æœ¬è´¨è¿˜æ˜¯åœ¨æœ‰åºæ•°ç»„ä¸­çš„äºŒåˆ†æŸ¥æ‰¾ï¼Œåªä¸è¿‡éœ€è¦å°†indexæ ¹æ®rowå’Œcolæ•°é‡è¿›è¡Œæ‹†è§£ï¼Œå¹¶å®šä½åˆ°matrixä¸­çš„ä½ç½®ã€‚

```c++
class Solution {
public:
    bool searchMatrix(vector<vector<int>>& matrix, int target) {
        int row = matrix.size(), col = matrix[0].size();
        int left = 0, right = row * col - 1, middle;
        while (left <= right) {
            middle = left + (right - left) / 2;
            int x = middle / col, y = middle % col;
            if (matrix[x][y] == target) return true;
            else if (matrix[x][y] < target) left = middle + 1;
            else right = middle - 1;
        }

        return false;
    }
};
```

### [34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®](https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ—çš„æ•´æ•°æ•°ç»„ `nums`ï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ `target`ã€‚è¯·ä½ æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚

å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ `target`ï¼Œè¿”å› `[-1, -1]`ã€‚

ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(log n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8
è¾“å‡ºï¼š[3,4]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 6
è¾“å‡ºï¼š[-1,-1]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [], target = 0
è¾“å‡ºï¼š[-1,-1]
```

**æç¤ºï¼š**

- `0 <= nums.length <= 105`
- `-109 <= nums[i] <= 109`
- `nums` æ˜¯ä¸€ä¸ªéé€’å‡æ•°ç»„
- `-109 <= target <= 109`

#### é¢˜è§£

1. å…ˆè®¡ç®—æ‰€æœ‰è¾¹ç•Œï¼Œæ³¨æ„ï¼šå› ä¸ºé‡‡ç”¨å·¦é—­å³é—­å¼å†™æ³•ï¼Œè®¡ç®—å¾—åˆ°çš„æ˜¯â€œå¼€å§‹ä½ç½®çš„å·¦è¾¹ä¸€ä½çš„indexâ€œå’Œâ€ç»“æŸä½ç½®çš„å³è¾¹ä¸€ä½çš„indexâ€œï¼›

2. åˆ¤æ–­æ˜¯å¦æ‰¾åˆ°ç›®æ ‡å€¼ï¼š

   - if (leftBorder == -2 || rightBorder == -2)ï¼š

     å¦‚æœtargetåœ¨æ•°ç»„å¤–ä¾§ï¼Œæ¯”å¦‚nums = [2, 2]ï¼Œtarget = 3ï¼Œæ­¤æ—¶ä¸¤è¾¹è¾¹ç•Œä¸º[-2, 1]ï¼›

     ç»“æœåªä¼šæœ‰ä¸€ä¾§ä¿æŒä¸º-2ï¼Œ**å¦‚æœä¸å•ç‹¬åˆ¤æ–­ä¼šè¢«è¯¯åˆ†åˆ°if (rightBorder - leftBorder > 1)ä¸­å»**ï¼›

   - if (rightBorder - leftBorder > 1)ï¼šè¯´æ˜æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œreturn {leftBorder + 1, rightBorder - 1};

   - elseï¼šè¯´æ˜æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œreturn {-1, -1};

```c++
class Solution {
private:
    int getleftBorder(vector<int>& nums, int target) {
        // å¾—åˆ°å¼€å§‹ä½ç½®çš„å·¦è¾¹ä¸€ä¸ªindex
        int left = 0, right = nums.size() - 1, middle;
        int leftBorder = -2;
        while (left <= right) {
            middle = left + (right - left) / 2;
            if (nums[middle] >= target) {
                right = middle - 1;
                leftBorder = right;
            } else {
                left = middle + 1;
            }
        }
        return leftBorder;
    }
    int getrightBorder(vector<int>& nums, int target) {
        // å¾—åˆ°ç»“æŸä½ç½®çš„å³è¾¹ä¸€ä¸ªindex
        int left = 0, right = nums.size() - 1, middle;
        int rightBorder = -2;
        while (left <= right) {
            middle = left + (right - left) / 2;
            if (nums[middle] <= target) {
                left = middle + 1;
                rightBorder = left;
            } else {
                right = middle - 1;
            }
        }
        return rightBorder;
    }
public:
    vector<int> searchRange(vector<int>& nums, int target) {
        // 1 å¾—åˆ°å·¦å³è¾¹ç•Œ
        int leftBorder = getleftBorder(nums, target);
        int rightBorder = getrightBorder(nums, target);

        if (leftBorder == -2 || rightBorder == -2) {
            // 2.1 å¦‚æœåœ¨æ•°ç»„çš„å¤–ä¾§ï¼ˆè¦å…ˆåˆ¤æ–­ï¼Œå¦åˆ™å¤–ä¾§åªä¼šå‡ºç°ä¸€è¾¹ä¸º-2çš„æƒ…å†µï¼Œæ­¤æ—¶ä¼šè¯¯åˆ†åˆ°r - l > 1ä¸­ï¼‰
            return {-1, -1};
        } else if (rightBorder - leftBorder > 1) {
            // 2.2 å¦‚æœåœ¨æ•°ç»„ä¸­ï¼Œä¸”æ•°ç»„ä¸­æœ‰åŒ¹é…çš„å€¼
            return {leftBorder + 1, rightBorder - 1};
        } else {
            // 2.3 å¦‚æœåœ¨æ•°ç»„ä¸­ï¼Œä¸”æ— åŒ¹é…çš„å€¼,
            // æ­¤æ—¶rightBorder - leftBorder = 1,
            // å› ä¸ºæ— åŒ¹é…å€¼æ—¶ï¼Œä¸ä¼šç”±äº>=æˆ–<=ä¸­=çš„æƒ…å†µå†è·³ä¸€æ¬¡ï¼Œè¿™é‡Œä¸€å®šè¦æƒ³æ¸…æ¥šã€‚
            return {-1, -1};
        }
    }
};
```

è¿˜æœ‰ä¸€ç§å†™æ³•ï¼Œå°±æ˜¯leftboardå’Œrightboardéƒ½ç»Ÿä¸€æ ¹æ®leftè¿”å›è¾¹ç•Œï¼Œè€Œä¸æ˜¯æ ¹æ®leftboardå’Œrightboardï¼š

> ç›¸åº”çš„ï¼Œæœ€ååˆ¤æ–­â€œåœ¨æ•°ç»„ä¸­æœ‰åŒ¹é…å€¼â€å’Œåœ¨æ•°ç»„ä¸­æ— åŒ¹é…å€¼â€œçš„æ¡ä»¶ä¹Ÿæœ‰æ‰€æ”¹å˜ï¼›

```c++
class Solution {
private:
    int getleftBorder(vector<int>& nums, int target) {
        // å¾—åˆ°å¼€å§‹ä½ç½®çš„å·¦è¾¹ä¸€ä¸ªindex
        int left = 0, right = nums.size() - 1, middle;
        int leftBorder = -2;
        while (left <= right) {
            middle = left + (right - left) / 2;
            if (nums[middle] >= target) {
                right = middle - 1;
                leftBorder = right;
            } else {
                left = middle + 1;
            }
        }
        return left;
    }
    int getrightBorder(vector<int>& nums, int target) {
        // å¾—åˆ°ç»“æŸä½ç½®çš„å³è¾¹ä¸€ä¸ªindex
        int left = 0, right = nums.size() - 1, middle;
        int rightBorder = -2;
        while (left <= right) {
            middle = left + (right - left) / 2;
            if (nums[middle] <= target) {
                left = middle + 1;
                rightBorder = left;
            } else {
                right = middle - 1;
            }
        }
        return left - 1;
    }
public:
    vector<int> searchRange(vector<int>& nums, int target) {
        // 1 å¾—åˆ°å·¦å³è¾¹ç•Œ
        int leftBorder = getleftBorder(nums, target);
        int rightBorder = getrightBorder(nums, target);

        if (leftBorder == -2 || rightBorder == -2) {
            // 2.1 å¦‚æœåœ¨æ•°ç»„çš„å¤–ä¾§ï¼ˆè¦å…ˆåˆ¤æ–­ï¼Œå¦åˆ™å¤–ä¾§åªä¼šå‡ºç°ä¸€è¾¹ä¸º-2çš„æƒ…å†µï¼Œæ­¤æ—¶ä¼šè¯¯åˆ†åˆ°r - l > 1ä¸­ï¼‰
            return {-1, -1};
        } else if (rightBorder - leftBorder >= 0) {
            // 2.2 å¦‚æœåœ¨æ•°ç»„ä¸­ï¼Œä¸”æ•°ç»„ä¸­æœ‰åŒ¹é…çš„å€¼
            return {leftBorder, rightBorder};
        } else {
            // 2.3 å¦‚æœåœ¨æ•°ç»„ä¸­ï¼Œä¸”æ— åŒ¹é…çš„å€¼,
            // æ­¤æ—¶rightBorder - leftBorder = -1,
            //ï¼ˆå› ä¸ºè¿™ç§å†™æ³•ä¸‹ï¼Œrightboardæ˜¯left - 1ï¼Œleftboardæ˜¯rightï¼Œæ‰€ä»¥æ˜¯è´Ÿæ•°ï¼‰
            // å› ä¸ºæ— åŒ¹é…å€¼æ—¶ï¼Œä¸ä¼šç”±äº>=æˆ–<=ä¸­=çš„æƒ…å†µå†è·³ä¸€æ¬¡ï¼Œè¿™é‡Œä¸€å®šè¦æƒ³æ¸…æ¥šã€‚
            return {-1, -1};
        }
    }
};
```







### [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode.cn/problems/search-in-rotated-sorted-array/)

#### é¢˜ç›®æè¿°

æ•´æ•°æ•°ç»„ `nums` æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ **äº’ä¸ç›¸åŒ** ã€‚

åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œ`nums` åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ `k`ï¼ˆ`0 <= k < nums.length`ï¼‰ä¸Šè¿›è¡Œäº† **æ—‹è½¬**ï¼Œä½¿æ•°ç»„å˜ä¸º `[nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]`ï¼ˆä¸‹æ ‡ **ä» 0 å¼€å§‹** è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ `[0,1,2,4,5,6,7]` åœ¨ä¸‹æ ‡ `3` å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º `[4,5,6,7,0,1,2]` ã€‚

ç»™ä½  **æ—‹è½¬å** çš„æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `target` ï¼Œå¦‚æœ `nums` ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ `target` ï¼Œåˆ™è¿”å›å®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› `-1` ã€‚

ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º `O(log n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚ 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0
è¾“å‡ºï¼š4
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 3
è¾“å‡ºï¼š-1
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1], target = 0
è¾“å‡ºï¼š-1
```

**æç¤ºï¼š**

- `1 <= nums.length <= 5000`
- `-104 <= nums[i] <= 104`
- `nums` ä¸­çš„æ¯ä¸ªå€¼éƒ½ **ç‹¬ä¸€æ— äºŒ**
- é¢˜ç›®æ•°æ®ä¿è¯ `nums` åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ä¸Šè¿›è¡Œäº†æ—‹è½¬
- `-104 <= target <= 104`

#### é¢˜è§£

> å‰ç½®é¢˜ç›®ï¼š153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼

é¦–å…ˆç”¨ **153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼** çš„æ–¹æ³•ï¼Œæ‰¾åˆ° nums çš„æœ€å°å€¼çš„ä¸‹æ ‡ iã€‚

ç„¶ååˆ†ç±»è®¨è®ºï¼š

- å¦‚æœ target>nums[nâˆ’1]ï¼Œé‚£ä¹ˆ target ä¸€å®šåœ¨ç¬¬ä¸€æ®µ [0,iâˆ’1] ä¸­ï¼Œåœ¨ [0,iâˆ’1] ä¸­äºŒåˆ†æŸ¥æ‰¾ targetã€‚
- å¦‚æœ targetâ‰¤nums[nâˆ’1]ï¼Œé‚£ä¹ˆï¼š
  - å¦‚æœ i=0ï¼Œè¯´æ˜ nums æ˜¯é€’å¢çš„ï¼Œç›´æ¥åœ¨ [0,nâˆ’1] ä¸­äºŒåˆ†æŸ¥æ‰¾ targetã€‚
  - å¦‚æœ i>0ï¼Œé‚£ä¹ˆ target ä¸€å®šåœ¨ç¬¬äºŒæ®µ [i,nâˆ’1] ä¸­ï¼Œåœ¨ [i,nâˆ’1] ä¸­äºŒåˆ†æŸ¥æ‰¾ targetã€‚
  - è¿™ä¸¤ç§æƒ…å†µå¯ä»¥åˆå¹¶æˆï¼šåœ¨ [i,nâˆ’1] ä¸­äºŒåˆ†æŸ¥æ‰¾ targetã€‚

```c++
class Solution {
public:
    int search(vector<int>& nums, int target) {
        // 1 æœç´¢æœ€å°å€¼ä¸‹æ ‡
        int minnum = nums[0], min_index = 0;
        int left = 0, right = nums.size() - 1, middle;
        while (left <= right) {
            middle = left + (right - left) / 2;
            if (nums[middle] < minnum) {
                min_index = middle;
                minnum = nums[middle];
            }
            if (nums[middle] > nums[right]) {
                left = middle + 1;
            } else {
                right = middle - 1;
            }
        }

        // 2 äºŒåˆ†æœç´¢target
        if (target > nums[nums.size() - 1]) {
            left = 0, right = min_index - 1;
        } else {
            left = min_index, right = nums.size() - 1;
        }
        while (left <= right) {
            middle = left + (right - left) / 2;
            if (nums[middle] == target) return middle;  // æ‰¾åˆ°äº†
            else if (nums[middle] < target) {
                left = middle + 1;
            } else {
                right = middle - 1;
            }
        }

        return -1;  // æ²¡æ‰¾åˆ°
    }
};
```

### [153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼](https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array/)

#### **é¢˜ç›®æè¿°**

å·²çŸ¥ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ï¼Œé¢„å…ˆæŒ‰ç…§å‡åºæ’åˆ—ï¼Œç»ç”± `1` åˆ° `n` æ¬¡ **æ—‹è½¬** åï¼Œå¾—åˆ°è¾“å…¥æ•°ç»„ã€‚ä¾‹å¦‚ï¼ŒåŸæ•°ç»„ `nums = [0,1,2,4,5,6,7]` åœ¨å˜åŒ–åå¯èƒ½å¾—åˆ°ï¼š

- è‹¥æ—‹è½¬ `4` æ¬¡ï¼Œåˆ™å¯ä»¥å¾—åˆ° `[4,5,6,7,0,1,2]`
- è‹¥æ—‹è½¬ `7` æ¬¡ï¼Œåˆ™å¯ä»¥å¾—åˆ° `[0,1,2,4,5,6,7]`

æ³¨æ„ï¼Œæ•°ç»„ `[a[0], a[1], a[2], ..., a[n-1]]` **æ—‹è½¬ä¸€æ¬¡** çš„ç»“æœä¸ºæ•°ç»„ `[a[n-1], a[0], a[1], a[2], ..., a[n-2]]` ã€‚

ç»™ä½ ä¸€ä¸ªå…ƒç´ å€¼ **äº’ä¸ç›¸åŒ** çš„æ•°ç»„ `nums` ï¼Œå®ƒåŸæ¥æ˜¯ä¸€ä¸ªå‡åºæ’åˆ—çš„æ•°ç»„ï¼Œå¹¶æŒ‰ä¸Šè¿°æƒ…å½¢è¿›è¡Œäº†å¤šæ¬¡æ—‹è½¬ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ•°ç»„ä¸­çš„ **æœ€å°å…ƒç´ ** ã€‚

ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º `O(log n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚ 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [3,4,5,1,2]
è¾“å‡ºï¼š1
è§£é‡Šï¼šåŸæ•°ç»„ä¸º [1,2,3,4,5] ï¼Œæ—‹è½¬ 3 æ¬¡å¾—åˆ°è¾“å…¥æ•°ç»„ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2]
è¾“å‡ºï¼š0
è§£é‡Šï¼šåŸæ•°ç»„ä¸º [0,1,2,4,5,6,7] ï¼Œæ—‹è½¬ 4 æ¬¡å¾—åˆ°è¾“å…¥æ•°ç»„ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [11,13,15,17]
è¾“å‡ºï¼š11
è§£é‡Šï¼šåŸæ•°ç»„ä¸º [11,13,15,17] ï¼Œæ—‹è½¬ 4 æ¬¡å¾—åˆ°è¾“å…¥æ•°ç»„ã€‚
```

**æç¤ºï¼š**

- `n == nums.length`
- `1 <= n <= 5000`
- `-5000 <= nums[i] <= 5000`
- `nums` ä¸­çš„æ‰€æœ‰æ•´æ•° **äº’ä¸ç›¸åŒ**
- `nums` åŸæ¥æ˜¯ä¸€ä¸ªå‡åºæ’åºçš„æ•°ç»„ï¼Œå¹¶è¿›è¡Œäº† `1` è‡³ `n` æ¬¡æ—‹è½¬

#### **é¢˜è§£**

è®¾ç½®*x*=*nums*[*mid*] æ˜¯ç°åœ¨äºŒåˆ†å–åˆ°çš„æ•°ã€‚

æˆ‘ä»¬éœ€è¦åˆ¤æ–­ *x* å’Œæ•°ç»„æœ€å°å€¼çš„ä½ç½®å…³ç³»ï¼Œè°åœ¨å·¦è¾¹ï¼Œè°åœ¨å³è¾¹ï¼Ÿ

**æŠŠ x ä¸æœ€åä¸€ä¸ªæ•° nums[nâˆ’1] æ¯”å¤§å°ï¼š**ï¼ˆğŸŒŸï¼Œæ ¸å¿ƒï¼‰

- å¦‚æœ x>nums[nâˆ’1]ï¼Œé‚£ä¹ˆå¯ä»¥æ¨å‡ºä»¥ä¸‹ç»“è®ºï¼š
  - nums ä¸€å®šè¢«åˆ†æˆå·¦å³ä¸¤ä¸ªé€’å¢æ®µï¼›
  - ç¬¬ä¸€æ®µçš„æ‰€æœ‰å…ƒç´ å‡å¤§äºç¬¬äºŒæ®µçš„æ‰€æœ‰å…ƒç´ ï¼›
  - x åœ¨ç¬¬ä¸€æ®µã€‚
  - æœ€å°å€¼åœ¨ç¬¬äºŒæ®µã€‚
  - æ‰€ä»¥ x ä¸€å®šåœ¨æœ€å°å€¼çš„å·¦è¾¹ã€‚

- å¦‚æœ xâ‰¤nums[nâˆ’1]ï¼Œé‚£ä¹ˆ x ä¸€å®šåœ¨ç¬¬äºŒæ®µã€‚ï¼ˆæˆ–è€… nums å°±æ˜¯é€’å¢æ•°ç»„ï¼Œæ­¤æ—¶åªæœ‰ä¸€æ®µã€‚ï¼‰

  - **x è¦ä¹ˆæ˜¯æœ€å°å€¼ï¼Œè¦ä¹ˆåœ¨æœ€å°å€¼å³è¾¹ã€‚**ï¼ˆğŸŒŸï¼Œæ ¸å¿ƒï¼‰

  > å¦‚æœxåœ¨å³åŠè¾¹ï¼Œé‚£ä¹ˆåªéœ€è¦è®°å½•minï¼šmin(res, nums[middle])ï¼Œç„¶åç¼©å°èŒƒå›´å³å¯ï¼Œæœ€åä¼šç¼©å°è‡³å·¦åŠè¾¹çš„å·¦è¾¹ï¼ˆå³æœ€å°å€¼å¤„ï¼‰ã€‚

æ‰€ä»¥ï¼Œåªéœ€è¦æ¯”è¾ƒ x å’Œ nums[nâˆ’1] çš„å¤§å°å…³ç³»ï¼Œå°±é—´æ¥åœ°çŸ¥é“äº† x å’Œæ•°ç»„æœ€å°å€¼çš„ä½ç½®å…³ç³»ï¼Œä»è€Œä¸æ–­åœ°ç¼©å°æ•°ç»„æœ€å°å€¼æ‰€åœ¨ä½ç½®çš„èŒƒå›´ï¼ŒäºŒåˆ†æ‰¾åˆ°æ•°ç»„æœ€å°å€¼ã€‚

```c++
class Solution {
public:
    int findMin(vector<int>& nums) {
        int res = nums[0];
        int left = 0, right = nums.size() - 1, middle;
        while (left <= right) {
            middle = left + (right - left) / 2;
            // æ›´æ–°å½“å‰é‡åˆ°çš„æœ€å°å€¼
            res = min(res, nums[middle]);
            if (nums[middle] > nums[right]) {
                left = middle + 1;
            } else {
                right = middle - 1;
            }
        }
        
        return res;
    }
};
```

### [4. å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°](https://leetcode.cn/problems/median-of-two-sorted-arrays/)ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º `m` å’Œ `n` çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ `nums1` å’Œ `nums2`ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ **ä¸­ä½æ•°** ã€‚

ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º `O(log (m+n))` ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]
è¾“å‡ºï¼š2.00000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]
è¾“å‡ºï¼š2.50000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5 
```

**æç¤ºï¼š**

- `nums1.length == m`
- `nums2.length == n`
- `0 <= m <= 1000`
- `0 <= n <= 1000`
- `1 <= m + n <= 2000`
- `-106 <= nums1[i], nums2[i] <= 106`

#### é¢˜è§£

> æ€è·¯å‚è€ƒï¼š
>
> 1. [çµèŒ¶å±±è‰¾åºœâ€”â€”ã€å›¾è§£ã€‘å¾ªåºæ¸è¿›ï¼šä»åŒæŒ‡é’ˆåˆ°äºŒåˆ†ï¼ˆPython/Java/C++/C/Go/JS/Rustï¼‰](https://leetcode.cn/problems/median-of-two-sorted-arrays/solutions/2950686/tu-jie-xun-xu-jian-jin-cong-shuang-zhi-z-p2gd)
> 2. [ç®—æ³•é€šå…³æ‰‹å†Œâ€”â€”0004. å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°](https://algo.itcharge.cn/Solutions/0001-0099/median-of-two-sorted-arrays/)

 <img src="./assets/image-20250416165215645.png" alt="img" style="zoom:67%;" />

æ ¸å¿ƒæ€æƒ³ï¼šæŠŠä¸¤ä¸ªæ•°ç»„ä»¥â€œä¸­ä½æ•°â€ä¸ºç•Œé™ï¼Œåˆ†ä¸ºå·¦å³ä¸¤ä¸ªåŠè¾¹ï¼Œè¿™ä¸¤ä¸ªåŠè¾¹å…·æœ‰çš„æ€§è´¨æ˜¯ï¼š1ï¸âƒ£ ä¸¤è¾¹æ•°å­—ä¸ªæ•°ç›¸åŒï¼›2ï¸âƒ£ å·¦åŠè¾¹çš„æœ€å¤§å€¼ è¦å°äº å³åŠè¾¹çš„æœ€å°å€¼ï¼ˆæ ¸å¿ƒï¼‰ï¼›

é‚£ä¹ˆæˆ‘ä»¬äºŒåˆ†æ³•çš„ç›®æ ‡å°±æ˜¯ï¼Œå¯»æ‰¾ä¸€ä¸ªåˆ†å‰²ç‚¹ï¼Œä½¿å¾— å·¦åŠè¾¹çš„æœ€å¤§å€¼ è¦å°äº å³åŠè¾¹çš„æœ€å°å€¼ï¼›

å³ä¸‹å›¾è¡¨ç¤ºä¸­çš„ max(A1, A2) < min (B1, B2)ï¼š

 <img src="./assets/image-20250416170549733.png" alt="img" style="zoom: 30%;" />

**é‚£ä»€ä¹ˆæ—¶å€™è¦å°†èŒƒå›´å¾€å·¦ä¾§ç¼©å°ï¼Œä»€ä¹ˆæ—¶å€™è¯¥å¾€å³ç¼©å°å‘¢ï¼Ÿ**

1ï¸âƒ£ å¾€å·¦è¾¹æœç´¢

> if(nums1[mid] > nums2[j + 1])ï¼šright = mid - 1; ï¼ˆå…¶ä¸­midä¸ºå·¦åŠè¾¹åœ¨nums1çš„æœ€å¤§å…ƒç´ ï¼Œj ä¸ºå·¦åŠè¾¹åœ¨nums2çš„æœ€å¤§å…ƒç´ ï¼Œj+1ä¸ºå³åŠè¾¹åœ¨nums2çš„æœ€å°å…ƒç´ ï¼‰
>
> if çš„æ„æ€æ˜¯ï¼šå¦‚æœå·¦åŠè¾¹åœ¨nums1çš„â€œæœ€å¤§å…ƒç´ â€ï¼Œä¹Ÿæ˜¯**å·¦è¾¹â€œè¾ƒå¤§å…ƒç´ â€**ï¼Œå‡ºç°æ¯”å³ä¾§çš„â€è¾ƒå°å…ƒç´ â€œï¼ˆnums[mid+1]ä¸€å®šæ¯”nums[mid]å¤§ï¼Œä¸ç”¨æ¯”ï¼‰è¦å¤§ï¼Œè¿™è¿èƒŒäº†ä¸¥æ ¼å®šä¹‰ï¼Œæ˜¾ç„¶ä¸ç¬¦åˆé¢„æœŸï¼Œåˆ™è¦**å¿…é¡»è¦**å¾€å·¦å¯»æ‰¾ï¼›
>
> ç»“åˆä¸Šå›¾å°±æ˜¯ï¼šA1 > B2ï¼Œè‚¯å®šä¸ç¬¦åˆæ¡ä»¶ï¼Œä¸€å®šè¦å°†A1å‡å°ï¼Œä¸ç„¶è‚¯å®šä¸ç¬¦åˆæ¡ä»¶ã€‚
>
> ï¼ˆç”±äºA1è‚¯å®šæ¯”B1å°ï¼ŒA2è‚¯å®šæ¯”B2å°ï¼Œå› æ­¤åªéœ€è¦æ¯”è¾ƒA1-B2æˆ–è€…A2-B1å³å¯ã€‚

2ï¸âƒ£ å¾€å³è¾¹æœç´¢

> else left = mid + 1; 
>
> elseçš„æ„æ€å°±æ˜¯ï¼šå¦‚æœnums1[mid] <= nums2[j + 1]ï¼Œè¯´æ˜è‡³å°‘å¯¹nums1å¯¹åˆ‡å‰²æ˜¯åˆç†çš„ï¼Œä½†æ˜¯nums2[j]å’Œnums1[mid+1]çš„å…³ç³»ä¸ç¡®å®šï¼Œå¯ä»¥â€œè€ƒè™‘å¾€å³å¯»æ‰¾è¯•è¯•â€ï¼›ï¼ˆæ³¨æ„ä¸1ï¸âƒ£ä¸­çš„â€œå¿…é¡»â€åŒºåˆ«ï¼Œè¿™é‡Œæœ‰â€œmidå°±æ˜¯è§£â€å’Œâ€œè§£åœ¨midå³è¾¹â€ä¸¤ç§å¯èƒ½ï¼Œå½“å‰æ˜¯ä¸€ä¸ªå¯èƒ½è§£ï¼‰
>
> **ä¸ºä»€ä¹ˆè¿™ç§æƒ…å†µå°±è¦å¾€å³ç§»åŠ¨å‘¢ï¼Œå¾€å·¦ä¸è¡Œå—** ï¼š
>
> ç»“åˆä¸Šå›¾æ¥çœ‹ï¼Œå½“å‰æ˜¯ä¸€ä¸ªâ€œå¯èƒ½è§£â€ï¼Œå› ä¸ºA1 <= B2ï¼Œè¯´æ˜A1çš„æ•°å€¼æ˜¯å¯ä»¥çš„ï¼Œè¿˜éœ€è¦çœ‹A2å’ŒB1çš„ç›¸å¯¹å…³ç³»æ»¡ä¸æ»¡è¶³ï¼›
>
> å¦‚æœå¾€å·¦ï¼Œåªä¼šè®©A1çš„æ•°å€¼æ›´å°ï¼Œä½†æ˜¯A1å·²ç»ç¬¦åˆè¦æ±‚äº†ï¼ˆå†å°ä¹Ÿæ²¡æœ‰æ„ä¹‰ï¼‰ï¼Œåè€Œä¼šè®©A2æ›´å¤§ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼ˆæˆ‘ä»¬éœ€è¦A1A2éƒ½æ¯”å³è¾¹å°å³å¯ï¼‰ï¼›
>
> ä½†æ˜¯å¦‚æœå¾€å³ï¼Œåˆ™ä¼šè®©A1â€œå¯èƒ½â€å¤„åœ¨æ­£å¸¸èŒƒå›´ï¼Œå¹¶ä¸”A2æ›´å°ï¼Œé‚£è¿™æ ·A2 < B1çš„å¯èƒ½æ€§æ›´å¤§ï¼›

ç»¼åˆ 1ï¸âƒ£ å’Œ 2ï¸âƒ£ æ¥çœ‹ï¼Œ1ï¸âƒ£ ä¼šâ€œä¸¥æ ¼â€ç¼©å°æ­£ç¡®èŒƒå›´ï¼ˆå› ä¸ºä¸ç¬¦åˆï¼‰ï¼Œ2ï¸âƒ£ æ˜¯ä¸€ä¸ªå¯èƒ½è§£ï¼Œé€šè¿‡left = mid + 1ä¼šæ…¢æ…¢å‘çœŸæ­£çš„ ä¸­ä½æ•° é æ‹¢ï¼Œæ‰€ä»¥whlieå¾ªç¯ç»“æŸå¯ä»¥æœç´¢åˆ°æ­£ç¡®çš„ ä¸­ä½æ•° åˆ†å‰²ç‚¹ã€‚

> **ç›¸å½“äºï¼Œrightå¾€å·¦è¾¹ç¼©æ—¶ï¼Œæ˜¯ä¸¥æ ¼æ­£ç¡®çš„ï¼Œleftå†å¾€å³è¾¹æœç´¢ï¼›**

```c++
class Solution {
public:
    double findMedianSortedArrays(vector<int>& nums1, vector<int>& nums2) {
        int len1 = nums1.size(), len2 = nums2.size();
        if(len1 > len2)  // ä¿è¯nums1é•¿åº¦ <= nums2
            // å› ä¸ºæˆ‘ä»¬æ˜¯æ ¹æ®A1-B2åˆ¤æ–­çš„ï¼Œå› æ­¤è¦ä¸€ç›´ä¿è¯A1-B2ä½ç½®æ˜¯æœ‰æ•°å­—å¯ä»¥æ¯”è¾ƒçš„
            return findMedianSortedArrays(nums2, nums1);
            
        // len1 <= len2
        int k = len1 + ((len2 - len1 + 1) >> 1);  // ä¸€è¾¹æœ‰kä¸ªï¼Œæˆ–è€…ä¹Ÿå¯ä»¥è¯´ï¼Œå·¦è¾¹æœ‰kä¸ª
        int left = 0, right = len1 - 1, mid;
        while(left <= right) {
            mid = left + ((right - left) >> 1);
            int j = (len1 + len2 + 1) / 2 - mid - 2;
            // æˆ‘ä»¬æ•´ä½“å¯»æ‰¾çš„èŠ‚ç‚¹æ˜¯æ»¡è¶³ï¼šâ€œå·¦è¾¹çš„æœ€å¤§å…ƒç´ â€å°äºâ€œå³è¾¹çš„æœ€å°å…ƒç´ â€ã€‚
            // midæ˜¯nums1ä¸­â€œå·¦åŠè¾¹â€çš„æœ€å¤§å…ƒç´ ï¼Œä¹Ÿæ˜¯â€œæ•´ä½“å·¦åŠè¾¹â€çš„â€œè¾ƒå¤§å…ƒç´ â€ï¼Œ
            // å¦‚æœå·¦è¾¹â€œè¾ƒå¤§å…ƒç´ â€å‡ºç°æ¯”å³ä¾§çš„â€è¾ƒå°å…ƒç´ â€œï¼ˆnums[mid+1]ä¸€å®šæ¯”nums[mid]å¤§ï¼Œä¸ç”¨æ¯”ï¼‰è¦å¤§ï¼Œ
            // è¿™è¿èƒŒäº†ä¸¥æ ¼å®šä¹‰ï¼Œæ˜¾ç„¶ä¸ç¬¦åˆé¢„æœŸï¼Œåˆ™è¦è€ƒè™‘å¾€å·¦å¯»æ‰¾ï¼›
            if(nums1[mid] > nums2[j + 1]) {
                right = mid - 1;
            }
            // å¦‚æœmid <= j + 1è¯´æ˜åˆ‡å‰²å¯èƒ½æ˜¯åˆç†çš„ï¼Œå¾€å³å¯»æ‰¾è¯•è¯•ï¼Œ
            // æ ¹æ®â€œçµèŒ¶å±±è‰¾åºœâ€é¢˜è§£å¯çŸ¥ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªä½ç½®æ˜¯æ­£ç¡®çš„ï¼Œ
            // å› æ­¤å¾€å³åªä¼šè®©â€œå·¦åŠè¾¹â€åœ¨nums1å³ç«¯ç‚¹å˜å¤§ï¼Œåœ¨nunm2å³ç«¯ç‚¹å˜å°ï¼Œè®©ä¸Šä¸‹æ›´å¹³è¡¡ï¼Œæ‰€ä»¥è¯´æ˜¯â€œè¯•è¯•â€
            // **ä¸ºä»€ä¹ˆå¾€å·¦ä¸è¡Œ** ï¼šå½“å‰æ˜¯ä¸€ä¸ªâ€œå¯èƒ½è§£â€ï¼Œå› ä¸ºnums1æ˜¯ç¬¦åˆè¦æ±‚çš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çœ‹nums2ï¼Œ
            // å¾€å·¦åªä¼šè®©nums2çš„å³ç«¯ç‚¹æ›´å¤§ï¼Œæ›´ä¸å¹³è¡¡ï¼›
            // è€Œå¾€å³å¯ä»¥ä½¿nums1æ­£ç¡®çš„æƒ…å†µä¸‹ï¼Œå‡å°nums2ï¼Œä½¿ä¸Šä¸‹æ›´å¹³è¡¡ï¼›
            else left = mid + 1;  
        }
        
        cout << left << right << mid << endl;
        // æ­¤æ—¶left - 1 = right; 
        // læ˜¯ä¸­ä½çº¿åœ¨ç¬¬ä¸€ä¸ªæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„å·¦ä¾§çš„ä½ç½®ï¼ˆå³åŠè¾¹åœ¨nums1çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰
        // k-læ˜¯ä¸­ä½çº¿åœ¨ç¬¬äºŒä¸ªæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„å·¦ä¾§çš„ä½ç½®ï¼ˆå³åŠè¾¹åœ¨nums2çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰

        // å½“nums1æœ‰0ä¸ªæ•°åœ¨å·¦è¾¹æ—¶ï¼Œå·¦è¾¹nums1æœ€å¤§å€¼ç›´æ¥è®¾ç½®ä¸ºminï¼Œå³ç›´æ¥çœ‹nums2çš„æœ€å¤§å€¼ï¼›
        int leftMax1 = left == 0 ? INT_MIN : nums1[left - 1];
        // åŒç†ï¼Œnums1æœ‰0ä¸ªæ•°åœ¨å³è¾¹æ—¶ï¼Œå³è¾¹nums1æœ€å°å€¼ç›´æ¥è®¾ä¸ºmaxï¼Œç›´æ¥çœ‹nums2å³å¯ï¼›
        int rightMin1 = left == len1 ? INT_MAX : nums1[left];
        int leftMax2 = k - left == 0 ? INT_MIN : nums2[k - left - 1];
        int rightMin2 = k - left == len2 ? INT_MAX : nums2[k - left];

        int t = max(leftMax1, leftMax2);
        // ç”±äºlå’Œk-léƒ½æŒ‡ç¤ºä¸ºâ€œå³åŠè¾¹â€çš„å‡†ç¡®ç•Œé™ï¼Œ
        // å› æ­¤æ€»é•¿ä¸ºå¥‡æ•°æ—¶ï¼Œä¸­ä½æ•°ä¿å­˜åœ¨äº†å·¦åŠè¾¹ä¸”åœ¨è¾¹ç•Œä½ç½®ï¼Œç›´æ¥è¾“å‡ºå·¦åŠè¾¹çš„maxå°±æ˜¯ä¸­ä½æ•°ã€‚
        if((len1 + len2) % 2 == 1) return (double)t;
        return (double)(t + min(rightMin1, rightMin2)) / 2.0;
    }
};
```

## æ ˆ

### ç»éªŒæ€»ç»“

#### 1. å•è°ƒæ ˆ

æ€ä¹ˆèƒ½æƒ³åˆ°ç”¨å•è°ƒæ ˆå‘¢ï¼Ÿ ä»€ä¹ˆæ—¶å€™ç”¨å•è°ƒæ ˆå‘¢ï¼Ÿ

**é€šå¸¸æ˜¯ä¸€ç»´æ•°ç»„ï¼Œè¦å¯»æ‰¾ä»»ä¸€ä¸ªå…ƒç´ çš„å³è¾¹æˆ–è€…å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å¤§æˆ–è€…å°çš„å…ƒç´ çš„ä½ç½®ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±è¦æƒ³åˆ°å¯ä»¥ç”¨å•è°ƒæ ˆäº†**ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚

ä¾‹å¦‚ 739. æ¯æ—¥æ¸©åº¦ å…¶å®å°±æ˜¯æ‰¾æ‰¾åˆ°ä¸€ä¸ªå…ƒç´ å³è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å¤§çš„å…ƒç´ ï¼Œæ­¤æ—¶å°±åº”è¯¥æƒ³åˆ°ç”¨å•è°ƒæ ˆäº†ã€‚



### [20. æœ‰æ•ˆçš„æ‹¬å·](https://leetcode.cn/problems/valid-parentheses/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ `'('`ï¼Œ`')'`ï¼Œ`'{'`ï¼Œ`'}'`ï¼Œ`'['`ï¼Œ`']'` çš„å­—ç¬¦ä¸² `s` ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚

æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š

1. å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚
2. å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚
3. æ¯ä¸ªå³æ‹¬å·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç›¸åŒç±»å‹çš„å·¦æ‹¬å·ã€‚

**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š**s = "()"

**è¾“å‡ºï¼š**true

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š**s = "()[]{}"

**è¾“å‡ºï¼š**true

**ç¤ºä¾‹ 3ï¼š**

**è¾“å…¥ï¼š**s = "(]"

**è¾“å‡ºï¼š**false

**ç¤ºä¾‹ 4ï¼š**

**è¾“å…¥ï¼š**s = "([])"

**è¾“å‡ºï¼š**true

**æç¤ºï¼š**

- `1 <= s.length <= 104`
- `s` ä»…ç”±æ‹¬å· `'()[]{}'` ç»„æˆ

#### é¢˜è§£

1. å¦‚æœé‡åˆ° å·¦æ‹¬å· ï¼Œå°±å°†å…¶å¯¹åº”çš„ å³æ‹¬å· pushè¿›æ ˆä¸­ï¼›
2. å¦‚æœé‡åˆ° å³æ‹¬å· ï¼š
   - å¦‚æœæ­¤æ—¶ æ ˆéç©º ï¼Œè¯´æ˜è¿˜æœ‰å·¦æ‹¬å·æ²¡æœ‰å¯¹åº”ï¼šåˆ¤æ–­æ ˆé¡¶å…ƒç´ ä¸å½“å‰æ˜¯å¦ç›¸åŒï¼›
   - å¦‚æœæ­¤æ—¶ æ ˆç©º ï¼Œè¯´æ˜å³æ‹¬å·å¤šäº†ï¼Œç›´æ¥return falseï¼›
3. æœ€ç»ˆreturnï¼Œå¦‚æœ æ ˆä¸ä¸ºç©º è¯´æ˜å·¦æ‹¬å·å¤šäº†ï¼Œè¯¥return falseï¼›å¦‚æœ æ ˆç©º è¯´æ˜å·¦å³æ•°é‡ç›¸åŒï¼Œreturn trueï¼›

```c++
class Solution {
public:
    bool isValid(string s) {
        stack<char> stk;
        for (char c : s) {
            if (c == '(') stk.push(')');
            else if (c == '[') stk.push(']');
            else if (c == '{') stk.push('}');
            else {  // è¯´æ˜æ˜¯å³æ‹¬å·
                if (!stk.empty()) {  // å¦‚æœæ ˆä¸­è¿˜æœ‰å·¦æ‹¬å·
                    char left = stk.top(); stk.pop();
                    if (left != c) return false;
                }
                else return false;  // å¦‚æœæ²¡æœ‰å·¦æ‹¬å·ï¼Œè¯´æ˜å³æ‹¬å·å¤šäº†ï¼Œç›´æ¥false
            }
        }
        return stk.empty() ? true : false;
    }
};
```

### [155. æœ€å°æ ˆ](https://leetcode.cn/problems/min-stack/)

#### é¢˜ç›®æè¿°

è®¾è®¡ä¸€ä¸ªæ”¯æŒ `push` ï¼Œ`pop` ï¼Œ`top` æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚

å®ç° `MinStack` ç±»:

- `MinStack()` åˆå§‹åŒ–å †æ ˆå¯¹è±¡ã€‚
- `void push(int val)` å°†å…ƒç´ valæ¨å…¥å †æ ˆã€‚
- `void pop()` åˆ é™¤å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚
- `int top()` è·å–å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚
- `int getMin()` è·å–å †æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥ï¼š
["MinStack","push","push","push","getMin","pop","top","getMin"]
[[],[-2],[0],[-3],[],[],[],[]]

è¾“å‡ºï¼š
[null,null,null,null,-3,null,0,-2]

è§£é‡Šï¼š
MinStack minStack = new MinStack();
minStack.push(-2);
minStack.push(0);
minStack.push(-3);
minStack.getMin();   --> è¿”å› -3.
minStack.pop();
minStack.top();      --> è¿”å› 0.
minStack.getMin();   --> è¿”å› -2.
```

**æç¤ºï¼š**

- `-231 <= val <= 231 - 1`
- `pop`ã€`top` å’Œ `getMin` æ“ä½œæ€»æ˜¯åœ¨ **éç©ºæ ˆ** ä¸Šè°ƒç”¨
- `push`, `pop`, `top`, and `getMin`æœ€å¤šè¢«è°ƒç”¨ `3 * 104` æ¬¡

#### é¢˜è§£

è¾…åŠ©æ ˆï¼Œä¸€ä¸ªæ ˆï¼ˆx_stackï¼‰æ­£å¸¸è¿›è¡Œpushã€popã€topæ“ä½œï¼›

è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„min_stackç»´æŠ¤x_stackä¸­çš„æœ€å°æ•°ç»„ï¼š

- åˆå§‹åŒ–ï¼šmin_stack.push(INT_MAX);

- pushï¼šmin_stack pushè¿›å½“å‰å’Œæ ˆé¡¶å…ƒç´ çš„è¾ƒå°å€¼ï¼Œmin_stack.push(min(val, min_stack.top()));
- popï¼šåŒæ—¶pop x_stackå’Œmin_stackï¼›
- getMinï¼šreturn min_stackçš„æ ˆé¡¶å€¼ï¼›

```c++
class MinStack {
private:
    stack<int> x_stack;
    stack<int> min_stack;
public:
    MinStack() {
        min_stack.push(INT_MAX);
    }
    
    void push(int val) {
        x_stack.push(val);
        min_stack.push(min(val, min_stack.top()));
    }
    
    void pop() {
        x_stack.pop();
        min_stack.pop();
    }
    
    int top() {
        return x_stack.top();
    }
    
    int getMin() {
        return min_stack.top();
    }
};

/**
 * Your MinStack object will be instantiated and called as such:
 * MinStack* obj = new MinStack();
 * obj->push(val);
 * obj->pop();
 * int param_3 = obj->top();
 * int param_4 = obj->getMin();
 */
```

### [394. å­—ç¬¦ä¸²è§£ç ](https://leetcode.cn/problems/decode-string/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªç»è¿‡ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œè¿”å›å®ƒè§£ç åçš„å­—ç¬¦ä¸²ã€‚

ç¼–ç è§„åˆ™ä¸º: `k[encoded_string]`ï¼Œè¡¨ç¤ºå…¶ä¸­æ–¹æ‹¬å·å†…éƒ¨çš„ `encoded_string` æ­£å¥½é‡å¤ `k` æ¬¡ã€‚æ³¨æ„ `k` ä¿è¯ä¸ºæ­£æ•´æ•°ã€‚

ä½ å¯ä»¥è®¤ä¸ºè¾“å…¥å­—ç¬¦ä¸²æ€»æ˜¯æœ‰æ•ˆçš„ï¼›è¾“å…¥å­—ç¬¦ä¸²ä¸­æ²¡æœ‰é¢å¤–çš„ç©ºæ ¼ï¼Œä¸”è¾“å…¥çš„æ–¹æ‹¬å·æ€»æ˜¯ç¬¦åˆæ ¼å¼è¦æ±‚çš„ã€‚

æ­¤å¤–ï¼Œä½ å¯ä»¥è®¤ä¸ºåŸå§‹æ•°æ®ä¸åŒ…å«æ•°å­—ï¼Œæ‰€æœ‰çš„æ•°å­—åªè¡¨ç¤ºé‡å¤çš„æ¬¡æ•° `k` ï¼Œä¾‹å¦‚ä¸ä¼šå‡ºç°åƒ `3a` æˆ– `2[4]` çš„è¾“å…¥ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "3[a]2[bc]"
è¾“å‡ºï¼š"aaabcbc"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "3[a2[c]]"
è¾“å‡ºï¼š"accaccacc"
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = "2[abc]3[cd]ef"
è¾“å‡ºï¼š"abcabccdcdcdef"
```

**ç¤ºä¾‹ 4ï¼š**

```
è¾“å…¥ï¼šs = "abc3[cd]xyz"
è¾“å‡ºï¼š"abccdcdcdxyz"
```

**æç¤ºï¼š**

- `1 <= s.length <= 30`
- `s` ç”±å°å†™è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œæ–¹æ‹¬å· `'[]'` ç»„æˆ
- `s` ä¿è¯æ˜¯ä¸€ä¸ª **æœ‰æ•ˆ** çš„è¾“å…¥ã€‚
- `s` ä¸­æ‰€æœ‰æ•´æ•°çš„å–å€¼èŒƒå›´ä¸º `[1, 300]` 

#### é¢˜è§£

1. å¦‚æœé‡åˆ° æ•°å­—ã€å­—æ¯ã€'[' éƒ½ç›´æ¥pushè¿›æ ˆï¼›

2. å¦‚æœé‡åˆ° ']' åˆ™å¼€å§‹å±•å¼€ï¼š

   ï¼ˆ1ï¼‰å…ˆå–å‡º [] ä¸­é—´çš„å†…å®¹ï¼Œä¿å­˜åˆ°temp_strä¸­ï¼›

   ï¼ˆ2ï¼‰å–å‡º '['ï¼›

   ï¼ˆ3ï¼‰å–å‡ºæ•°å­—éƒ¨åˆ†ï¼Œè®°å½•ä¸ºrepeatï¼Œè¡¨ç¤º [] ä¸­å­—ç¬¦éœ€è¦é‡å¤çš„æ¬¡æ•°ï¼›ï¼ˆæ³¨æ„123è¿™ç§å¤§æ•°çš„è½¬åŒ–æ–¹å¼ï¼‰

   > å–å‡ºæ•°å­—éƒ¨åˆ†ä½¿ç”¨repeat + powerçš„æ–¹å¼ï¼Œä»æ ˆä¸­å–å­—ç¬¦ç»„æˆæ•°å­—éƒ½è¦ç”¨è¿™ç§æ–¹å¼ã€‚

   ï¼ˆ4ï¼‰é‡å¤repeatæ¬¡ï¼Œå°†temp_strå†æ¬¡pushè¿›æ ˆä¸­ï¼›ï¼ˆæ³¨æ„è¦å°†å­—ç¬¦é¡ºåºpushè¿›æ ˆï¼‰

3. ä¸Šè¿°ç»“æŸä¹‹åï¼Œæ ˆä¸­çš„å°±æ˜¯â€œè§£å‹â€ä¹‹åçš„å­—ç¬¦ä¸²ï¼Œå°†å­—ç¬¦ä¸²å–å‡ºåˆ°ansåè¾“å‡ºå³å¯ã€‚ï¼ˆæ³¨æ„è¦ä½¿ç”¨å¤´æ’åˆ°æ–¹å¼å–å‡ºï¼‰

```c++
class Solution {
public:
    string decodeString(string s) {
        stack<char> st;
        for (char c : s) {
            if (c == ']') {
                string temp_str = "";
                while (st.top() != '[') {  // å–å‡º[]ä¸­é—´çš„å†…å®¹
                    temp_str.insert(temp_str.begin(), st.top()); st.pop();
                }
                st.pop();  // å–å‡º'['
                int repeat = 0;  // è¡¨ç¤ºé‡å¤æ¬¡æ•°
                int power = 1;  // è¡¨ç¤ºå½“å‰ä½æ•°
                // å–å‡ºæ•°å­—éƒ¨åˆ†ï¼ˆæ³¨æ„è¦å…ˆåˆ¤æ–­æ ˆç©ºï¼‰
                while (!st.empty() && st.top() >= '0' && st.top() <= '9') {
                    repeat = repeat + power * (st.top() - '0');  st.pop();
                    power *= 10;
                }
                

                while (repeat--) {  // æŠŠå±•å¼€çš„å­—ç¬¦ä¸²å†æ¬¡pushè¿›stack
                    for (char t : temp_str) st.push(t);
                }
            } else {  // ä¸æ˜¯']'è¯´æ˜æ— éœ€å±•å¼€ï¼Œç›´æ¥push
                st.push(c);
            }
        }

        string ans;
        while (!st.empty()) {
            ans.insert(ans.begin(), st.top()); st.pop();
        }

        return ans;
    }
};
```

### [739. æ¯æ—¥æ¸©åº¦](https://leetcode.cn/problems/daily-temperatures/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `temperatures` ï¼Œè¡¨ç¤ºæ¯å¤©çš„æ¸©åº¦ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ `answer` ï¼Œå…¶ä¸­ `answer[i]` æ˜¯æŒ‡å¯¹äºç¬¬ `i` å¤©ï¼Œä¸‹ä¸€ä¸ªæ›´é«˜æ¸©åº¦å‡ºç°åœ¨å‡ å¤©åã€‚å¦‚æœæ°”æ¸©åœ¨è¿™ä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ `0` æ¥ä»£æ›¿ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: temperatures = [73,74,75,71,69,72,76,73]
è¾“å‡º: [1,1,4,2,1,1,0,0]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: temperatures = [30,40,50,60]
è¾“å‡º: [1,1,1,0]
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: temperatures = [30,60,90]
è¾“å‡º: [1,1,0] 
```

**æç¤ºï¼š**

- `1 <= temperatures.length <= 105`
- `30 <= temperatures[i] <= 100`

#### é¢˜è§£

æ ¸å¿ƒæ€æƒ³ï¼šå•è°ƒé€’å‡æ ˆï¼Œé‡åˆ°æ¯”æ ˆé¡¶æ›´å¤§çš„å…ƒç´ å°±ä¸æ–­æ›´æ–°æ ˆé¡¶ï¼Œç›´è‡³æ ˆå†…æ²¡æœ‰å°äºå½“å‰å…ƒç´ çš„å€¼ã€‚

ï¼ˆè¯¥é¢˜ç›®ä¸­ï¼Œstä¸­ä¿å­˜æ•°ç»„çš„ä¸‹æ ‡ï¼Œä¸‹æ ‡å¯¹åº”çš„æ•°å­—æ˜¯å•è°ƒé€’å‡çš„ï¼‰

> **å¦‚ä½•åˆ¤æ–­æ˜¯å•è°ƒé€’å¢è¿˜æ˜¯å•è°ƒé€’å‡ï¼Ÿ**
>
> åªæœ‰ä¸‹ä¸€ä¸ªæ¯”topæ›´å¤§æ—¶ï¼Œæ‰èƒ½é€æ¸è®¡ç®—topå’Œå½“å‰å…ƒç´ ä¸‹æ ‡çš„å·®å€¼ï¼Œå¹¶æ›´æ–°resultï¼Œæ˜¾ç„¶æ˜¯éœ€è¦ä¸€ä¸ªå•è°ƒé€’å‡çš„åºåˆ—ï¼ˆé‡åˆ°æ›´å¤§çš„å°±æ›´æ–°æ ˆï¼‰ã€‚

**æ³¨æ„**ï¼Œæ ˆä¸­ä¿å­˜çš„æ˜¯æ•°ç»„**æ•°å­—çš„ â€œä¸‹æ ‡â€** ï¼Œè€Œéæ•°ç»„ä¸­çš„å€¼ï¼›

1. éå†æ•°ç»„ï¼›
2. å¦‚æœ å½“å‰å…ƒç´  <= æ ˆé¡¶å…ƒç´ ï¼Œç›´æ¥å°†ä¸‹æ ‡pushè¿›æ ˆä¸­ï¼›
3. å¦‚æœ å½“å‰å…ƒç´  > æ ˆé¡¶å…ƒç´ ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°±éœ€è¦é€æ­¥å–å‡ºå€¼æ¯”temperatures[next]å°çš„å…ƒç´ ï¼ˆå›¾ä¸­çš„3ã€4ï¼‰ï¼Œç„¶åæ›´æ–°result[4] = 5-4, result[3] = 5 - 3ã€‚

 <img src="./assets/image-20250418162819976.png" alt="image-20250418162819976" style="zoom:30%;" />

```c++
class Solution {
public:
    vector<int> dailyTemperatures(vector<int>& temperatures) {
        int len = temperatures.size();

        stack<int> st;
        st.push(0);  // å› ä¸ºååºéœ€è¦æ¯”è¾ƒï¼Œè¿™é‡Œå…ˆæŠŠç¬¬ä¸€ä¸ªå…ƒç´ åŠ è½½è¿›st
        vector<int> ans(len, 0);
        for (int i = 1; i < len; i ++ ) {
            if (temperatures[i] <= temperatures[st.top()]) st.push(i);
            else {
                while (!st.empty() && temperatures[i] > temperatures[st.top()]) {
                    ans[st.top()] = i - st.top();
                    st.pop();
                }
                st.push(i);
            }
        }

        return ans;
    }
};
```

### [84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢](https://leetcode.cn/problems/largest-rectangle-in-histogram/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™å®š *n* ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚

æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚

**ç¤ºä¾‹ 1:**

![img](./assets/histogram.jpg)

```
è¾“å…¥ï¼šheights = [2,1,5,6,2,3]
è¾“å‡ºï¼š10
è§£é‡Šï¼šæœ€å¤§çš„çŸ©å½¢ä¸ºå›¾ä¸­çº¢è‰²åŒºåŸŸï¼Œé¢ç§¯ä¸º 10
```

**ç¤ºä¾‹ 2ï¼š**

![img](./assets/histogram-1.jpg)

```
è¾“å…¥ï¼š heights = [2,4]
è¾“å‡ºï¼š 4
```

**æç¤ºï¼š**

- `1 <= heights.length <=105`
- `0 <= heights[i] <= 104`

#### é¢˜è§£

æ ¸å¿ƒæ€æƒ³ï¼šå•è°ƒé€’å¢æ ˆï¼Œå¦‚æœå½“å‰æ›´é«˜å°±ç›´æ¥pushï¼Œå¦‚æœ çŸ®-é«˜-çŸ® åˆ™è®¡ç®—é¢ç§¯ã€‚

ä»¥[2,3,4,6,5,1]ä¸ºä¾‹ï¼š

1. å…ˆåœ¨æ•°ç»„å¼€å§‹å’Œæœ«å°¾éƒ½æ·»åŠ 0ï¼Œç¡®ä¿å¯ä»¥å‡ºç° çŸ®-é«˜-çŸ®ï¼›

2. å½“ å½“å‰æ•° >= top æ—¶ï¼Œç›´æ¥pushè¿›æ ˆï¼›

3. å½“ å½“å‰æ•° < top æ—¶ï¼Œè®¡ç®—é¢ç§¯ï¼Œpop(mid)ï¼Œç„¶åpush(å½“å‰ä¸‹æ ‡)ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š

   - rightæŒ‡å‘å½“å‰æ•°çš„indexï¼ŒleftæŒ‡å‘â€œæ ˆä¸­â€topçš„å‰ä¸€ä¸ªä¸‹æ ‡ï¼ˆæ³¨æ„è¿™é‡Œæ˜¯æ ˆä¸­ï¼Œæ¯”å¦‚åœ¨â€œç¬¬ 2ï¸âƒ£ æ­¥â€ä¸­topæ˜¯index=5ï¼Œå®ƒåœ¨æ ˆä¸­çš„å‰ä¸€ä¸ªæ˜¯index=3ï¼Œè€Œéæ˜¯index=4ï¼‰ï¼›

   - åŒå¼€åŒºé—´ï¼ˆleftï¼Œrightï¼‰è¡¨ç¤ºçŸ©å½¢çš„å®½åº¦wï¼ŒmidæŒ‡å‘æ ˆé¡¶æœ€å¤§å€¼ï¼Œè¡¨ç¤ºçŸ©å½¢é«˜åº¦hï¼›

     > ç”±äºåœ¨æ¯ä¸€æ­¥çš„left - mid - rightä¸­ï¼Œéƒ½ç»´æŒåœ¨ çŸ®-é«˜-çŸ®ï¼Œå› æ­¤leftå’Œrightä¸­é—´çš„æ•°å€¼éƒ½ >= midï¼Œå› æ­¤ç›´æ¥æ‹¿å½“å‰çš„midä¸€å®šæ˜¯åˆç†çš„ï¼›

![image-20250419114720971](./assets/image-20250419114720971.png)

```c++
class Solution {
public:
    int largestRectangleArea(vector<int>& heights) {
        stack<int> st;
        heights.insert(heights.begin(), 0); // æ•°ç»„å¤´éƒ¨åŠ å…¥å…ƒç´ 0
        heights.push_back(0); // æ•°ç»„å°¾éƒ¨åŠ å…¥å…ƒç´ 0ï¼ˆé‡ç‚¹ï¼Œä¸ç„¶å…¨é€’å¢æ•°ç»„å°±ä¸ä¼šè®¡ç®—é¢ç§¯äº†ï¼‰
        st.push(0);
        int result = 0;
        for (int i = 1; i < heights.size(); i++) {
            while (heights[i] < heights[st.top()]) {  // è¿™é‡Œä¸èƒ½æ˜¯<=ï¼Œå› ä¸ºé¦–å°¾éƒ½æ·»äº†0ï¼Œå¦‚æœ<=0ä¼šæŠ¥é”™ï¼›
                /*
                è¿™é‡Œçš„æ¯ä¸€ä¸ªå¾ªç¯ï¼Œç›¸å½“äºä»¥heights[st.top()]ä¸ºé«˜ï¼Œ
                ä»¥st.top~ç¬¬ä¸€ä¸ªheights[i] < heights[st.top()]è¿™æ®µè·ç¦»ä¸ºå®½è®¡ç®—é¢ç§¯ï¼Œ
                æ¯”å¦‚åœ¨[2,3,4,5,1]è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯åˆ†åˆ«è®¡ç®—h * wä¸ºï¼š
                5 * 1ã€4 * 2ã€3 * 3ã€2 * 4ã€1 * 5ï¼Œå…¶ä¸­æœ€å¤§ä¸º3 * 3 = 9
                */
                int mid = st.top();
                st.pop();
                int w = i - st.top() - 1;
                int h = heights[mid];
                printf("%d %d\n", i, st.top());
                printf("%d %d %d\n", w * h, w, h);
                result = max(result, w * h);
            }
            st.push(i);
        }
        return result;
    }
};
```



## å †

### [215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](https://leetcode.cn/problems/kth-largest-element-in-an-array/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™å®šæ•´æ•°æ•°ç»„ `nums` å’Œæ•´æ•° `k`ï¼Œè¯·è¿”å›æ•°ç»„ä¸­ç¬¬ `**k**` ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚

è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ `k` ä¸ªä¸åŒçš„å…ƒç´ ã€‚

ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: [3,2,1,5,6,4], k = 2
è¾“å‡º: 5
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: [3,2,3,1,2,4,5,5,6], k = 4
è¾“å‡º: 4
```

**æç¤ºï¼š**

- `1 <= k <= nums.length <= 105`
- `-104 <= nums[i] <= 104`

#### é¢˜è§£

**å¿«é€Ÿé€‰æ‹©**

> ä¼¼ä¹æ²¡ç”¨åˆ°å †ï¼Ÿ

1. éšæœºé€‰æ‹©åŸºå‡†æ•°ï¼ˆpivotï¼‰ä½œä¸ºå“¨å…µï¼›

2. éå†æ•°ç»„ï¼Œå°†å¤§äºã€å°äºã€ç­‰äº pivot çš„å…ƒç´ åˆ’åˆ†è‡³ big, small, equal ä¸­ï¼›

3. åˆ¤æ–­ï¼Œå¦‚æœ k <= big.size()ï¼Œè¯´æ˜ç¬¬kå¤§çš„æ•°åœ¨bigä¸­ï¼Œé€’å½’ç»§ç»­é€‰æ‹©ï¼šreturn quickSelect(big, k);

4. åˆ¤æ–­ï¼Œå¦‚æœ big.size() + equal.size() < kï¼Œè¯´æ˜kæ¯”å‰é¢big.size() + equal.size()ä¸ªæ•°å­—è¿˜è¦é åï¼Œè¯´æ˜ç¬¬kå¤§çš„æ•°åœ¨smallä¸­ï¼Œé€’å½’ç»§ç»­é€‰æ‹©ï¼šreturn quickSelect(small, k - (big.size() + equal.size()));

   ï¼ˆæ³¨æ„è¿™é‡Œå› ä¸ºå‰é¢æ’é™¤äº†big.size() + equal.size()ä¸ªæ•°å­—ï¼Œå› æ­¤è¦ç”¨kå‡å»ï¼‰

5. å¦‚æœå‰é¢ä¸¤è€…éƒ½ä¸æ˜¯ï¼Œè¯´æ˜pivotå°±æ˜¯ç¬¬kå¤§çš„æ•°å­—ï¼Œç›´æ¥return pivotï¼›

```c++
class Solution {
public:
    int findKthLargest(vector<int>& nums, int k) {
        return quickSelect(nums, k);
    }
    int quickSelect(vector<int>& nums, int k) {
        // åŸºäºå¿«æ’çš„å¿«é€Ÿé€‰æ‹©
        // éšæœºé€‰æ‹©åŸºå‡†æ•°å­—
        int p = nums[rand() % nums.size()];
        // å°†å¤§äºç­‰äºå°äºçš„å…ƒç´ åˆ†åˆ«æ”¾å…¥ä¸‰ä¸ªæ•°ç»„
        vector<int> big, equal, small;
        for (int a : nums) {
            if (a < p) small.push_back(a);
            else if (a == p) equal.push_back(a);
            else big.push_back(a);
        }
        // ç¬¬kå¤§å…ƒç´ åœ¨bigä¸­, é€’å½’åˆ’åˆ†
        if (k <= big.size()) {
            return quickSelect(big, k);
        }
        // ç¬¬kå¤§å…ƒç´ åœ¨smallä¸­, é€’å½’åˆ’åˆ†
        if (big.size() + equal.size() < k) {
            return quickSelect(small, k - (big.size() + equal.size()));
        }
        // ç¬¬kå¤§å…ƒç´ åœ¨equalä¸­, è¿”å›p
        return p;
    }
};
```

### [347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ ](https://leetcode.cn/problems/top-k-frequent-elements/)ğŸŒŸğŸŒŸ

> éš¾åœ¨priority_queueçš„æ„é€ æ–¹æ³•ï¼Œå®¹æ˜“å¿˜è®°ã€‚

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ è¿”å›å…¶ä¸­å‡ºç°é¢‘ç‡å‰ `k` é«˜çš„å…ƒç´ ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,1,1,2,2,3], k = 2
è¾“å‡º: [1,2]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [1], k = 1
è¾“å‡º: [1]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `k` çš„å–å€¼èŒƒå›´æ˜¯ `[1, æ•°ç»„ä¸­ä¸ç›¸åŒçš„å…ƒç´ çš„ä¸ªæ•°]`
- é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆå”¯ä¸€ï¼Œæ¢å¥è¯è¯´ï¼Œæ•°ç»„ä¸­å‰ `k` ä¸ªé«˜é¢‘å…ƒç´ çš„é›†åˆæ˜¯å”¯ä¸€çš„

**è¿›é˜¶ï¼š**ä½ æ‰€è®¾è®¡ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ **å¿…é¡»** ä¼˜äº `O(n log n)` ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„å¤§å°ã€‚

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šå°é¡¶å †**

> å¦‚ä½•ç†è§£priority_queueçš„cmpï¼Ÿä»€ä¹ˆæƒ…å†µæ˜¯å°é¡¶å †ï¼Ÿä»€ä¹ˆæƒ…å†µæ˜¯å¤§é¡¶å †ï¼ŸğŸŒŸğŸŒŸ
>
> priority_queueä¸sortå‡½æ•°ä¸åŒï¼Œsortæ˜¯ç›´æ¥æ¯”è¾ƒaå’Œbè°æ’åœ¨å‰é¢ï¼ˆå“ªä¸ªæ›´å¤§ï¼‰ï¼Œè€Œpriority_queueæ˜¯æ¯”è¾ƒ**è°çš„ä¼˜å…ˆçº§æ›´é«˜ï¼**
>
> ä»¥è¯¥é¢˜ä¸­çš„å°é¡¶å †ä¸ºä¾‹ï¼Œ`return a.second > b.second;` è¡¨ç¤ºå½“a > bæ—¶return trueï¼Œè¯´æ˜a > bæ—¶açš„ä¼˜å…ˆçº§ < bçš„ä¼˜å…ˆçº§ï¼Œåˆ™â€œå°çš„â€æ›´å…ˆå‡ºé˜Ÿåˆ—ï¼Œå³å°é¡¶å †ï¼›

1. å…ˆä½¿ç”¨unordered_map<int, int>ç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„é¢‘ç‡ï¼›

2. æ„å»ºå°é¡¶å †ï¼Œå°†unordered_mapä¸­çš„key-value pairè¾“å…¥åˆ°å°é¡¶å †ä¸­ï¼›

   > éœ€è¦æ³¨æ„çš„ç‚¹ï¼š
   > 1ï¸âƒ£ å°é¡¶å †çš„æ„å»ºæ–¹å¼ï¼Œå’Œé‡è½½å‡½æ•°çš„ç†è§£ï¼›ï¼ˆç®—æ³•åˆ·é¢˜æ€»ç»“ä¸­æœ‰å†™ï¼‰
   >
   > 2ï¸âƒ£ å°é¡¶å †ä¸­åªä¿ç•™å‰kå¤§é¢‘ç‡çš„æ•°ï¼Œè¶…è¿‡kçš„éœ€è¦popå‡ºå»ï¼›

3. ä»åå¾€å‰å–å‡ºå°é¡¶å †ä¸­çš„å…ƒç´ ï¼›

```c++
class Solution {
public:
    class cmp {
    public:
        bool operator()(const pair<int, int> &a, const pair<int, int> &b){
            return a.second > b.second;  // å°çš„å…ˆå‡ºé˜Ÿ
        }
    };
    vector<int> topKFrequent(vector<int>& nums, int k) {
        // 1 ç»Ÿè®¡æ¯ä¸ªæ•°å­—çš„é¢‘ç‡
        unordered_map<int, int> umap;
        for (int n : nums) {
            umap[n]++;
        }

        // 2 æ„å»ºå°é¡¶å †
        priority_queue<pair<int, int>, vector<pair<int, int>>, cmp> pq;
        for (auto &[num, cnt] : umap) {
            pq.push({num, cnt});
            if (pq.size() > k) {  // åªä¿ç•™é¢‘ç‡å‰kå¤§çš„ï¼Œè¶…è¿‡kçš„å°±popå‡ºå»
                pq.pop();
            }
        }

        // 3 ä»åå¾€å‰å–å‡ºpri_queä¸­çš„å…ƒç´ 
        vector<int> ans(k);
        for (int i = k - 1; i >= 0; i -- ) {
            ans[i] = pq.top().first; pq.pop();
        }
        return ans;
    }
};
```

**æ–¹æ³•äºŒï¼šå¤§é¡¶å †**

è·Ÿâ€œå°é¡¶å †â€çš„é€»è¾‘å¾ˆç›¸ä¼¼ï¼Œåªä¸è¿‡ä¸éœ€è¦åœ¨æ„å»ºå †æ—¶â€œä¿ç•™å‰kå¤§çš„â€ï¼Œç›´æ¥å…¨éƒ¨æ”¾å…¥å †ä¸­ï¼Œç„¶åå–å‡ºå‰kä¸ªå°±å¯ä»¥äº†ï¼š

```c++
class cmp {
public:
    bool operator()(const pair<int, int> &a, const pair<int, int> &b) {
        return a.second < b.second;
    }
};

class Solution {
public:
    vector<int> topKFrequent(vector<int>& nums, int k) {
        // ç»Ÿè®¡é¢‘ç‡
        unordered_map<int, int> unmap;
        for (int n : nums) {
            unmap[n]++;
        }

        priority_queue<pair<int, int>, vector<pair<int, int>>, cmp> pri_que;
        for (auto &[num, cnt] : unmap) {
            pri_que.push({num, cnt});
        }

        vector<int> ans;
        while (k--) {
            ans.push_back(pri_que.top().first); pri_que.pop();
        }
        return ans;
    }
};
```

### [295. æ•°æ®æµçš„ä¸­ä½æ•°](https://leetcode.cn/problems/find-median-from-data-stream/)ğŸŒŸğŸŒŸ

#### é¢˜ç›®æè¿°

**ä¸­ä½æ•°**æ˜¯æœ‰åºæ•´æ•°åˆ—è¡¨ä¸­çš„ä¸­é—´å€¼ã€‚å¦‚æœåˆ—è¡¨çš„å¤§å°æ˜¯å¶æ•°ï¼Œåˆ™æ²¡æœ‰ä¸­é—´å€¼ï¼Œä¸­ä½æ•°æ˜¯ä¸¤ä¸ªä¸­é—´å€¼çš„å¹³å‡å€¼ã€‚

- ä¾‹å¦‚ `arr = [2,3,4]` çš„ä¸­ä½æ•°æ˜¯ `3` ã€‚
- ä¾‹å¦‚ `arr = [2,3]` çš„ä¸­ä½æ•°æ˜¯ `(2 + 3) / 2 = 2.5` ã€‚

å®ç° MedianFinder ç±»:

- `MedianFinder() `åˆå§‹åŒ– `MedianFinder` å¯¹è±¡ã€‚
- `void addNum(int num)` å°†æ•°æ®æµä¸­çš„æ•´æ•° `num` æ·»åŠ åˆ°æ•°æ®ç»“æ„ä¸­ã€‚
- `double findMedian()` è¿”å›åˆ°ç›®å‰ä¸ºæ­¢æ‰€æœ‰å…ƒç´ çš„ä¸­ä½æ•°ã€‚ä¸å®é™…ç­”æ¡ˆç›¸å·® `10-5` ä»¥å†…çš„ç­”æ¡ˆå°†è¢«æ¥å—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥
["MedianFinder", "addNum", "addNum", "findMedian", "addNum", "findMedian"]
[[], [1], [2], [], [3], []]
è¾“å‡º
[null, null, null, 1.5, null, 2.0]

è§£é‡Š
MedianFinder medianFinder = new MedianFinder();
medianFinder.addNum(1);    // arr = [1]
medianFinder.addNum(2);    // arr = [1, 2]
medianFinder.findMedian(); // è¿”å› 1.5 ((1 + 2) / 2)
medianFinder.addNum(3);    // arr[1, 2, 3]
medianFinder.findMedian(); // return 2.0
```

**æç¤º:**

- `-105 <= num <= 105`
- åœ¨è°ƒç”¨ `findMedian` ä¹‹å‰ï¼Œæ•°æ®ç»“æ„ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ 
- æœ€å¤š `5 * 104` æ¬¡è°ƒç”¨ `addNum` å’Œ `findMedian`

#### é¢˜è§£

æ ¸å¿ƒæ€æƒ³ï¼šä½¿ç”¨ä¸¤ä¸ªå †ï¼Œå¤§é¡¶å †ä¿å­˜ **è¾ƒå°** çš„ä¸€åŠï¼Œå°é¡¶å †ä¿å­˜ **è¾ƒå¤§** çš„ä¸€åŠï¼Œè¿™æ ·å–å¤§é¡¶å †å’Œå°é¡¶å †çš„topå°±èƒ½è®¡ç®—å¾—åˆ°ä¸­ä½æ•°äº†ï¼›

å…³é”®é—®é¢˜åœ¨äºï¼Œå¦‚ä½•è®©å¤§é¡¶å †ä¿å­˜è¾ƒå¤§ä¸€åŠï¼Œå°é¡¶å †ä¿å­˜è¾ƒå°ä¸€åŠï¼Ÿä»¥åŠaddNumæ—¶ï¼ŒA.size() != B.size()ä¸¤ç§æƒ…å†µåº”è¯¥æ€æ ·å†™ï¼š

> å‡è®¾å°é¡¶å †ä¸ºAï¼Œå¤§é¡¶å †ä¸ºBï¼›

1. å…ˆçœ‹A.size() == B.size()ï¼Œå› ä¸ºåˆå§‹çŠ¶æ€ä¸‹å°±æ˜¯0 == 0ã€‚

   æ­¤æ—¶éœ€è¦å…ˆå°†numæ”¾å…¥Bï¼Œç„¶åä»Bä¸­å–å‡ºæœ€å¤§çš„å†æ”¾å…¥Aï¼Œ

   è¿™æ ·å°±èƒ½ä¿è¯Aä¸­ä¿å­˜çš„æ˜¯è¾ƒå¤§çš„ä¸€åŠã€‚

   ï¼ˆé‡ç‚¹ï¼šå› ä¸ºåˆå§‹æ—¶æœ€ç»ˆæ˜¯å…ˆæ”¾å…¥Aä¸­ï¼Œå› æ­¤æœ€ånums.sizeä¸ºå¥‡æ•°æ—¶è¦è¾“å‡ºA.topï¼‰

2. A.size() != B.size()æ—¶ï¼Œåˆ™å…ˆæ”¾å…¥Aï¼Œå†ä»Aå–å‡ºæœ€å°çš„å†æ”¾å…¥Bï¼Œ

   è¿™æ ·å°±èƒ½ä¿è¯Bä¸­ä¿å­˜çš„æ˜¯è¾ƒå°çš„ä¸€åŠã€‚

**èƒ½ä¸èƒ½å°†A.size() != B.size()ä¸¤ç§æƒ…å†µé¢ å€’è¿‡æ¥å‘¢ï¼Ÿ**

å¯ä»¥ï¼Œå› ä¸ºåˆ†ä¸¤ç§æƒ…å†µæ˜¯ä¸ºäº†ä¿è¯ä¸¤ä¸ªå †çš„æ•°å­—æ•°é‡ç›¸åŒï¼Œä½†æ˜¯å¦‚æœé¢ å€’åˆ™nums.sizeä¸ºå¥‡æ•°æ—¶è¦è¾“å‡ºB.topï¼Œåªè¦ä¿æŒä¸€è‡´å°±èƒ½è¾“å‡ºã€‚

```c++
class MedianFinder {
public:
    priority_queue<int, vector<int>, greater<int>> A; // å°é¡¶å †ï¼Œä¿å­˜è¾ƒå¤§çš„ä¸€åŠ
    priority_queue<int, vector<int>, less<int>> B; // å¤§é¡¶å †ï¼Œä¿å­˜è¾ƒå°çš„ä¸€åŠ
    MedianFinder() { }
    void addNum(int num) {
        if (A.size() != B.size()) {
            A.push(num);
            B.push(A.top());
            A.pop();
        } else {
            B.push(num);
            A.push(B.top());
            B.pop();
        }
    }
    double findMedian() {
        return A.size() != B.size() ? A.top() : (A.top() + B.top()) / 2.0;
    }
};
```



## è´ªå¿ƒç®—æ³•

### [121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ•°ç»„ `prices` ï¼Œå®ƒçš„ç¬¬ `i` ä¸ªå…ƒç´  `prices[i]` è¡¨ç¤ºä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ `i` å¤©çš„ä»·æ ¼ã€‚

ä½ åªèƒ½é€‰æ‹© **æŸä¸€å¤©** ä¹°å…¥è¿™åªè‚¡ç¥¨ï¼Œå¹¶é€‰æ‹©åœ¨ **æœªæ¥çš„æŸä¸€ä¸ªä¸åŒçš„æ—¥å­** å–å‡ºè¯¥è‚¡ç¥¨ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚

è¿”å›ä½ å¯ä»¥ä»è¿™ç¬”äº¤æ˜“ä¸­è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚å¦‚æœä½ ä¸èƒ½è·å–ä»»ä½•åˆ©æ¶¦ï¼Œè¿”å› `0`  

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼š[7,1,5,3,6,4]
è¾“å‡ºï¼š5
è§£é‡Šï¼šåœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡ºï¼Œæœ€å¤§åˆ©æ¶¦ = 6-1 = 5 ã€‚
     æ³¨æ„åˆ©æ¶¦ä¸èƒ½æ˜¯ 7-1 = 6, å› ä¸ºå–å‡ºä»·æ ¼éœ€è¦å¤§äºä¹°å…¥ä»·æ ¼ï¼›åŒæ—¶ï¼Œä½ ä¸èƒ½åœ¨ä¹°å…¥å‰å–å‡ºè‚¡ç¥¨ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šprices = [7,6,4,3,1]
è¾“å‡ºï¼š0
è§£é‡Šï¼šåœ¨è¿™ç§æƒ…å†µä¸‹, æ²¡æœ‰äº¤æ˜“å®Œæˆ, æ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚
```

**æç¤ºï¼š**

- `1 <= prices.length <= 105`
- `0 <= prices[i] <= 104`

#### é¢˜è§£

**æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ**

- min_priå–å½“å‰ä¸‹æ ‡åŠä»¥å‰çš„æœ€å°å€¼ï¼ˆä½œä¸ºä¹°å…¥ä»·æ ¼ï¼‰
- ç”±äºåœ¨å½“å‰è®¡ç®—æ—¶ï¼Œmin_priå–iä¹‹å‰çš„ä¸‹æ ‡

```c++
class Solution {
public:
    int maxProfit(vector<int>& prices) {
        int ans = 0;
        int min_pri = INT_MAX;
        for (int i = 0; i < prices.size(); i ++ ) {
            min_pri = min(min_pri, prices[i]); // min_priå–å½“å‰ä¸‹æ ‡åŠä»¥å‰çš„æœ€å°å€¼ï¼ˆä½œä¸ºä¹°å…¥ä»·æ ¼ï¼‰
            ans = max(ans, prices[i] - min_pri);  // ç”±äºåœ¨å½“å‰è®¡ç®—æ—¶ï¼Œmin_priå–iä¹‹å‰çš„ä¸‹æ ‡
        }
        return ans;
    }
};
```

**æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’ï¼ˆ[len, 2] å¤§å°dpæ•°ç»„ç‰ˆï¼‰**

æ ¸å¿ƒæ€æƒ³ï¼šdpæ•°ç»„å®šä¹‰ï¼Œdp\[i][0] è¡¨ç¤ºç¬¬iå¤©æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘ï¼Œdp\[i][1] è¡¨ç¤ºç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘ï¼›

1. dpæ•°ç»„å®šä¹‰ä¸å¤ªå¥½æƒ³ï¼Œå»ºè®®ç›´æ¥è®°ä½ï¼Ÿ
2. é€’æ¨å…¬å¼ 1ï¸âƒ£ ï¼šdp\[i][0] = max(dp\[i - 1][0], -1 * prices[i]); ç¡®ä¿äº†dp\[i][0]å¤„æ˜¯**â€œå½“å‰èŠ±æœ€å°‘çš„é’±ä¹°è‚¡ç¥¨â€**ï¼›
3. é€’æ¨å…¬å¼ 2ï¸âƒ£ ï¼šç”±äº 1ï¸âƒ£ ç”¨æœ€å°‘çš„é’±ä¹°äº†è‚¡ç¥¨ï¼Œåœ¨æ¯æ¬¡éå†ä¸­dp\[i - 1][0]å°±æ˜¯â€œå‰é¢èŠ±æœ€å°‘é’±ä¹°å…¥çš„ä»·æ ¼â€ï¼Œå› æ­¤åªè¦åˆ¤æ–­æ˜¯â€œå½“å‰å–å‡ºçš„è·åˆ©æ›´å¤šâ€è¿˜æ˜¯â€œä»¥å‰æŸç§æ–¹å¼å–å‡ºå¯ä»¥è·åˆ©æ›´å¤šâ€ã€‚

```c++
class Solution {
public:
    int maxProfit(vector<int>& prices) {
        int len = prices.size();
        // 1 å®šä¹‰dpæ•°ç»„ï¼šdp[i][0] è¡¨ç¤ºç¬¬iå¤©æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘ï¼Œdp[i][1] è¡¨ç¤ºç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘ï¼›
        vector<vector<int>> dp(len, vector<int>(2, 0));

        // 2 åˆå§‹åŒ–dp
        dp[0][0] -= prices[0];
        dp[0][1] == 0;  // å¯ä»¥ä¸å†™ï¼Œé»˜è®¤å°±æ˜¯0

        // 3 é€’æ¨
        for (int i = 1; i < len; i ++ ) {
            dp[i][0] = max(dp[i - 1][0], -1 * prices[i]);  // ç›´è§‚ç†è§£å°±æ˜¯ï¼Œå°½é‡èŠ±æ›´å°‘é’±ä¹°å…¥
            dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] + prices[i]);  // ç›´è§‚ç†è§£å°±æ˜¯ï¼Œå°½é‡å–å‡ºæ›´å¤šçš„é’±
        }

        return dp[len - 1][1];
    }
};
```

**æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’â€”ç²¾ç®€ç‰ˆï¼ˆ[2, 2]å¤§å°çš„dpæ•°ç»„ï¼‰**

æ ¸å¿ƒæ€æƒ³ï¼šå°†(len, 2)ç»´çš„dpæ•°ç»„ç¼©å‡ä¸º(2, 2)ç»´ï¼Œé€šè¿‡i % 2 å’Œ(i - 1) % 2çš„æ–¹å¼æ¥æè¿°â€œå½“å‰è¡Œâ€å’Œâ€œä¸Šä¸€è¡Œâ€ã€‚

```c++
class Solution {
public:
    int maxProfit(vector<int>& prices) {
        int len = prices.size();
        // 1 å®šä¹‰dpæ•°ç»„ï¼šdp[i][0] è¡¨ç¤ºç¬¬iå¤©æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘ï¼Œdp[i][1] è¡¨ç¤ºç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘ï¼›
        vector<vector<int>> dp(2, vector<int>(2, 0));

        // 2 åˆå§‹åŒ–dp
        dp[0][0] -= prices[0];
        dp[0][1] == 0;  // å¯ä»¥ä¸å†™ï¼Œé»˜è®¤å°±æ˜¯0

        // 3 é€’æ¨
        for (int i = 1; i < len; i ++ ) {
            dp[i % 2][0] = max(dp[(i - 1) % 2][0], -1 * prices[i]);  // ç›´è§‚ç†è§£å°±æ˜¯ï¼Œå°½é‡èŠ±æ›´å°‘é’±ä¹°å…¥
            dp[i % 2][1] = max(dp[(i - 1) % 2][1], dp[(i - 1) % 2][0] + prices[i]);  // ç›´è§‚ç†è§£å°±æ˜¯ï¼Œå°½é‡å–å‡ºæ›´å¤šçš„é’±
        }

        return dp[(len - 1) % 2][1];
    }
};
```

### [55. è·³è·ƒæ¸¸æˆ](https://leetcode.cn/problems/jump-game/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ `nums` ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ **ç¬¬ä¸€ä¸ªä¸‹æ ‡** ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚

åˆ¤æ–­ä½ æ˜¯å¦èƒ½å¤Ÿåˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ï¼Œå¦‚æœå¯ä»¥ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [2,3,1,1,4]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šå¯ä»¥å…ˆè·³ 1 æ­¥ï¼Œä»ä¸‹æ ‡ 0 åˆ°è¾¾ä¸‹æ ‡ 1, ç„¶åå†ä»ä¸‹æ ‡ 1 è·³ 3 æ­¥åˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [3,2,1,0,4]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ— è®ºæ€æ ·ï¼Œæ€»ä¼šåˆ°è¾¾ä¸‹æ ‡ä¸º 3 çš„ä½ç½®ã€‚ä½†è¯¥ä¸‹æ ‡çš„æœ€å¤§è·³è·ƒé•¿åº¦æ˜¯ 0 ï¼Œ æ‰€ä»¥æ°¸è¿œä¸å¯èƒ½åˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ã€‚
```

**æç¤ºï¼š**

- `1 <= nums.length <= 104`
- `0 <= nums[i] <= 105`

#### é¢˜è§£

æ ¸å¿ƒæ€æƒ³ï¼šä¸ç”¨æ‹˜æ³¥äºæ¯æ¬¡ç©¶ç«Ÿè·³å‡ æ­¥ï¼Œè€Œæ˜¯çœ‹è¦†ç›–èŒƒå›´ï¼Œè¦†ç›–èŒƒå›´å†…ä¸€å®šæ˜¯å¯ä»¥è·³è¿‡æ¥çš„ï¼Œä¸ç”¨ç®¡æ˜¯æ€ä¹ˆè·³çš„ã€‚

```c++
class Solution {
public:
    bool canJump(vector<int>& nums) {
        int cover = 0;
        // ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        if (nums.size() == 1) return true; // åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯èƒ½è¾¾åˆ°
        for (int i = 0; i <= cover; i ++ ) {  // æ³¨æ„è¿™é‡Œæ˜¯å°äºç­‰äºcover
            cover = max(i + nums[i], cover);
            if (cover >= nums.size() - 1) return true;
        }
        return false;
    }
};
```

### [45. è·³è·ƒæ¸¸æˆ II](https://leetcode.cn/problems/jump-game-ii/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º `n` çš„ **0 ç´¢å¼•**æ•´æ•°æ•°ç»„ `nums`ã€‚åˆå§‹ä½ç½®ä¸º `nums[0]`ã€‚

æ¯ä¸ªå…ƒç´  `nums[i]` è¡¨ç¤ºä»ç´¢å¼• `i` å‘åè·³è½¬çš„æœ€å¤§é•¿åº¦ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ åœ¨ `nums[i]` å¤„ï¼Œä½ å¯ä»¥è·³è½¬åˆ°ä»»æ„ `nums[i + j]` å¤„:

- `0 <= j <= nums[i]` 
- `i + j < n`

è¿”å›åˆ°è¾¾ `nums[n - 1]` çš„æœ€å°è·³è·ƒæ¬¡æ•°ã€‚ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹å¯ä»¥åˆ°è¾¾ `nums[n - 1]`ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [2,3,1,1,4]
è¾“å‡º: 2
è§£é‡Š: è·³åˆ°æœ€åä¸€ä¸ªä½ç½®çš„æœ€å°è·³è·ƒæ•°æ˜¯ 2ã€‚
     ä»ä¸‹æ ‡ä¸º 0 è·³åˆ°ä¸‹æ ‡ä¸º 1 çš„ä½ç½®ï¼Œè·³ 1 æ­¥ï¼Œç„¶åè·³ 3 æ­¥åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [2,3,0,1,4]
è¾“å‡º: 2
```

**æç¤º:**

- `1 <= nums.length <= 104`
- `0 <= nums[i] <= 1000`
- é¢˜ç›®ä¿è¯å¯ä»¥åˆ°è¾¾ `nums[n-1]`

#### é¢˜è§£

éœ€è¦ç»Ÿè®¡ä¸¤ä¸ªè¦†ç›–èŒƒå›´ï¼Œå½“å‰è¿™ä¸€æ­¥çš„æœ€å¤§è¦†ç›–ï¼ˆcur_distanceï¼‰å’Œä¸‹ä¸€æ­¥æœ€å¤§è¦†ç›–ï¼ˆnext_distanceï¼‰ã€‚

å¦‚æœç§»åŠ¨ä¸‹æ ‡è¾¾åˆ°äº†å½“å‰è¿™ä¸€æ­¥çš„æœ€å¤§è¦†ç›–æœ€è¿œè·ç¦»äº†ï¼Œè¿˜æ²¡æœ‰åˆ°ç»ˆç‚¹çš„è¯ï¼Œé‚£ä¹ˆå°±å¿…é¡»å†èµ°ä¸€æ­¥æ¥å¢åŠ è¦†ç›–èŒƒå›´ï¼Œç›´åˆ°è¦†ç›–èŒƒå›´è¦†ç›–äº†ç»ˆç‚¹ã€‚

```c++
class Solution {
public:
    int jump(vector<int>& nums) {
        int ans = 0;
        if (nums.size() == 1) return ans;
        int cur_distance = 0;  // å½“å‰è¿™ä¸€æ­¥æœ€å¤šèƒ½èµ°å¤šè¿œ
        int next_distance = 0;  // ä¸‹ä¸€æ­¥æœ€å¤šèƒ½èµ°åˆ°å“ª
        for (int i = 0; i < nums.size(); i ++ ) {
            next_distance = max(next_distance, i + nums[i]);
            if (i == cur_distance) {
                ans++;  // å½“å‰æ— æ³•åˆ°è¾¾ï¼Œå°±éœ€è¦è·³å‡ºå½“å‰è¿™ä¸€æ­¥ï¼Œå»å¾€ä¸‹ä¸€ç‰‡åŒºé—´
                cur_distance = next_distance;  // å› ä¸ºè¿ˆäº†ä¸€æ­¥ï¼Œå½“å‰è¿™ä¸€æ­¥æœ€å¤šèƒ½èµ°åˆ°next_distance
                if (cur_distance >= nums.size() - 1) break;
            }
        }
        return ans;
    }
};
```

### [763. åˆ’åˆ†å­—æ¯åŒºé—´](https://leetcode.cn/problems/partition-labels/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ã€‚æˆ‘ä»¬è¦æŠŠè¿™ä¸ªå­—ç¬¦ä¸²åˆ’åˆ†ä¸ºå°½å¯èƒ½å¤šçš„ç‰‡æ®µï¼ŒåŒä¸€å­—æ¯æœ€å¤šå‡ºç°åœ¨ä¸€ä¸ªç‰‡æ®µä¸­ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸² `"ababcc"` èƒ½å¤Ÿè¢«åˆ†ä¸º `["abab", "cc"]`ï¼Œä½†ç±»ä¼¼ `["aba", "bcc"]` æˆ– `["ab", "ab", "cc"]` çš„åˆ’åˆ†æ˜¯éæ³•çš„ã€‚

æ³¨æ„ï¼Œåˆ’åˆ†ç»“æœéœ€è¦æ»¡è¶³ï¼šå°†æ‰€æœ‰åˆ’åˆ†ç»“æœæŒ‰é¡ºåºè¿æ¥ï¼Œå¾—åˆ°çš„å­—ç¬¦ä¸²ä»ç„¶æ˜¯ `s` ã€‚

è¿”å›ä¸€ä¸ªè¡¨ç¤ºæ¯ä¸ªå­—ç¬¦ä¸²ç‰‡æ®µçš„é•¿åº¦çš„åˆ—è¡¨ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "ababcbacadefegdehijhklij"
è¾“å‡ºï¼š[9,7,8]
è§£é‡Šï¼š
åˆ’åˆ†ç»“æœä¸º "ababcbaca"ã€"defegde"ã€"hijhklij" ã€‚
æ¯ä¸ªå­—æ¯æœ€å¤šå‡ºç°åœ¨ä¸€ä¸ªç‰‡æ®µä¸­ã€‚
åƒ "ababcbacadefegde", "hijhklij" è¿™æ ·çš„åˆ’åˆ†æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºåˆ’åˆ†çš„ç‰‡æ®µæ•°è¾ƒå°‘ã€‚ 
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "eccbbbbdec"
è¾“å‡ºï¼š[10]
```

**æç¤ºï¼š**

- `1 <= s.length <= 500`
- `s` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

#### é¢˜è§£

è¿™é“é¢˜ç›®leetcodeæ ‡è®°ä¸ºè´ªå¿ƒç®—æ³•ï¼Œä½†å¹¶æ²¡æœ‰æ„Ÿå—åˆ°è´ªå¿ƒï¼Œæ‰¾ä¸å‡ºå±€éƒ¨æœ€ä¼˜æ¨å‡ºå…¨å±€æœ€ä¼˜çš„è¿‡ç¨‹ã€‚å°±æ˜¯ç”¨æœ€è¿œå‡ºç°è·ç¦»æ¨¡æ‹Ÿäº†åœˆå­—ç¬¦çš„è¡Œä¸ºã€‚ï¼ˆä½†è¿™é“é¢˜ç›®çš„æ€è·¯æ˜¯å¾ˆå·§å¦™ï¼Œæ³¨æ„ç†è§£ï¼‰

1. ç»Ÿè®¡æ¯ä¸€ä¸ªå­—ç¬¦æœ€åå‡ºç°çš„ä½ç½®

2. ä»å¤´éå†å­—ç¬¦ï¼Œå¹¶æ›´æ–°å­—ç¬¦çš„æœ€è¿œå‡ºç°ä¸‹æ ‡ï¼Œå¦‚æœæ‰¾åˆ°å­—ç¬¦æœ€è¿œå‡ºç°ä½ç½®ä¸‹æ ‡å’Œå½“å‰ä¸‹æ ‡ç›¸ç­‰äº†ï¼Œåˆ™æ‰¾åˆ°äº†åˆ†å‰²ç‚¹ã€‚

<img src="./assets/20201222191924417.png" alt="763.åˆ’åˆ†å­—æ¯åŒºé—´" style="zoom:50%;" />

```c++
class Solution {
public:
    vector<int> partitionLabels(string s) {
        int hash[27] = {0};
        // è®°å½•æ¯ä¸ªå­—æ¯æœ€åå‡ºç°çš„ä½ç½®
        for (int i = 0; i < s.size(); i ++ ) {
            hash[s[i] - 'a'] = i;
        }

        vector<int> ans;
        int left = 0;
        int right = 0;
        for (int i = 0; i < s.size(); i ++ ) {
            right = max(right, hash[s[i] - 'a']);
            if (i == right) {  // è¯´æ˜è¿™ä¸€æ®µåˆ°æ­¤ç»“æŸ
                ans.push_back(right - left + 1);
                left = right + 1;  // ç§»åŠ¨åˆ°ä¸‹ä¸€æ®µçš„èµ·ç‚¹
            }
        }
        return ans;
    }
};
```



## åŠ¨æ€è§„åˆ’

### ç»éªŒæ€»ç»“

#### 1. èƒŒåŒ…é—®é¢˜

![416.åˆ†å‰²ç­‰å’Œå­é›†1](./assets/20230310000726.png)

**1.1 éå†é¡ºåºæ˜¯â€œå…ˆç‰©å“å†èƒŒåŒ…â€è¿˜æ˜¯â€œå…ˆèƒŒåŒ…å†ç‰©å“â€ï¼š**

- å¦‚æœæ±‚ç»„åˆæ•°å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…ã€‚

- å¦‚æœæ±‚æ’åˆ—æ•°å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“ã€‚

> å¼ºè°ƒç‰©å“é¡ºåºçš„éƒ½æ˜¯â€œå…ˆéå†èƒŒåŒ…ï¼Œå†éå†ç‰©å“â€ã€‚

æˆ‘åœ¨è¿™é‡Œåšä¸€ä¸ªæ€»ç»“ï¼š

- æ±‚ç»„åˆæ•°ï¼š[åŠ¨æ€è§„åˆ’ï¼š518.é›¶é’±å…‘æ¢II (opens new window)](https://programmercarl.com/0518.é›¶é’±å…‘æ¢II.html)

- æ±‚æ’åˆ—æ•°ï¼š[åŠ¨æ€è§„åˆ’ï¼š377. ç»„åˆæ€»å’Œ â…£ (opens new window)](https://programmercarl.com/0377.ç»„åˆæ€»å’Œ.html)ã€[åŠ¨æ€è§„åˆ’ï¼š70. çˆ¬æ¥¼æ¢¯è¿›é˜¶ç‰ˆï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰ (opens new window)](https://programmercarl.com/0070.çˆ¬æ¥¼æ¢¯å®Œå…¨èƒŒåŒ…ç‰ˆæœ¬.html)

- æ±‚æœ€å°æ•°ï¼š[åŠ¨æ€è§„åˆ’ï¼š322. é›¶é’±å…‘æ¢ (opens new window)](https://programmercarl.com/0322.é›¶é’±å…‘æ¢.html)ã€[åŠ¨æ€è§„åˆ’ï¼š279.å®Œå…¨å¹³æ–¹æ•°](https://programmercarl.com/0279.å®Œå…¨å¹³æ–¹æ•°.html)

**1.2 å½“éå†ä¸ºâ€œå…ˆç‰©å“å†èƒŒåŒ…â€æ—¶ï¼Œä»€ä¹ˆæ—¶å€™â€œæ­£åºâ€éå†èƒŒåŒ…ï¼Œä»€ä¹ˆæ—¶å€™â€œååºâ€ï¼Ÿ**

- **ã€Œç‰©å“åªèƒ½é€‰ä¸€æ¬¡ã€ç”¨** å€’åºéå†å®¹é‡ï¼ˆå…ˆéå†ç‰©å“ï¼‰
- **ã€Œç‰©å“å¯ä»¥é€‰å¤šæ¬¡ã€ç”¨** æ­£åºéå†å®¹é‡ï¼ˆå…ˆéå†ç‰©å“ï¼‰

å½“dpæ•°ç»„ä¸º**äºŒç»´**æ—¶ï¼Œå…ˆæ­£åºè¿˜æ˜¯ååºéƒ½æ— æ‰€è°“ï¼Œå› ä¸ºç¬¬iå±‚ä¾èµ–çš„æ˜¯i - 1å±‚ï¼Œä½†æ˜¯**ä¸€ç»´**å°±ä¸è¡Œäº†ã€‚

å½“ä¸€ç»´æ—¶ï¼Œ`dp[j] = max(dp[j], dp[j - w[i]] + v[i]); `å› ä¸ºjåœ¨j - w[i]ä¹‹åï¼Œä¼šå‘ç°å¦‚æœâ€œæ­£åºéå†èƒŒåŒ…â€ï¼Œitemä¼šåœ¨dp[j - w[i]]æ—¶è¢«æ”¾å…¥ä¸€æ¬¡ï¼Œç„¶ååœ¨dp[j] åˆè¢«æ”¾å…¥ä¸€æ¬¡ï¼Œå› æ­¤å¦‚æœç‰©å“åªæœ‰ä¸€ä¸ªæ—¶æ˜¯ä¸è¢«å…è®¸çš„ã€‚

æ€»ç»“ï¼š

- **0-1 èƒŒåŒ…é—®é¢˜ï¼ˆæ¯ä¸ªç‰©å“åªèƒ½é€‰ä¸€æ¬¡ï¼‰**

  éå†é¡ºåºï¼š

  ```c++
  for (int i = 0; i < n; i++) {              // éå†ç‰©å“
      for (int j = W; j >= w[i]; j--) {      // å€’åºéå†å®¹é‡
          dp[j] = max(dp[j], dp[j - w[i]] + v[i]);
      }
  }
  ```

  - å€’åºéå†å®¹é‡ `j` æ˜¯ä¸ºäº†**é¿å…ç‰©å“è¢«é‡å¤é€‰æ‹©**ã€‚
  - å¦‚æœä½ æ­£åºéå†ï¼Œå°±ä¼šç”¨åˆ°åŒä¸€è½®æ›´æ–°çš„ `dp[j - w[i]]`ï¼Œç›¸å½“äºç”¨äº†ä¸¤æ¬¡è¿™ä¸ªç‰©å“ã€‚

- **å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼ˆç‰©å“å¯ä»¥é€‰æ— é™æ¬¡ï¼‰**

  éå†é¡ºåºï¼š

  ```c++
  for (int i = 0; i < n; i++) {             // éå†ç‰©å“
      for (int j = w[i]; j <= W; j++) {     // æ­£åºéå†å®¹é‡
          dp[j] = max(dp[j], dp[j - w[i]] + v[i]);
      }
  }
  ```

  - æ­£åºéå†å®¹é‡ `j` æ˜¯ä¸ºäº†**è®©ç‰©å“å¯ä»¥è¢«é‡å¤é€‰æ‹©**ã€‚

  - æ­¤æ—¶ `dp[j - w[i]]` å·²ç»æ˜¯ä¸Šä¸€è½®ï¼ˆåŒ…æ‹¬è¿™æ¬¡ç‰©å“é‡å¤é€‰çš„ç»“æœï¼‰ã€‚

- **å¤šé‡èƒŒåŒ…é—®é¢˜ï¼ˆæ¯ç§ç‰©å“æœ€å¤šé€‰ s æ¬¡ï¼‰**

  - å¯ä»¥æŠŠæ¯ä¸ªç‰©å“ã€Œå±•å¼€æˆ s ä¸ª 0-1 èƒŒåŒ…ç‰©å“ã€ï¼Œç„¶åç”¨ 0-1 èƒŒåŒ…å¤„ç†ï¼›

  - æˆ–è€…ç”¨**å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–çš„åŠ¨æ€è§„åˆ’**ï¼Œé‚£æ˜¯è¿›é˜¶å†…å®¹ã€‚

**1.3 èƒŒåŒ…é—®é¢˜è¦ç”±å…¶æ³¨æ„â€œdpæ•°ç»„çš„å®šä¹‰â€å’Œâ€œç‰©å“çš„é‡é‡å’Œä»·å€¼çš„å®šä¹‰â€**









### [70. çˆ¬æ¥¼æ¢¯](https://leetcode.cn/problems/climbing-stairs/)

#### é¢˜ç›®æè¿°

å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ `n` é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚

æ¯æ¬¡ä½ å¯ä»¥çˆ¬ `1` æˆ– `2` ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿ

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 2
è¾“å‡ºï¼š2
è§£é‡Šï¼šæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚
1. 1 é˜¶ + 1 é˜¶
2. 2 é˜¶
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 3
è¾“å‡ºï¼š3
è§£é‡Šï¼šæœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚
1. 1 é˜¶ + 1 é˜¶ + 1 é˜¶
2. 1 é˜¶ + 2 é˜¶
3. 2 é˜¶ + 1 é˜¶
```

**æç¤ºï¼š**

- `1 <= n <= 45`

#### é¢˜è§£

1. dp[i]è¡¨ç¤ºå½“å‰æ¥¼å±‚æœ‰å¤šå°‘ç§æ–¹æ³•ï¼›
2. dp[i] = dp[i - 1] + dp[i - 2]ç§æ–¹æ³•ï¼›
3. æ­¤æ—¶åªéœ€è¦æ‰‹æ¨dp[1]å’Œdp[2]ï¼Œç„¶åé€’æ¨å°±å¯ä»¥äº†ï¼›

```c++
class Solution {
public:
    int climbStairs(int n) {
        // 0 ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        if (n == 1) return 1;
        else if (n == 2) return 2;

        // 1 dpæ•°ç»„ï¼šdp[i]è¡¨ç¤ºæœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°ç¬¬iå±‚
        vector<int> dp(n + 1, 0);

        // 2 åˆå§‹åŒ–dpæ•°ç»„
        dp[1] = 1;  // åªæœ‰â€œçˆ¬1é˜¶â€ä¸€ç§æƒ…å†µï¼ˆ0+1ï¼‰
        dp[2] = 2;  // æœ‰â€œ1+1â€å’Œâ€œ0+2â€ä¸¤ç§æƒ…å†µ

        // 3 é€’æ¨å…¬å¼
        for (int i = 3; i <= n; i ++ ) {
            dp[i] = dp[i - 1] + dp[i - 2];  // dp[i - 1] + 1 å’Œ dp[i - 2] + 2è¿™ä¸¤ç§æƒ…å†µæ„æˆ
        }

        return dp[n];
    }
};
```

### [118. æ¨è¾‰ä¸‰è§’](https://leetcode.cn/problems/pascals-triangle/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° *`numRows`ï¼Œ*ç”Ÿæˆã€Œæ¨è¾‰ä¸‰è§’ã€çš„å‰ *`numRows`* è¡Œã€‚

åœ¨ã€Œæ¨è¾‰ä¸‰è§’ã€ä¸­ï¼Œæ¯ä¸ªæ•°æ˜¯å®ƒå·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹çš„æ•°çš„å’Œã€‚

 <img src="./assets/1626927345-DZmfxB-PascalTriangleAnimated2.gif" alt="img" style="zoom:50%;" /> 

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: numRows = 5
è¾“å‡º: [[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1]]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: numRows = 1
è¾“å‡º: [[1]]
```

**æç¤º:**

- `1 <= numRows <= 30`

#### é¢˜è§£

æŠŠæ¨è¾‰ä¸‰è§’çš„æ¯ä¸€æ’å·¦å¯¹é½ï¼š

[1]
[1,1]
[1,2,1]
[1,3,3,1]
[1,4,6,4,1]


è®¾è¦è®¡ç®—çš„äºŒç»´æ•°ç»„æ˜¯ cï¼Œè®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š

æ¯ä¸€æ’çš„ç¬¬ä¸€ä¸ªæ•°å’Œæœ€åä¸€ä¸ªæ•°éƒ½æ˜¯ 1ï¼Œå³ c\[i][0]=c\[i][i]=1ã€‚
å…¶ä½™æ•°å­—ï¼Œç­‰äºå·¦ä¸Šæ–¹çš„æ•°ï¼ŒåŠ ä¸Šæ­£ä¸Šæ–¹çš„æ•°ï¼Œå³ c\[i][j]=c\[iâˆ’1][jâˆ’1]+c\[iâˆ’1][j]ã€‚ä¾‹å¦‚ 4=1+3, 6=3+3 ç­‰ã€‚

```c++
class Solution {
public:
    vector<vector<int>> generate(int numRows) {
        vector<vector<int>> ans(numRows);
        for (int i = 0; i < numRows; i ++ ) {
            ans[i].resize(i + 1, 1);
            for (int j = 1; i >= 2 && j < i; j ++ ) {
                ans[i][j] = ans[i - 1][j - 1] + ans[i - 1][j];
            }
        }
        return ans;
    }
};
```

### [198. æ‰“å®¶åŠ«èˆ](https://leetcode.cn/problems/house-robber/)

#### é¢˜ç›®æè¿°

ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œ**å¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦**ã€‚

ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  **ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹** ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼š[1,2,3,1]
è¾“å‡ºï¼š4
è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 1) ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 3)ã€‚
     å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼š[2,7,9,3,1]
è¾“å‡ºï¼š12
è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 2), å·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 9)ï¼Œæ¥ç€å·çªƒ 5 å·æˆ¿å±‹ (é‡‘é¢ = 1)ã€‚
     å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 2 + 9 + 1 = 12 ã€‚
```

**æç¤ºï¼š**

- `1 <= nums.length <= 100`
- `0 <= nums[i] <= 400`

#### é¢˜è§£

1. å®šä¹‰dpæ•°ç»„ğŸŒŸï¼šå·çªƒå®Œç¬¬iå®¶åï¼Œèƒ½å·åˆ°çš„æœ€å¤šé’±ä¸ºdp[i]ï¼›
2. åˆ™é€’æ¨å…¬å¼ä¸ºï¼šdp[i] = max(dp[i - 2] + nums[i - 1], dp[i - 1])ï¼›è¡¨ç¤ºå½“å‰iç”± â€œä¸Šä¸€å®¶å·ï¼Œå½“å‰ä¸å·â€ â• â€œä¸Šä¸€å®¶ä¸å·ï¼Œå½“å‰å·â€ ä¸¤ç§æƒ…å†µæ„æˆï¼›
3. è¿”å›æœ€åä¸€ä¸ªdpï¼›

```c++
class Solution {
public:
    int rob(vector<int>& nums) {
        // 1 å®šä¹‰dpæ•°ç»„ï¼šå·çªƒå®Œç¬¬iå®¶åï¼Œèƒ½å·åˆ°çš„æœ€å¤šé’±ä¸ºdp[i]
        vector<int> dp(nums.size() + 1, 0);

        // 2 é€’æ¨
        for (int i = 1; i <= nums.size(); i ++ ) {
            cout << i << endl;
            if (i == 1) dp[i] = nums[i - 1];
            else {
                dp[i] = max(dp[i - 1], dp[i - 2] + nums[i - 1]);
            }
        }

        return dp[nums.size()];
    }
};
```

### [279. å®Œå…¨å¹³æ–¹æ•°](https://leetcode.cn/problems/perfect-squares/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¿”å› *å’Œä¸º `n` çš„å®Œå…¨å¹³æ–¹æ•°çš„æœ€å°‘æ•°é‡* ã€‚

**å®Œå…¨å¹³æ–¹æ•°** æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå…¶å€¼ç­‰äºå¦ä¸€ä¸ªæ•´æ•°çš„å¹³æ–¹ï¼›æ¢å¥è¯è¯´ï¼Œå…¶å€¼ç­‰äºä¸€ä¸ªæ•´æ•°è‡ªä¹˜çš„ç§¯ã€‚ä¾‹å¦‚ï¼Œ`1`ã€`4`ã€`9` å’Œ `16` éƒ½æ˜¯å®Œå…¨å¹³æ–¹æ•°ï¼Œè€Œ `3` å’Œ `11` ä¸æ˜¯ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 12
è¾“å‡ºï¼š3 
è§£é‡Šï¼š12 = 4 + 4 + 4
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 13
è¾“å‡ºï¼š2
è§£é‡Šï¼š13 = 4 + 9
```

**æç¤ºï¼š**

- `1 <= n <= 104`

#### é¢˜è§£

**åŠ¨æ€è§„åˆ’â€”â€”èƒŒåŒ…é—®é¢˜**

åŠ¨è§„äº”éƒ¨æ›²åˆ†æå¦‚ä¸‹ï¼š

1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

**dp[j]ï¼šå’Œä¸ºjçš„å®Œå…¨å¹³æ–¹æ•°çš„æœ€å°‘æ•°é‡ä¸ºdp[j]**

2. ç¡®å®šé€’æ¨å…¬å¼

dp[j] å¯ä»¥ç”±dp[j - i * i]æ¨å‡ºï¼Œ dp[j - i * i] + 1 ä¾¿å¯ä»¥å‡‘æˆdp[j]ã€‚

æ­¤æ—¶æˆ‘ä»¬è¦é€‰æ‹©æœ€å°çš„dp[j]ï¼Œæ‰€ä»¥é€’æ¨å…¬å¼ï¼šdp[j] = min(dp[j - i * i] + 1, dp[j]);

3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

dp[0]è¡¨ç¤º å’Œä¸º0çš„å®Œå…¨å¹³æ–¹æ•°çš„æœ€å°æ•°é‡ï¼Œé‚£ä¹ˆdp[0]ä¸€å®šæ˜¯0ã€‚

æœ‰åŒå­¦é—®é¢˜ï¼Œé‚£0 * 0 ä¹Ÿç®—æ˜¯ä¸€ç§å•Šï¼Œä¸ºå•¥dp[0] å°±æ˜¯ 0å‘¢ï¼Ÿ

çœ‹é¢˜ç›®æè¿°ï¼Œæ‰¾åˆ°è‹¥å¹²ä¸ªå®Œå…¨å¹³æ–¹æ•°ï¼ˆæ¯”å¦‚ 1, 4, 9, 16, ...ï¼‰ï¼Œé¢˜ç›®æè¿°ä¸­å¯æ²¡è¯´è¦ä»0å¼€å§‹ï¼Œdp[0]=0å®Œå…¨æ˜¯ä¸ºäº†é€’æ¨å…¬å¼ã€‚

é0ä¸‹æ ‡çš„dp[j]åº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ

ä»é€’å½’å…¬å¼dp[j] = min(dp[j - i * i] + 1, dp[j]);ä¸­å¯ä»¥çœ‹å‡ºæ¯æ¬¡dp[j]éƒ½è¦é€‰æœ€å°çš„ï¼Œ**æ‰€ä»¥é0ä¸‹æ ‡çš„dp[j]ä¸€å®šè¦åˆå§‹ä¸ºæœ€å¤§å€¼ï¼Œè¿™æ ·dp[j]åœ¨é€’æ¨çš„æ—¶å€™æ‰ä¸ä¼šè¢«åˆå§‹å€¼è¦†ç›–**ã€‚

4. ç¡®å®šéå†é¡ºåº

æˆ‘ä»¬çŸ¥é“è¿™æ˜¯å®Œå…¨èƒŒåŒ…ï¼Œ

å¦‚æœæ±‚ç»„åˆæ•°å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…ã€‚

å¦‚æœæ±‚æ’åˆ—æ•°å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“ã€‚

```c++
class Solution {
public:
    int numSquares(int n) {
        // 1 å®šä¹‰dpï¼šå’Œä¸ºiçš„å®Œå…¨å¹³æ–¹æ•°çš„æœ€å°‘æ•°é‡ä¸ºdp[i]
        vector<int> dp(n + 1, INT_MAX);

        // 2 åˆå§‹åŒ–
        dp[0] = 0;

        // 3 é€’æ¨
        for (int i = 0; i <= n; i++) { // éå†èƒŒåŒ…
            for (int j = 1; j * j <= i; j++) { // éå†ç‰©å“
              	// æ³¨æ„è¿™é‡Œå¿…é¡»æ˜¯j * j <= iï¼Œå› ä¸ºå½“ièƒ½å¼€æ–¹çš„æ—¶å€™ï¼Œåªéœ€è¦dp[0] + 1 = 1ï¼Œ
              	// ä¹Ÿè¯´æ˜äº†ä¸ºä»€ä¹ˆè¦åˆå§‹åŒ–dp[0] = 0ï¼›
                dp[i] = min(dp[i - j * j] + 1, dp[i]);
            }
        }

        // for (int i : dp) printf("%d ", i);
        // printf("\n");

        return dp[n];
    }
};
```

### [322. é›¶é’±å…‘æ¢](https://leetcode.cn/problems/coin-change/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `coins` ï¼Œè¡¨ç¤ºä¸åŒé¢é¢çš„ç¡¬å¸ï¼›ä»¥åŠä¸€ä¸ªæ•´æ•° `amount` ï¼Œè¡¨ç¤ºæ€»é‡‘é¢ã€‚

è®¡ç®—å¹¶è¿”å›å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„ **æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°** ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å› `-1` ã€‚

ä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯æ— é™çš„ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šcoins = [1, 2, 5], amount = 11
è¾“å‡ºï¼š3 
è§£é‡Šï¼š11 = 5 + 5 + 1
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šcoins = [2], amount = 3
è¾“å‡ºï¼š-1
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šcoins = [1], amount = 0
è¾“å‡ºï¼š0
```

**æç¤ºï¼š**

- `1 <= coins.length <= 12`
- `1 <= coins[i] <= 231 - 1`
- `0 <= amount <= 104`

#### é¢˜è§£

dpæ•°ç»„å®šä¹‰ï¼šå‡‘æˆé‡‘é¢iæ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ä¸ºdp[i]ã€‚

æœ¬é¢˜æ±‚é’±å¸æœ€å°ä¸ªæ•°ï¼Œ**é‚£ä¹ˆé’±å¸æœ‰é¡ºåºå’Œæ²¡æœ‰é¡ºåºéƒ½å¯ä»¥ï¼Œéƒ½ä¸å½±å“é’±å¸çš„æœ€å°ä¸ªæ•°**ã€‚

æ‰€ä»¥æœ¬é¢˜å¹¶ä¸å¼ºè°ƒé›†åˆæ˜¯ç»„åˆè¿˜æ˜¯æ’åˆ—ã€‚

**å¦‚æœæ±‚ç»„åˆæ•°å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…**ã€‚

**å¦‚æœæ±‚æ’åˆ—æ•°å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“**ã€‚

```c++
class Solution {
public:
    int coinChange(vector<int>& coins, int amount) {
        // 1 å®šä¹‰dpæ•°ç»„
        vector<int> dp(amount + 1, INT_MAX);

        // 2 åˆå§‹åŒ–
        dp[0] = 0;

        // 3 é€’æ¨å…¬å¼
        for (int i = 1; i <= amount; i ++ ) {
            for (int j = 0; j < coins.size(); j ++ ) {
                // è¿™é‡Œè¿˜è¦å•ç‹¬åˆ¤æ–­dp[i - coins[j]]ï¼Œ
              	// å¦‚æœå®ƒæ˜¯â€œæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢â€œï¼Œ
                // å³INT_MAXï¼Œåˆ™ç›´æ¥è·³è¿‡
                if (i - coins[j] >= 0 && dp[i - coins[j]] != INT_MAX) {  
                    dp[i] = min(dp[i], dp[i - coins[j]] + 1);
                }
            }
        }

        return dp[amount] == INT_MAX ? -1 : dp[amount];
    }
};
```

### [139. å•è¯æ‹†åˆ†](https://leetcode.cn/problems/word-break/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ `wordDict` ä½œä¸ºå­—å…¸ã€‚å¦‚æœå¯ä»¥åˆ©ç”¨å­—å…¸ä¸­å‡ºç°çš„ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯æ‹¼æ¥å‡º `s` åˆ™è¿”å› `true`ã€‚

**æ³¨æ„ï¼š**ä¸è¦æ±‚å­—å…¸ä¸­å‡ºç°çš„å•è¯å…¨éƒ¨éƒ½ä½¿ç”¨ï¼Œå¹¶ä¸”å­—å…¸ä¸­çš„å•è¯å¯ä»¥é‡å¤ä½¿ç”¨ã€‚ 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥: s = "leetcode", wordDict = ["leet", "code"]
è¾“å‡º: true
è§£é‡Š: è¿”å› true å› ä¸º "leetcode" å¯ä»¥ç”± "leet" å’Œ "code" æ‹¼æ¥æˆã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥: s = "applepenapple", wordDict = ["apple", "pen"]
è¾“å‡º: true
è§£é‡Š: è¿”å› true å› ä¸º "applepenapple" å¯ä»¥ç”± "apple" "pen" "apple" æ‹¼æ¥æˆã€‚
     æ³¨æ„ï¼Œä½ å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥: s = "catsandog", wordDict = ["cats", "dog", "sand", "and", "cat"]
è¾“å‡º: false
```

**æç¤ºï¼š**

- `1 <= s.length <= 300`
- `1 <= wordDict.length <= 1000`
- `1 <= wordDict[i].length <= 20`
- `s` å’Œ `wordDict[i]` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- `wordDict` ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸² **äº’ä¸ç›¸åŒ**

#### é¢˜è§£

**æ‹†åˆ†æ—¶å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ï¼Œå®Œå…¨èƒŒåŒ…é—®é¢˜ï¼**

1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

**dp[i] : å­—ç¬¦ä¸²é•¿åº¦ä¸ºiçš„è¯ï¼Œdp[i]ä¸ºtrueï¼Œè¡¨ç¤ºå¯ä»¥æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯**ã€‚

2. ç¡®å®šé€’æ¨å…¬å¼

å¦‚æœç¡®å®šdp[j] æ˜¯trueï¼Œä¸” [j, i] è¿™ä¸ªåŒºé—´çš„å­ä¸²å‡ºç°åœ¨å­—å…¸é‡Œï¼Œé‚£ä¹ˆdp[i]ä¸€å®šæ˜¯trueã€‚ï¼ˆj < i ï¼‰ã€‚

æ‰€ä»¥é€’æ¨å…¬å¼æ˜¯ if([j, i] è¿™ä¸ªåŒºé—´çš„å­ä¸²å‡ºç°åœ¨å­—å…¸é‡Œ && dp[j]æ˜¯true) é‚£ä¹ˆ dp[i] = trueã€‚

3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

ä»é€’æ¨å…¬å¼ä¸­å¯ä»¥çœ‹å‡ºdp[i]ä¾èµ–äºdp[j]çš„çŠ¶æ€ï¼Œå› æ­¤dp[0]å°±æ˜¯é€’æ¨çš„æ ¹åŸºï¼Œdp[0]ä¸€å®šè¦ä¸ºtrueï¼Œå¦åˆ™é€’æ¨ä¸‹å»åé¢éƒ½éƒ½æ˜¯falseäº†ã€‚

4. ç¡®å®šéå†é¡ºåº

æœ¬é¢˜å…¶å®æˆ‘ä»¬æ±‚çš„æ˜¯æ’åˆ—æ•°ï¼Œä¸ºä»€ä¹ˆå‘¢ã€‚ æ‹¿ s = "applepenapple", wordDict = ["apple", "pen"] ä¸¾ä¾‹ã€‚

"apple", "pen" æ˜¯ç‰©å“ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦æ±‚ ç‰©å“çš„ç»„åˆä¸€å®šæ˜¯ "apple" + "pen" + "apple" æ‰èƒ½ç»„æˆ "applepenapple"ã€‚

"apple" + "apple" + "pen" æˆ–è€… "pen" + "apple" + "apple" æ˜¯ä¸å¯ä»¥çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ˜¯**å¼ºè°ƒç‰©å“ä¹‹é—´é¡ºåº**ã€‚

> å¼ºè°ƒç‰©å“é¡ºåºçš„éƒ½æ˜¯â€œå…ˆèƒŒåŒ…å†ç‰©å“â€ã€‚

æ‰€ä»¥è¯´ï¼Œæœ¬é¢˜ä¸€å®šæ˜¯ å…ˆéå† èƒŒåŒ…ï¼Œå†éå†ç‰©å“ã€‚

5. ä¸¾ä¾‹æ¨å¯¼dp[i]

ä»¥è¾“å…¥: s = "leetcode", wordDict = ["leet", "code"]ä¸ºä¾‹ï¼ŒdpçŠ¶æ€å¦‚å›¾ï¼š

![139.å•è¯æ‹†åˆ†](https://file.kamacoder.com/pics/20210202162652727.jpg)

dp[s.size()]å°±æ˜¯æœ€ç»ˆç»“æœã€‚

```c++
class Solution {
public:
    bool wordBreak(string s, vector<string>& wordDict) {
        unordered_set<string> wordSet(wordDict.begin(), wordDict.end());
        // 1 å®šä¹‰dpï¼šå­—ç¬¦ä¸²é•¿åº¦ä¸ºiçš„è¯ï¼Œdp[i]ä¸ºtrueï¼Œè¡¨ç¤ºå¯ä»¥æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯
        vector<bool> dp(s.size() + 1, false);
        dp[0] = true;

        // 2 é€’æ¨
        for (int i = 1; i <= s.size(); i ++ ) {
            for (int j = 0; j < i; j ++ ) {
                string word = s.substr(j, i - j);
                if (wordSet.find(word) != wordSet.end() && dp[j] == true) {
                    dp[i] = true;
                    cout << j << i << word << endl;
                }
            }
        }

        return dp[s.size()];
    }
};
```

### [300. æœ€é•¿é€’å¢å­åºåˆ—](https://leetcode.cn/problems/longest-increasing-subsequence/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚

**å­åºåˆ—** æ˜¯ç”±æ•°ç»„æ´¾ç”Ÿè€Œæ¥çš„åºåˆ—ï¼Œåˆ é™¤ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰æ•°ç»„ä¸­çš„å…ƒç´ è€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ`[3,6,2,7]` æ˜¯æ•°ç»„ `[0,3,1,6,2,2,7]` çš„å­åºåˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [10,9,2,5,3,7,101,18]
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿é€’å¢å­åºåˆ—æ˜¯ [2,3,7,101]ï¼Œå› æ­¤é•¿åº¦ä¸º 4 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0,1,0,3,2,3]
è¾“å‡ºï¼š4
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [7,7,7,7,7,7,7]
è¾“å‡ºï¼š1
```

**æç¤ºï¼š**

- `1 <= nums.length <= 2500`
- `-104 <= nums[i] <= 104`

**è¿›é˜¶ï¼š**

- ä½ èƒ½å°†ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é™ä½åˆ° `O(n log(n))` å—?

#### é¢˜è§£

dp[i]è¡¨ç¤ºiä¹‹å‰åŒ…æ‹¬içš„ä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ï¼›
ç„¶ååŒé‡å¾ªç¯éå†dpæ—¶ï¼Œç¬¬äºŒé‡åªè¦é‡åˆ°nums[i] > nums[j]çš„æƒ…å†µï¼Œå°±æ›´æ–°dp[i] = max(dp[i], dp[j] + 1);

```c++
class Solution {
public:
    int lengthOfLIS(vector<int>& nums) {
        // 1 dpæ•°ç»„
        vector<int> dp(nums.size(), 1);

        // 2 åˆå§‹åŒ–dpæ•°ç»„
        dp[0] = 1;

        // 3 é€’æ¨
        int ans = 1;
        for (int i = 1; i < nums.size(); i ++ ) {
            for (int j = 0; j < i; j ++ ) {
                if (nums[i] > nums[j]) {
                    // æ ¹æ®å‰é¢çš„æœ€é•¿åºåˆ— + 1
                    dp[i] = max(dp[i], dp[j] + 1);
                }
            }
            ans = max(ans, dp[i]);
        }

        return ans;
    }
};
```

### [152. ä¹˜ç§¯æœ€å¤§å­æ•°ç»„](https://leetcode.cn/problems/maximum-product-subarray/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œè¯·ä½ æ‰¾å‡ºæ•°ç»„ä¸­ä¹˜ç§¯æœ€å¤§çš„éç©ºè¿ç»­ å­æ•°ç»„ï¼ˆè¯¥å­æ•°ç»„ä¸­è‡³å°‘åŒ…å«ä¸€ä¸ªæ•°å­—ï¼‰ï¼Œå¹¶è¿”å›è¯¥å­æ•°ç»„æ‰€å¯¹åº”çš„ä¹˜ç§¯ã€‚

æµ‹è¯•ç”¨ä¾‹çš„ç­”æ¡ˆæ˜¯ä¸€ä¸ª **32-ä½** æ•´æ•°ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [2,3,-2,4]
è¾“å‡º: 6
è§£é‡Š: å­æ•°ç»„ [2,3] æœ‰æœ€å¤§ä¹˜ç§¯ 6ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [-2,0,-1]
è¾“å‡º: 0
è§£é‡Š: ç»“æœä¸èƒ½ä¸º 2, å› ä¸º [-2,-1] ä¸æ˜¯å­æ•°ç»„ã€‚
```

**æç¤º:**

- `1 <= nums.length <= 2 * 104`
- `-10 <= nums[i] <= 10`
- `nums` çš„ä»»ä½•å­æ•°ç»„çš„ä¹˜ç§¯éƒ½ **ä¿è¯** æ˜¯ä¸€ä¸ª **32-ä½** æ•´æ•°

#### é¢˜è§£

**å†™æ³•ä¸€**

 <img src="./assets/image-20250422162648639.png" alt="image-20250422162648639" style="zoom:40%;" />

 <img src="./assets/image-20250422162713000.png" alt="image-20250422162713000" style="zoom:40%;" />

```c++
class Solution {
public:
    int maxProduct(vector<int>& nums) {
        // 1 å®šä¹‰dpæ•°ç»„
        vector<int> fmax(nums.size(), 0);
        vector<int> fmin(nums.size(), 0);

        // 2 åˆå§‹åŒ–
        fmax[0] = nums[0];
        fmin[0] = nums[0];

        // 3 é€’æ¨
        int ans = nums[0];
        for (int i = 1; i < nums.size(); i ++ ) {
            int x = nums[i];
            fmax[i] = max({fmax[i - 1] * x, fmin[i - 1] * x, x});
            fmin[i] = min({fmax[i - 1] * x, fmin[i - 1] * x, x});

            // printf("%d %d\n", fmax[i], fmin[i]);
            ans = max(ans, fmax[i]);
        }

        return ans;
    }
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼šO(*n*)ï¼Œå…¶ä¸­ *n* æ˜¯ *nums* çš„é•¿åº¦ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šO(*n*)ã€‚

**å†™æ³•äºŒï¼ˆç©ºé—´ä¼˜åŒ–ï¼‰**

 <img src="./assets/image-20250422162804672.png" alt="image-20250422162804672" style="zoom:40%;" />

```c++
class Solution {
public:
    int maxProduct(vector<int>& nums) {
        int ans = INT_MIN; // æ³¨æ„ç­”æ¡ˆå¯èƒ½æ˜¯è´Ÿæ•°
        int f_max = 1, f_min = 1;
        for (int x : nums) {
            int mx = f_max;
            f_max = max({f_max * x, f_min * x, x});
            f_min = min({mx * x, f_min * x, x});
            ans = max(ans, f_max);
        }
        return ans;
    }
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼šO(*n*)ï¼Œå…¶ä¸­ *n* æ˜¯ *nums* çš„é•¿åº¦ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚



### [416. åˆ†å‰²ç­‰å’Œå­é›†](https://leetcode.cn/problems/partition-equal-subset-sum/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ª **åªåŒ…å«æ­£æ•´æ•°** çš„ **éç©º** æ•°ç»„ `nums` ã€‚è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯ä»¥å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—ä¸¤ä¸ªå­é›†çš„å…ƒç´ å’Œç›¸ç­‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,5,11,5]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šæ•°ç»„å¯ä»¥åˆ†å‰²æˆ [1, 5, 5] å’Œ [11] ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3,5]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ•°ç»„ä¸èƒ½åˆ†å‰²æˆä¸¤ä¸ªå…ƒç´ å’Œç›¸ç­‰çš„å­é›†ã€‚
```

**æç¤ºï¼š**

- `1 <= nums.length <= 200`
- `1 <= nums[i] <= 100`

#### é¢˜è§£

**01èƒŒåŒ…é—®é¢˜**

> ä¸¤ä¸ªå…³é”®ç‚¹ï¼š
>
> 1. 0-1èƒŒåŒ…ï¼Œé¡¾åæ€ä¹‰åªæœ‰ä¸€ä¸ªç‰©å“ï¼Œå› æ­¤è¦å…ˆéå†ç‰©å“ï¼Œå¦åˆ™ç‰©å“ä¼šé‡å¤æ”¾å…¥ï¼›
>
> 2. å€’åºéå†èƒŒåŒ…ï¼šæ˜¯å› ä¸ºå¦‚æœ **æ­£åºéå† `j`**ï¼Œé‚£ä¹ˆ `dp[j - nums[i]]` å¯èƒ½åœ¨æœ¬è½®å·²ç»è¢« `dp[j]` æ›´æ–°è¿‡ï¼Œä¼šå¯¼è‡´é‡å¤é€‰å–å½“å‰ç‰©å“ã€‚

1. æ±‚æ•°å­—æ€»å’Œsumï¼Œå¦‚æœnumsä¸­çš„æ•°å­—èƒ½å¤Ÿè£…æ»¡sum / 2ï¼Œè¯´æ˜æ•°å­—å¯ä»¥è¢«ç­‰åˆ†æˆä¸¤éƒ¨åˆ†ï¼›

2. å®šä¹‰dpæ•°ç»„ï¼šå®¹é‡ä¸ºiçš„èƒŒåŒ…ï¼Œå…¶ä»·å€¼æœ€å¤§ä¸ºdp[i]ï¼›

3. è¯¥é¢˜ç›®ä¸­`ç‰©å“içš„é‡é‡æ˜¯nums[i]ï¼Œå…¶ä»·å€¼ä¹Ÿæ˜¯nums[i]`ï¼Œå› æ­¤é€’æ¨å…¬å¼ï¼š

   ```c++
   dp[j] = max(dp[j], dp[j - nums[i]] + nums[i]);
   ```

   æ³¨æ„ï¼Œç”±äºè¯¥é¢˜ç›®æ˜¯â€œ01èƒŒåŒ…é—®é¢˜â€ + â€œ1ç»´dpæ•°ç»„â€ï¼Œå› æ­¤è¦å…ˆéå†ç‰©å“å†éå†èƒŒåŒ…ï¼Œä¸”éå†èƒŒåŒ…æ—¶è¦å€’åºï¼ˆè¯¦ç»†åˆ†æè§â€œç»éªŒæ€»ç»“â€”â€”èƒŒåŒ…é—®é¢˜â€ï¼›

4. æ ¹æ®dpæ•°ç»„å®šä¹‰ï¼Œå¦‚æœdpæ•°ç»„è¢«å¡«æ»¡ï¼ˆå³â€œèƒ½å¤Ÿè£…æ»¡sum / 2â€ï¼‰ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseï¼š

   ```c++
   if (dp[(sum / 2)] == (sum / 2)) return true;
           else return false;
   ```

```c++
class Solution {
public:
    bool canPartition(vector<int>& nums) {
        // æ±‚æ€»å’Œ
        int sum = 0;
        for (int n : nums) sum += n;
        // å¦‚æœsumæ˜¯å¥‡æ•°åˆ™è‚¯å®šåˆ†å‰²ä¸å‡º
        if (sum % 2 == 1) return false;

        // 1 å®šä¹‰dpæ•°ç»„ï¼šå®¹é‡ä¸ºiçš„èƒŒåŒ…ï¼Œå…¶ä»·å€¼æœ€å¤§ä¸ºdp[i]
        vector<int> dp((sum / 2) + 1);

        // 2 åˆå§‹åŒ–dpï¼Œé»˜è®¤å…¨0å³å¯ï¼Œä¸éœ€è¦åˆå§‹åŒ–
        for (int i = 0; i < nums.size(); i ++ ) {
            for (int j = (sum / 2); j > 0; j -- ) {
                // printf("%d %d\n", nums[i], j);
                if (nums[i] > j) continue;
                else {
                  	// ç‰©å“içš„é‡é‡æ˜¯nums[i]ï¼Œå…¶ä»·å€¼ä¹Ÿæ˜¯nums[i]ã€‚
                  	// dp[j] = max(ä¸æ”¾ç‰©å“iï¼Œæ”¾ç‰©å“i)
                    dp[j] = max(dp[j], dp[j - nums[i]] + nums[i]);  
                }
            }
        }

        // æ£€æŸ¥dpæ•°ç»„
        // for (int i : dp) printf("%d ", i);
        // printf("\n");

        if (dp[(sum / 2)] == (sum / 2)) return true;
        else return false;
    }
};
```





### [32. æœ€é•¿æœ‰æ•ˆæ‹¬å·](https://leetcode.cn/problems/longest-valid-parentheses/)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªåªåŒ…å« `'('` å’Œ `')'` çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "(()"
è¾“å‡ºï¼š2
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = ")()())"
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()()"
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = ""
è¾“å‡ºï¼š0
```

**æç¤ºï¼š**

- `0 <= s.length <= 3 * 104`
- `s[i]` ä¸º `'('` æˆ– `')'`

#### é¢˜è§£

 <img src="./assets/image-20250422195636544.png" alt="image-20250422195636544" style="zoom:40%;" />

 <img src="./assets/image-20250422200327393.png" alt="image-20250422200327393" style="zoom:40%;" />

 <img src="./assets/image-20250422200349333.png" alt="image-20250422200349333" style="zoom:40%;" />

 <img src="./assets/image-20250422200432191.png" alt="image-20250422200432191" style="zoom:40%;" />

 <img src="./assets/image-20250422200533632.png" alt="image-20250422200533632" style="zoom:40%;" />

 <img src="./assets/image-20250422200554672.png" alt="image-20250422200554672" style="zoom:40%;" />

> ä»¥s = [ ), (, (, ), (, ), ) ]ä¸ºä¾‹ï¼Œ
>
> åˆ™æ•´ä½“é€’æ¨æƒ…å†µå¦‚ä¸‹ï¼š
>
>  <img src="./assets/image-20250422201043356.png" alt="image-20250422201043356" style="zoom:30%;" />
>
> 1. å¯¹äºi = 0, 1, 2 ç”±äºæ²¡æœ‰å¯¹åº”çš„s[i - 1]é…å¯¹ï¼Œåˆ™dpéƒ½ä¸º0ï¼›
>
> 2. i = 3æ—¶ï¼Œç¬¦åˆæƒ…å†µ1ä¸­çš„s[i - 1] == '('ï¼Œé•¿åº¦+2ï¼ˆé»„è‰²æ‹¬å·ï¼‰ï¼›
>
> 3. i = 5æ—¶åŒä¸Šï¼›
>
> 4. i = 6æ—¶ï¼Œç”±äºdp[5] = 4å·²ç»é…å¯¹ï¼ˆè¯´æ˜index 5 å¾€å‰4ä¸ªå­—ç¬¦ï¼Œè¿™ä¸€æ®µæ˜¯æœ‰æ•ˆçš„ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦è·¨è¿‡æœ‰æ•ˆé…å¯¹çš„è¿™ä¸€æ®µå­—ç¬¦ï¼Œ**æ‰¾åˆ°è¿™ä¸€æ®µå­—ç¬¦å‰çš„ä¸€ä¸ªå­—ç¬¦**ï¼ˆå¦‚å›¾ä¸­æœ€ä¸Šé¢æ›²çº¿æ‰€ç¤ºï¼‰ï¼›
>
>    å¦‚æœè¿™ä¸¤ä¸ªå­—ç¬¦åŒ¹é…äº†ï¼Œåˆ™dp[i] = dp[i - dp[i - 1] - 2]ï¼ˆè·¨è¶ŠåŒ¹é…å­—ç¬¦çš„å‰ä¸€ä½dpï¼‰ + dp[i - 1]ï¼ˆä¸­é—´æœ‰æ•ˆçš„4ä½ï¼Œé»„è‰²æ¡†ï¼‰+ 2ï¼ˆè“è‰²æ¡†ï¼‰
>
> 5. åœ¨è¿‡ç¨‹ä¸­è®°å½•maxVal = max(maxVal, dp[i])ï¼Œå¹¶æœ€ç»ˆreturnï¼›

```c++
class Solution {
public:
    int longestValidParentheses(string s) {
        // 1 dpæ•°ç»„
        vector<int> dp(s.size(), 0);

        // 2 é€’æ¨
        int maxval = 0;
        for (int i = 1; i < s.size(); i ++ ) {
            if (s[i] == ')') {
                if (s[i - 1] == '(') {
                    if (i - 2 >= 0) {
                        dp[i] = dp[i - 2] + 2;
                    } else {
                        dp[i] = 2;
                    }
                } else if (dp[i - 1] > 0) {
                    if (i - dp[i - 1] - 1 >= 0 && s[i - dp[i - 1] - 1] == '(') {
                        if (i - dp[i - 1] - 2 >= 0) {
                            dp[i] = dp[i - dp[i - 1] - 2] + dp[i - 1] + 2;
                        } else {
                            dp[i] = dp[i - 1] + 2;
                        }
                    }
                }
            }
            maxval = max(maxval, dp[i]);
        }

        return maxval;
    }
};
```



## å¤šç»´åŠ¨æ€è§„åˆ’

### [62. ä¸åŒè·¯å¾„](https://leetcode.cn/problems/unique-paths/)

#### é¢˜ç›®æè¿°

ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª `m x n` ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œStartâ€ ï¼‰ã€‚

æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œFinishâ€ ï¼‰ã€‚

é—®æ€»å…±æœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ

**ç¤ºä¾‹ 1ï¼š**

 ![img](./assets/1697422740-adxmsI-image.png)

```
è¾“å…¥ï¼šm = 3, n = 7
è¾“å‡ºï¼š28
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šm = 3, n = 2
è¾“å‡ºï¼š3
è§£é‡Šï¼š
ä»å·¦ä¸Šè§’å¼€å§‹ï¼Œæ€»å…±æœ‰ 3 æ¡è·¯å¾„å¯ä»¥åˆ°è¾¾å³ä¸‹è§’ã€‚
1. å‘å³ -> å‘ä¸‹ -> å‘ä¸‹
2. å‘ä¸‹ -> å‘ä¸‹ -> å‘å³
3. å‘ä¸‹ -> å‘å³ -> å‘ä¸‹
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šm = 7, n = 3
è¾“å‡ºï¼š28
```

**ç¤ºä¾‹ 4ï¼š**

```
è¾“å…¥ï¼šm = 3, n = 3
è¾“å‡ºï¼š6
```

**æç¤ºï¼š**

- `1 <= m, n <= 100`
- é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆå°äºç­‰äº `2 * 109`

#### é¢˜è§£

æ³¨æ„ï¼Œåˆå§‹åŒ–dpæ—¶ï¼Œéœ€è¦å°†dp\[i][0]å’Œdp\[0][j]åˆå§‹åŒ–ä¸º1ï¼Œå› ä¸ºä»(0, 0)çš„ä½ç½®åˆ°(i, 0)çš„è·¯å¾„åªæœ‰ä¸€æ¡ï¼ˆåªèƒ½å¾€å³è¾¹å’Œä¸‹è¾¹èµ°ï¼‰ã€‚

```c++
class Solution {
public:
    int uniquePaths(int m, int n) {
        // 1 å®šä¹‰dpæ•°ç»„
        vector<vector<int>> dp(m, vector<int>(n, 0));

        // 2 åˆå§‹åŒ–dpæ•°ç»„
        for (int i = 0; i < m; i ++ ) dp[i][0] = 1;
        for (int i = 0; i < n; i ++ ) dp[0][i] = 1;

        // 3 é€’æ¨
        for (int i = 1; i < m; i ++ ) {
            for (int j = 1; j < n; j ++ ) {
                dp[i][j] = dp[i - 1][j] + dp[i][j - 1];
            }
        }

        return dp[m - 1][n - 1];
    }
};
```

### [64. æœ€å°è·¯å¾„å’Œ](https://leetcode.cn/problems/minimum-path-sum/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªåŒ…å«éè´Ÿæ•´æ•°çš„ `*m* x *n*` ç½‘æ ¼ `grid` ï¼Œè¯·æ‰¾å‡ºä¸€æ¡ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ•°å­—æ€»å’Œä¸ºæœ€å°ã€‚

**è¯´æ˜ï¼š**æ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚

**ç¤ºä¾‹ 1ï¼š**

 ![img](./assets/minpath.jpg)

```
è¾“å…¥ï¼šgrid = [[1,3,1],[1,5,1],[4,2,1]]
è¾“å‡ºï¼š7
è§£é‡Šï¼šå› ä¸ºè·¯å¾„ 1â†’3â†’1â†’1â†’1 çš„æ€»å’Œæœ€å°ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šgrid = [[1,2,3],[4,5,6]]
è¾“å‡ºï¼š12
```

**æç¤ºï¼š**

- `m == grid.length`
- `n == grid[i].length`
- `1 <= m, n <= 200`
- `0 <= grid[i][j] <= 200`

#### é¢˜è§£

è·Ÿä¸Šä¸€é¢˜ 62. ä¸åŒè·¯å¾„ å¾ˆåƒï¼Œå…ˆåˆå§‹åŒ–ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ï¼Œç„¶åé€’æ¨å·¦è¾¹å’Œä¸Šè¾¹ä¸¤ä¸ªæ–¹å‘ï¼š

`dp[i][j] = min(dp[i - 1][j], dp[i][j - 1]) + grid[i][j];`

```c++
class Solution {
public:
    int minPathSum(vector<vector<int>>& grid) {
        int row = grid.size();
        int col = grid[0].size();
        // 1 å®šä¹‰dpæ•°ç»„
        vector<vector<int>> dp(row, vector<int>(col, 0));

        // 2 åˆå§‹åŒ–dpæ•°ç»„
        dp[0][0] = grid[0][0];
        for (int i = 1; i < col; i ++ ) dp[0][i] = dp[0][i - 1] + grid[0][i];
        for (int i = 1; i < row; i ++ ) dp[i][0] = dp[i - 1][0] + grid[i][0];

        // 3 é€’æ¨
        for (int i = 1; i < row; i ++ ) {
            for (int j = 1; j < col; j ++ ) {
                dp[i][j] = min(dp[i - 1][j], dp[i][j - 1]) + grid[i][j];
                // printf("%d %d %d\n", i, j, dp[i][j]);
            }
        }

        return dp[row - 1][col - 1];
    }
};
```

### [5. æœ€é•¿å›æ–‡å­ä¸²](https://leetcode.cn/problems/longest-palindromic-substring/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œæ‰¾åˆ° `s` ä¸­æœ€é•¿çš„ å›æ–‡ å­ä¸²ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "babad"
è¾“å‡ºï¼š"bab"
è§£é‡Šï¼š"aba" åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "cbbd"
è¾“å‡ºï¼š"bb"
```

**æç¤ºï¼š**

- `1 <= s.length <= 1000`
- `s` ä»…ç”±æ•°å­—å’Œè‹±æ–‡å­—æ¯ç»„æˆ

#### é¢˜è§£

1. å®šä¹‰dpæ•°ç»„ï¼š`boolean dp[l][r]` è¡¨ç¤ºå­—ç¬¦ä¸²ä» `i` åˆ° `j` è¿™æ®µæ˜¯å¦ä¸ºå›æ–‡ã€‚è¯•æƒ³å¦‚æœ `dp[l][r]=true`ï¼Œæˆ‘ä»¬è¦åˆ¤æ–­ `dp[l-1][r+1]` æ˜¯å¦ä¸ºå›æ–‡ã€‚åªéœ€è¦åˆ¤æ–­å­—ç¬¦ä¸²åœ¨(`l-1`)å’Œï¼ˆ`r+1`)ä¸¤ä¸ªä½ç½®æ˜¯å¦ä¸ºç›¸åŒçš„å­—ç¬¦ã€‚

2. é€’æ¨å…¬å¼ï¼šåŒé‡forå¾ªç¯ï¼Œå¤–å±‚éå†å³ç«¯ç‚¹rï¼Œå†…å±‚éå†å·¦ç«¯ç‚¹lï¼Œå¦‚æœs[l] == s[r]å­—ç¬¦ä¸¤ä¾§ç›¸ç­‰åˆ™åˆ¤æ–­ï¼š

   - å¦‚æœr - l <= 2è¯´æ˜æ˜¯'aa'æˆ–'aba'è¿™ç§æƒ…å†µï¼Œå¯ä»¥ç›´æ¥åˆ¤å®šä¸ºå›æ–‡ï¼›
   - å¦‚æœr - l > 2åˆ™è¦åˆ¤æ–­lå’Œrä¸­é—´çš„éƒ¨åˆ†æ˜¯å¦ä¸ºå›æ–‡ï¼›

   å¦‚æœåˆ¤æ–­æˆç«‹åˆ™è¿›ä¸€æ­¥åˆ¤æ–­æœ€å¤§å­—ç¬¦é•¿åº¦ï¼Œå¹¶æ›´æ–°maxå€¼ã€‚

3. æœ€ç»ˆreturnæœ€é•¿å›æ–‡å­—ç¬¦ä¸²ï¼›

```c++
class Solution {
public:
    string longestPalindrome(string s) {
        // 1 ç‰¹æ®Šæƒ…å†µåˆ¤æ–­
        if (s.size() < 2) return s;

        // 2 dpæ•°ç»„ï¼šdp[l][r]è¡¨ç¤ºä¸‹æ ‡lï½rè¿™æ®µå­—ç¬¦ä¸²æ˜¯å¦å›æ–‡
        int length = s.size();
        vector<vector<bool>> dp(length, vector<bool>(length, false));

        // 3 é€’æ¨
        int maxlen = 1;  // æœ€é•¿å›æ–‡ä¸²çš„é•¿åº¦ï¼Œæœ€å°æ˜¯å•ä¸ªå­—ç¬¦ï¼Œé•¿åº¦ä¸º1
        int maxleft = 0;  //æœ€é•¿å›æ–‡ä¸²çš„èµ·ç‚¹index
        int maxright = 0;  //æœ€é•¿å›æ–‡ä¸²çš„ç»ˆç‚¹index
        for (int r = 1; r < length; r ++ ) {
            for (int l = 0; l < r; l ++ ) {
                // å¦‚æœs[l] == s[r]ï¼Œ
                // å¦‚æœr - l <= 2è¯´æ˜æ˜¯'aa'æˆ–'aba'è¿™ç§æƒ…å†µï¼Œå¯ä»¥ç›´æ¥åˆ¤å®šä¸ºå›æ–‡ï¼Œ
                // å¦‚æœr - l > 2åˆ™è¦åˆ¤æ–­lå’Œrä¸­é—´çš„éƒ¨åˆ†æ˜¯å¦ä¸ºå›æ–‡
                if (s[l] == s[r] && (r - l <= 2 || dp[l + 1][r - 1])) {
                    dp[l][r] = true;
                    if (r - l + 1 > maxlen) {
                        maxlen = r - l + 1;
                        maxleft = l;
                        maxright = r;
                    }
                }
            }
        }
        return s.substr(maxleft, maxlen);
    }
};
```



### [1143. æœ€é•¿å…¬å…±å­åºåˆ—](https://leetcode.cn/problems/longest-common-subsequence/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² `text1` å’Œ `text2`ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ **å…¬å…±å­åºåˆ—** çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ **å…¬å…±å­åºåˆ—** ï¼Œè¿”å› `0` ã€‚

ä¸€ä¸ªå­—ç¬¦ä¸²çš„ **å­åºåˆ—** æ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå®ƒæ˜¯ç”±åŸå­—ç¬¦ä¸²åœ¨ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹é¡ºåºçš„æƒ…å†µä¸‹åˆ é™¤æŸäº›å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ä»»ä½•å­—ç¬¦ï¼‰åç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚

- ä¾‹å¦‚ï¼Œ`"ace"` æ˜¯ `"abcde"` çš„å­åºåˆ—ï¼Œä½† `"aec"` ä¸æ˜¯ `"abcde"` çš„å­åºåˆ—ã€‚

ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ **å…¬å…±å­åºåˆ—** æ˜¯è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€å…±åŒæ‹¥æœ‰çš„å­åºåˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼štext1 = "abcde", text2 = "ace" 
è¾“å‡ºï¼š3  
è§£é‡Šï¼šæœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ "ace" ï¼Œå®ƒçš„é•¿åº¦ä¸º 3 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼štext1 = "abc", text2 = "abc"
è¾“å‡ºï¼š3
è§£é‡Šï¼šæœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ "abc" ï¼Œå®ƒçš„é•¿åº¦ä¸º 3 ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼štext1 = "abc", text2 = "def"
è¾“å‡ºï¼š0
è§£é‡Šï¼šä¸¤ä¸ªå­—ç¬¦ä¸²æ²¡æœ‰å…¬å…±å­åºåˆ—ï¼Œè¿”å› 0 ã€‚
```

**æç¤ºï¼š**

- `1 <= text1.length, text2.length <= 1000`
- `text1` å’Œ `text2` ä»…ç”±å°å†™è‹±æ–‡å­—ç¬¦ç»„æˆã€‚

#### é¢˜è§£

ä¸ä¸Šä¸€é¢˜ 5. æœ€é•¿å›æ–‡å­ä¸² å’Œ 718. æœ€é•¿é‡å¤å­æ•°ç»„ å¾ˆåƒï¼›

dpæ•°ç»„ï¼šdp\[i][j]è¡¨ç¤ºä»¥i - 1ç»“å°¾çš„text1å’Œä»¥j - 1ç»“å°¾çš„text2çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ï¼›

> æ³¨æ„ï¼Œè¿™ç§ä¸¤ä¸ª æ•°ç»„/å­—ç¬¦ä¸² å¯¹æ¯”çš„é¢˜çš„dpæ•°ç»„çš„å®šä¹‰æ–¹å¼ï¼Œå¤§è‡´éƒ½ç›¸åŒï¼Ÿ

åŒºåˆ«åœ¨äºå½“text1[i - 1] != text2[j - 1]æ—¶ï¼Œä¹Ÿè¦èµ‹å€¼max(dp\[i][j - 1], dp\[i - 1][j])ï¼Œå› ä¸ºå…¬å…±å­åºåˆ—ä¸åƒå­æ•°ç»„ä¸è¿ç»­ä¹Ÿç®—å…¥å…¶ä¸­ã€‚(è¿™ä¸€æ­¥æœ€å…³é”®ğŸŒŸ)

```c++
class Solution {
public:
    int longestCommonSubsequence(string text1, string text2) {
        // 1 å®šä¹‰dpæ•°ç»„ï¼š
      	// dp[i][j]è¡¨ç¤ºä»¥i - 1ç»“å°¾çš„text1å’Œä»¥j - 1ç»“å°¾çš„text2çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ï¼›
        vector<vector<int>> dp(text1.size() + 1, vector<int>(text2.size() + 1, 0));

        // 2 é€’æ¨
        int ans = 0;
        for (int i = 1; i <= text1.size(); i ++ ) {
            for (int j = 1; j <= text2.size(); j ++ ) {
                // printf("%d %d\n", nums1[i - 1], nums2[j - 1]);
                if (text1[i - 1] == text2[j - 1]) {  // ç”±äºdpå„å¤šä¸€ç»´ï¼Œè¿™é‡Œè¦ - 1æ‰å¯¹åº”åˆ°text
                    dp[i][j] = dp[i - 1][j - 1] + 1;
                    if (ans < dp[i][j]) ans = dp[i][j];
                } else {
                    dp[i][j] = max(dp[i][j - 1], dp[i - 1][j]);
                }
            }
        }

        // for (vector<int> row : dp) {
        //     for (int i : row) printf("%d ", i);
        //     printf("\n");
        // }

        return ans;
    }
};
```

### [72. ç¼–è¾‘è·ç¦»](https://leetcode.cn/problems/edit-distance/)ğŸŒŸ

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸¤ä¸ªå•è¯ `word1` å’Œ `word2`ï¼Œ *è¯·è¿”å›å°† `word1` è½¬æ¢æˆ `word2` æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•°* ã€‚

ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š

- æ’å…¥ä¸€ä¸ªå­—ç¬¦
- åˆ é™¤ä¸€ä¸ªå­—ç¬¦
- æ›¿æ¢ä¸€ä¸ªå­—ç¬¦

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šword1 = "horse", word2 = "ros"
è¾“å‡ºï¼š3
è§£é‡Šï¼š
horse -> rorse (å°† 'h' æ›¿æ¢ä¸º 'r')
rorse -> rose (åˆ é™¤ 'r')
rose -> ros (åˆ é™¤ 'e')
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šword1 = "intention", word2 = "execution"
è¾“å‡ºï¼š5
è§£é‡Šï¼š
intention -> inention (åˆ é™¤ 't')
inention -> enention (å°† 'i' æ›¿æ¢ä¸º 'e')
enention -> exention (å°† 'n' æ›¿æ¢ä¸º 'x')
exention -> exection (å°† 'n' æ›¿æ¢ä¸º 'c')
exection -> execution (æ’å…¥ 'u')
```

**æç¤ºï¼š**

- `0 <= word1.length, word2.length <= 500`
- `word1` å’Œ `word2` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

#### é¢˜è§£

ä¸ä¸Šé¢ 5. æœ€é•¿å›æ–‡å­ä¸²ã€1143. æœ€é•¿å…¬å…±å­åºåˆ— å±äºåŒä¸€ç±»å‹ã€‚

1. å®šä¹‰dpæ•°ç»„ï¼šä»¥i - 1ç»“å°¾çš„word1è½¬åŒ–æˆä»¥j - 1ç»“å°¾çš„word2æ‰€éœ€çš„æœ€å°æ­¥æ•°ä¸ºdp\[i][j]ã€‚

2. åˆå§‹åŒ–dpæ•°ç»„ï¼šéœ€è¦ä»¤dp\[i][0] = iã€dp\[0][j] = jï¼Œå› ä¸ºä»¥i - 1ç»“å°¾çš„word1è½¬åŒ–ä¸ºä»¥ - 1ç»“å°¾çš„word2ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰éœ€è¦â€œå¢â€iä¸ªå­—ç¬¦ï¼ˆæ“ä½œæ•°ä¸ºiï¼‰ï¼Œåä¹‹åŒç†ã€‚

3. é€’æ¨å…¬å¼ï¼Œéå†ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼š

   - å¦‚æœå½“å‰å­—ç¬¦åŒ¹é…ï¼Œword1[i - 1] == word2[j - 1]ï¼Œåˆ™å½“å‰æ­¥ä¸ç”¨æ“ä½œï¼Œ

     ä»¤`dp[i][j] = dp[i - 1][j - 1];`

   - å¦‚æœä¸åŒ¹é…ï¼Œåˆ™éœ€è¦æ¯”è¾ƒâ€œå¢åˆ æ”¹â€ä¸‰ç§æ–¹å¼çš„æœ€å°‘æ“ä½œæ•°ï¼š

     - æ“ä½œä¸€ï¼šword1åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±æ˜¯ä»¥ä¸‹æ ‡i - 2ä¸ºç»“å°¾çš„word1 ä¸ j-1ä¸ºç»“å°¾çš„word2çš„æœ€è¿‘ç¼–è¾‘è·ç¦» å†åŠ ä¸Šä¸€ä¸ªæ“ä½œã€‚å³ `dp[i][j] = dp[i - 1][j] + 1;`
     - æ“ä½œäºŒï¼šword2åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼ˆç­‰ä»·äºword1æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œé‚£ä¹ˆå°±æ˜¯ä»¥ä¸‹æ ‡i - 1ä¸ºç»“å°¾çš„word1 ä¸ j-2ä¸ºç»“å°¾çš„word2çš„æœ€è¿‘ç¼–è¾‘è·ç¦» å†åŠ ä¸Šä¸€ä¸ªæ“ä½œã€‚å³ `dp[i][j] = dp[i][j - 1] + 1;`
     - æ“ä½œä¸‰ï¼šæ›¿æ¢å…ƒç´ ï¼Œ`word1`æ›¿æ¢`word1[i - 1]`ï¼Œä½¿å…¶ä¸`word2[j - 1]`ç›¸åŒï¼Œ`dp[i][j] = dp[i - 1][j - 1] + 1;`

     > æ¨å¯¼äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰ä»dpæ•°ç»„çš„è§’åº¦æ²¡é‚£ä¹ˆå¥½ç†è§£ï¼Œåªè¦è®°ä½æ˜¯ä»â€œå·¦ã€ä¸Šã€å·¦ä¸Šâ€è¿™ä¸‰ä¸ªæ–¹å‘æ¨å‡ºæ¥çš„å°±å¯ä»¥ã€‚

```c++
class Solution {
public:
    int minDistance(string word1, string word2) {
        // 1 å®šä¹‰dpï¼šä»¥i - 1ç»“å°¾çš„word1è½¬åŒ–æˆä»¥j - 1ç»“å°¾çš„word2æ‰€éœ€çš„æœ€å°æ­¥æ•°ä¸ºdp[i][j]
        vector<vector<int>> dp(word1.size() + 1, vector<int>(word2.size() + 1, 0));

        // 2 åˆå§‹åŒ–dp
        for (int i = 0; i <= word1.size(); i ++ ) dp[i][0] = i;
        for (int j = 0; j <= word2.size(); j ++ ) dp[0][j] = j;

        // 3 é€’æ¨
        for (int i = 1; i <= word1.size(); i ++ ) {
            for (int j = 1; j <= word2.size(); j ++ ) {
                if (word1[i - 1] == word2[j - 1]) {  // å¦‚æœå½“å‰ç›¸åŒï¼Œå½“å‰æ­¥ä¸ç”¨æ“ä½œ
                    dp[i][j] = dp[i - 1][j - 1];
                }
                else {  // å¢åˆ æ”¹
                    dp[i][j] = min({dp[i - 1][j - 1], dp[i - 1][j], dp[i][j - 1]}) + 1;
                }
            }
        }

        return dp[word1.size()][word2.size()];
    }
};
```



## æŠ€å·§

### [136. åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—](https://leetcode.cn/problems/single-number/)

#### é¢˜ç›®æè¿°

#### é¢˜è§£

 <img src="./assets/image-20250423145440964.png" alt="image-20250423145440964" style="zoom:40%;" />

 <img src="./assets/1611393960-EnUIaQ-Picture1.png" alt="Picture1.png" style="zoom:35%;" />

> å¼‚æˆ–è¿ç®—æ»¡è¶³äº¤æ¢å¾‹ *a*âŠ•*b*=*b*âŠ•*a* ï¼Œå³ä»¥ä¸Šè¿ç®—ç»“æœä¸ *nums* çš„å…ƒç´ é¡ºåºæ— å…³ã€‚

```c++
class Solution {
public:
    int singleNumber(vector<int>& nums) {
        int x = 0;
        for (int num : nums)  // 1. éå† nums æ‰§è¡Œå¼‚æˆ–è¿ç®—
            x ^= num;
        return x;            // 2. è¿”å›å‡ºç°ä¸€æ¬¡çš„æ•°å­— x
    }
};
```

### [169. å¤šæ•°å…ƒç´ ](https://leetcode.cn/problems/majority-element/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªå¤§å°ä¸º `n` çš„æ•°ç»„ `nums` ï¼Œè¿”å›å…¶ä¸­çš„å¤šæ•°å…ƒç´ ã€‚å¤šæ•°å…ƒç´ æ˜¯æŒ‡åœ¨æ•°ç»„ä¸­å‡ºç°æ¬¡æ•° **å¤§äº** `âŒŠ n/2 âŒ‹` çš„å…ƒç´ ã€‚

ä½ å¯ä»¥å‡è®¾æ•°ç»„æ˜¯éç©ºçš„ï¼Œå¹¶ä¸”ç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´ ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [3,2,3]
è¾“å‡ºï¼š3
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [2,2,1,1,1,2,2]
è¾“å‡ºï¼š2
```

**æç¤ºï¼š**

- `n == nums.length`
- `1 <= n <= 5 * 104`
- `-109 <= nums[i] <= 109`

**è¿›é˜¶ï¼š**å°è¯•è®¾è®¡æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€ç©ºé—´å¤æ‚åº¦ä¸º O(1) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

#### é¢˜è§£

**æ‘©å°”æŠ•ç¥¨æ³•ï¼š** æ ¸å¿ƒç†å¿µä¸º **ç¥¨æ•°æ­£è´ŸæŠµæ¶ˆ** ã€‚æ­¤æ–¹æ³•æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦åˆ†åˆ«ä¸º *O*(*N*) å’Œ *O*(1) ï¼Œä¸ºæœ¬é¢˜çš„æœ€ä½³è§£æ³•ã€‚

 <img src="./assets/image-20250423150619499.png" alt="image-20250423150619499" style="zoom:40%;" />

 <img src="./assets/image-20250423150639245.png" alt="image-20250423150639245" style="zoom:40%;" />

```c++
class Solution {
public:
    int majorityElement(vector<int>& nums) {
        int x = nums[0];  // å¦‚æœæœ‰å¤šæ•°å…ƒç´ ï¼Œxæœ€ç»ˆæŒ‡å‘å¤šæ•°å…ƒç´ 
        int votes = 0;
        for (int num : nums) {
            if (votes == 0) x = num;
            if (num == x) {
                votes++;
            } else votes--;
        }

        return x;
    }
};
```

> å¦‚æœæœ¬é¢˜æ²¡æœ‰è¯´æ˜â€œç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´ â€ï¼Œæœ€åè¿˜è¦ç»Ÿè®¡éªŒè¯ `x` çš„æ•°é‡æ˜¯å¦è¶…è¿‡æ•°ç»„é•¿åº¦ä¸€åŠã€‚

### [75. é¢œè‰²åˆ†ç±»](https://leetcode.cn/problems/sort-colors/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªåŒ…å«çº¢è‰²ã€ç™½è‰²å’Œè“è‰²ã€å…± `n` ä¸ªå…ƒç´ çš„æ•°ç»„ `nums` ï¼Œ**[åŸåœ°](https://baike.baidu.com/item/åŸåœ°ç®—æ³•)** å¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œä½¿å¾—ç›¸åŒé¢œè‰²çš„å…ƒç´ ç›¸é‚»ï¼Œå¹¶æŒ‰ç…§çº¢è‰²ã€ç™½è‰²ã€è“è‰²é¡ºåºæ’åˆ—ã€‚

æˆ‘ä»¬ä½¿ç”¨æ•´æ•° `0`ã€ `1` å’Œ `2` åˆ†åˆ«è¡¨ç¤ºçº¢è‰²ã€ç™½è‰²å’Œè“è‰²ã€‚

å¿…é¡»åœ¨ä¸ä½¿ç”¨åº“å†…ç½®çš„ sort å‡½æ•°çš„æƒ…å†µä¸‹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [2,0,2,1,1,0]
è¾“å‡ºï¼š[0,0,1,1,2,2]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [2,0,1]
è¾“å‡ºï¼š[0,1,2]
```

**æç¤ºï¼š**

- `n == nums.length`
- `1 <= n <= 300`
- `nums[i]` ä¸º `0`ã€`1` æˆ– `2`

**è¿›é˜¶ï¼š**

- ä½ èƒ½æƒ³å‡ºä¸€ä¸ªä»…ä½¿ç”¨å¸¸æ•°ç©ºé—´çš„ä¸€è¶Ÿæ‰«æç®—æ³•å—ï¼Ÿ

#### é¢˜è§£

**åŒæŒ‡é’ˆ**

1. æŒ‡é’ˆ *p*0 æ¥äº¤æ¢ 0ï¼Œ*p*1 æ¥äº¤æ¢ 1ï¼Œåˆå§‹å€¼éƒ½ä¸º 0ï¼›
2. ä»å·¦å‘å³éå†æ•´ä¸ªæ•°ç»„ï¼š
   - å¦‚æœæ‰¾åˆ°äº† 1ï¼Œé‚£ä¹ˆå°†å…¶ä¸ *nums*[*p*1] è¿›è¡Œäº¤æ¢ï¼Œå¹¶å°† *p*1 å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼›
   - å¦‚æœæ‰¾åˆ°äº† 0ï¼š
     - å¦‚æœp1 = p0ï¼Œé‚£ä¹ˆå°†å…¶ä¸ *nums*[*p*0] è¿›è¡Œäº¤æ¢ï¼Œå¹¶å°† p0ï¼Œp1 åŒæ—¶å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚
     - å¦‚æœp1 > p0ï¼Œè¿˜æ²¡äº¤æ¢çš„æ—¶å€™p1æ˜¯æŒ‡åœ¨äº†â€œæ•°å€¼ä¸º1â€çš„ä½ç½®ä¸Šï¼Œå› æ­¤éœ€è¦â€œå…ˆä¸ *nums*[*p*0] è¿›è¡Œäº¤æ¢â€ï¼Œï¼ˆæ­¤æ—¶nums[i]ä½ç½®ä¸Šæ˜¯1ï¼‰ï¼Œç„¶åâ€œå†ä¸ *nums*[*p*1] è¿›è¡Œäº¤æ¢â€ã€‚

```c++
class Solution {
public:
    void sortColors(vector<int>& nums) {
        int p0 = 0, p1 = 0;
        for (int i = 0; i < nums.size(); i ++ ) {
            if (nums[i] == 1) {
                swap(nums[i], nums[p1++]);
            } 
            if (nums[i] == 0) {
                swap(nums[i], nums[p0]);
                if (p0 < p1) {
                    swap(nums[i], nums[p1]);
                }
                p0++; p1++;
            }
            // for (int n : nums) printf("%d ", n);
            printf("\n");
        }
    }
};
```

### [31. ä¸‹ä¸€ä¸ªæ’åˆ—](https://leetcode.cn/problems/next-permutation/)

#### é¢˜ç›®æè¿°

æ•´æ•°æ•°ç»„çš„ä¸€ä¸ª **æ’åˆ—** å°±æ˜¯å°†å…¶æ‰€æœ‰æˆå‘˜ä»¥åºåˆ—æˆ–çº¿æ€§é¡ºåºæ’åˆ—ã€‚

- ä¾‹å¦‚ï¼Œ`arr = [1,2,3]` ï¼Œä»¥ä¸‹è¿™äº›éƒ½å¯ä»¥è§†ä½œ `arr` çš„æ’åˆ—ï¼š`[1,2,3]`ã€`[1,3,2]`ã€`[3,1,2]`ã€`[2,3,1]` ã€‚

æ•´æ•°æ•°ç»„çš„ **ä¸‹ä¸€ä¸ªæ’åˆ—** æ˜¯æŒ‡å…¶æ•´æ•°çš„ä¸‹ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚æ›´æ­£å¼åœ°ï¼Œå¦‚æœæ•°ç»„çš„æ‰€æœ‰æ’åˆ—æ ¹æ®å…¶å­—å…¸é¡ºåºä»å°åˆ°å¤§æ’åˆ—åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæ•°ç»„çš„ **ä¸‹ä¸€ä¸ªæ’åˆ—** å°±æ˜¯åœ¨è¿™ä¸ªæœ‰åºå®¹å™¨ä¸­æ’åœ¨å®ƒåé¢çš„é‚£ä¸ªæ’åˆ—ã€‚å¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„å¿…é¡»é‡æ’ä¸ºå­—å…¸åºæœ€å°çš„æ’åˆ—ï¼ˆå³ï¼Œå…¶å…ƒç´ æŒ‰å‡åºæ’åˆ—ï¼‰ã€‚

- ä¾‹å¦‚ï¼Œ`arr = [1,2,3]` çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ `[1,3,2]` ã€‚
- ç±»ä¼¼åœ°ï¼Œ`arr = [2,3,1]` çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ `[3,1,2]` ã€‚
- è€Œ `arr = [3,2,1]` çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ `[1,2,3]` ï¼Œå› ä¸º `[3,2,1]` ä¸å­˜åœ¨ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ‰¾å‡º `nums` çš„ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚

å¿…é¡»**[ åŸåœ° ](https://baike.baidu.com/item/åŸåœ°ç®—æ³•)**ä¿®æ”¹ï¼Œåªå…è®¸ä½¿ç”¨é¢å¤–å¸¸æ•°ç©ºé—´ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[1,3,2]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [3,2,1]
è¾“å‡ºï¼š[1,2,3]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1,1,5]
è¾“å‡ºï¼š[1,5,1]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 100`
- `0 <= nums[i] <= 100`

#### é¢˜è§£

> è¿™ç±»æŠ€å·§é¢˜ï¼Œè®°ä½æ–¹æ³•å¾ˆé‡è¦ï¼Œæ€»ç»“ä¸å‡ºä»€ä¹ˆå›ºå®šçš„å¥—è·¯ã€‚
>
> å‚è€ƒé¢˜è§£ï¼š[ä¸‹ä¸€ä¸ªæ’åˆ—ç®—æ³•â€”â€”çµèŒ¶å±±è‰¾åºœ](https://leetcode.cn/problems/next-permutation/solutions/3621022/jiao-ni-cong-ling-kai-shi-si-kao-zhe-ti-9qfrq/)

ä»¥[1,3,5,4,2]ä¸ºä¾‹ï¼š

1. ä»å³å‘å·¦ï¼Œæ‰¾ç¬¬ä¸€ä¸ªæ•°å­— xï¼Œæ»¡è¶³ x å³è¾¹æœ‰å¤§äº x çš„æ•°ï¼Œè¿™æ ·å¯ä»¥æŠŠ x å˜å¤§ã€‚æˆ‘ä»¬æ‰¾åˆ°çš„æ•°æ˜¯ 3ã€‚æ³¨æ„åˆ°ï¼Œ3 å³è¾¹çš„æ•°æ˜¯å•è°ƒé€’å‡çš„ï¼ˆè¯æ˜è§ç­”ç–‘ï¼‰ï¼Œæ‰€ä»¥ 3 å³ä¾§ç›¸é‚»æ•°å­—å°±æ˜¯ 3 å³è¾¹æœ€å¤§çš„æ•°ã€‚å¦‚æœ 3 å³ä¾§ç›¸é‚»æ•°å­—å°äº 3ï¼Œé‚£ä¹ˆ 3 å³è¾¹å¿…ç„¶æ²¡æœ‰å¤§äº 3 çš„æ•°ã€‚

   å› æ­¤ï¼Œè¿™ä¸€æ­¥å¯ä»¥ç®€åŒ–ä¸ºï¼Œ**ä»å³å‘å·¦ï¼Œæ‰¾ç¬¬ä¸€ä¸ªå°äºå³ä¾§ç›¸é‚»æ•°å­—çš„æ•° xã€‚**

2. **ï¼ˆä»å³å‘å·¦ï¼‰æ‰¾ 3 å³è¾¹æœ€å°çš„å¤§äº 3 çš„æ•°ï¼Œå³ 4ã€‚**ç”±äº 3 å³è¾¹çš„æ•°æ˜¯å•è°ƒé€’å‡çš„ï¼Œæ‰€ä»¥**ä»å³å‘å·¦æ‰¾**åˆ°çš„ç¬¬ä¸€ä¸ªå¤§äº 3 çš„æ•°ï¼Œå°±æ˜¯ 3 å³è¾¹æœ€å°çš„å¤§äº 3 çš„æ•°ã€‚ç„¶åæŠŠ 4 æ”¾åˆ° 3 çš„ä½ç½®ä¸Šï¼ŒæŠŠ 3 æ”¾åˆ°å³è¾¹çš„ä¸‰ä¸ªä½ç½®ä¸­ã€‚è¿™ä¸€æ­¥å¯ä»¥ç®€åŒ–ä¸º**äº¤æ¢ 3 å’Œ** 4ã€‚äº¤æ¢åå¾—åˆ° [1,4,5,3,2]ã€‚æ³¨æ„äº¤æ¢å 5,4,2 å˜æˆ 5,3,2ï¼Œä»ç„¶æ˜¯å•è°ƒé€’å‡çš„ï¼ˆè¯æ˜è§ç­”ç–‘ï¼‰ã€‚

3. **æŠŠ 4 å³è¾¹çš„æ•°ä»å°åˆ°å¤§æ’åº**ã€‚ç”±äºç¬¬äºŒæ­¥äº¤æ¢åï¼Œ4 å³è¾¹çš„æ•° 5,3,2 æ˜¯å•è°ƒé€’å‡çš„ï¼Œæ‰€ä»¥åªéœ€è¦æŠŠ 5,3,2 åè½¬ï¼Œ**å°±å¾—åˆ°äº†ç­”æ¡ˆ [1,4,2,3,5]**ã€‚

```c++
class Solution {
public:
    void nextPermutation(vector<int>& nums) {
        // 1 ä»å³å‘å·¦ï¼Œæ‰¾ç¬¬ä¸€ä¸ªå°äºå³ä¾§ç›¸é‚»æ•°å­—çš„æ•° x
        int index = nums.size() - 2;
        while (index >= 0 && nums[index] >= nums[index + 1]) {
            index--;
        }
        
        // å¦‚æœæ‰¾åˆ°äº†ï¼Œè¿›å…¥ç¬¬äºŒæ­¥ï¼›å¦åˆ™è·³è¿‡ç¬¬äºŒæ­¥ï¼Œåè½¬æ•´ä¸ªæ•°ç»„
        if (index >= 0) {
            // 2 æ‰¾ x å³è¾¹æœ€å°çš„å¤§äº x çš„æ•°
            for (int i = nums.size() - 1; i > index; i -- ) {
                if (nums[i] > nums[index]) {
                    swap(nums[index], nums[i]);
                    break;
                }
            }
        }
        

        // 3 æŠŠ index å³è¾¹çš„æ•°ä»å°åˆ°å¤§æ’åº
        reverse(nums.begin() + index + 1, nums.end());
    }
};
```

### [287. å¯»æ‰¾é‡å¤æ•°](https://leetcode.cn/problems/find-the-duplicate-number/)

#### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªåŒ…å« `n + 1` ä¸ªæ•´æ•°çš„æ•°ç»„ `nums` ï¼Œå…¶æ•°å­—éƒ½åœ¨ `[1, n]` èŒƒå›´å†…ï¼ˆåŒ…æ‹¬ `1` å’Œ `n`ï¼‰ï¼Œå¯çŸ¥è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•´æ•°ã€‚

å‡è®¾ `nums` åªæœ‰ **ä¸€ä¸ªé‡å¤çš„æ•´æ•°** ï¼Œè¿”å› **è¿™ä¸ªé‡å¤çš„æ•°** ã€‚

ä½ è®¾è®¡çš„è§£å†³æ–¹æ¡ˆå¿…é¡» **ä¸ä¿®æ”¹** æ•°ç»„ `nums` ä¸”åªç”¨å¸¸é‡çº§ `O(1)` çš„é¢å¤–ç©ºé—´ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,3,4,2,2]
è¾“å‡ºï¼š2
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [3,1,3,4,2]
è¾“å‡ºï¼š3
```

**ç¤ºä¾‹ 3 :**

```
è¾“å…¥ï¼šnums = [3,3,3,3,3]
è¾“å‡ºï¼š3
```

**æç¤ºï¼š**

- `1 <= n <= 105`
- `nums.length == n + 1`
- `1 <= nums[i] <= n`
- `nums` ä¸­ **åªæœ‰ä¸€ä¸ªæ•´æ•°** å‡ºç° **ä¸¤æ¬¡æˆ–å¤šæ¬¡** ï¼Œå…¶ä½™æ•´æ•°å‡åªå‡ºç° **ä¸€æ¬¡** 

**è¿›é˜¶ï¼š**

- å¦‚ä½•è¯æ˜ `nums` ä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•°å­—?
- ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªçº¿æ€§çº§æ—¶é—´å¤æ‚åº¦ `O(n)` çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ

#### é¢˜è§£

**å¿«æ…¢æŒ‡é’ˆ**

ç”±äºé¢˜ç›®ç»™å‡ºï¼š `n + 1` é•¿åº¦çš„æ•°ç»„ `nums`ï¼Œå…¶æ•°å­—éƒ½åœ¨ `[1, n]` èŒƒå›´å†…ï¼ˆåŒ…æ‹¬ `1` å’Œ `n`ï¼‰ï¼Œå› æ­¤ä»»æ„æ•°ç»„å†…çš„å…ƒç´ éƒ½å¯ä»¥ä½œä¸ºè¯¥æ•°ç»„çš„ä¸‹æ ‡ï¼Œä¹Ÿå°±æ˜¯è¯´`nums[nums[index]]`æ˜¯å¯ç”¨çš„ã€‚

> ä¸¾ä¾‹æ¥è¯´ï¼šé•¿åº¦ä¸º6çš„nums, [1, 2, 3, 4, 5, 5]ã€‚
>
> åˆ™numsä¸­ä»»æ„å…ƒç´ éƒ½èƒ½å†æ¬¡ä½œä¸ºnumsçš„ç´¢å¼•ã€‚

è¿™æ ·å°±å¯ä»¥å°†è¿™ä¸ª**é¢˜ç›®**ç»™çš„**ç‰¹æ®Šçš„æ•°ç»„å½“ä½œä¸€ä¸ªé“¾è¡¨æ¥çœ‹**ï¼Œæ•°ç»„çš„ä¸‹æ ‡å°±æ˜¯æŒ‡å‘å…ƒç´ çš„æŒ‡é’ˆï¼ŒæŠŠæ•°ç»„çš„å…ƒç´ ä¹Ÿçœ‹ä½œæŒ‡é’ˆã€‚

 <img src="./assets/image-20250424154328993.png" alt="image-20250424154328993" style="zoom:40%;" />

 <img src="./assets/image-20250424154354538.png" alt="image-20250424154354538" style="zoom:40%;" />

> æœ‰ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆ fast = nums[nums[fast]]; slow = nums[slow]; å°±å¯ä»¥è®©fastæ¯”slowèµ°å¾—å¿«ï¼Œçœ‹èµ·æ¥åƒæ˜¯éšæœºè·³è·ƒï¼Ÿ
>
> ç­”ï¼šfast = nums[nums[fast]]ç›¸å½“äºæ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œslow = nums[slow]ç›¸å½“äºæ¯æ¬¡èµ°ä¸€æ­¥ï¼Œç›¸å½“äºfastæ¯æ¬¡æ¯”slowå¿«ä¸€æ­¥ï¼Œ**å¹¶ä¸”è™½ç„¶æ˜¯ç´¢å¼•è·³è·ƒä½†slowæ˜¯ä¸¥æ ¼æŒ‰ç…§fastçš„è·¯å¾„æ¥èµ°çš„**ï¼Œå› æ­¤slowå’Œfastä¸€å®šä¼šåœ¨ç¯å†…ç›¸é‡ã€‚

è¿™æ ·è¿™ä¸ªé—®é¢˜å°±å¯ä»¥å®Œå…¨æŒ‰ç…§â€œ141. ç¯å½¢é“¾è¡¨â€çš„æ€è·¯æ¥åšï¼Œä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­çš„æ¨å¯¼ï¼š

> å¯ä»¥çœ‹åˆ°é»„è‰²åœ†åœˆå†…å°±æ˜¯éœ€è¦æ‰¾çš„â€œé‡å¤çš„æ•°â€ï¼Œä¹Ÿå°±æ˜¯è¯´â€œç¯çš„å…¥å£èŠ‚ç‚¹â€å°±æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾çš„èŠ‚ç‚¹ã€‚

 <img src="./assets/image-20250424162948799.png" alt="image-20250424162948799" style="zoom:50%;" />

```c++
class Solution {
public:
    int findDuplicate(vector<int>& nums) {
        // 1 æ‰¾åˆ°ç¯
        int fast = 0, slow = 0;  // åŒæŒ‡é’ˆ
        while (true) {
            fast = nums[nums[fast]];
            slow = nums[slow];
            if (fast == slow) break;  // æ­¤æ—¶fast/slowä¸€å®šåœ¨ç¯å†…ï¼›
        }

        // 2 ç»Ÿè®¡ç¯å†…ä¸€å…±æœ‰å¤šå°‘å…ƒç´ 
        int count = 1;
        fast = nums[fast];
        while (fast != slow) {
            fast = nums[fast];
            count++;
        }

        // 3 å¯»æ‰¾å…¥ç¯èŠ‚ç‚¹
        fast = 0, slow = 0;
        while (count--) {  // fastå…ˆå‰è¿›countä¸ªèŠ‚ç‚¹
            fast = nums[fast];
        }

        while (fast != slow) {  // ä¸¤ä¸ªèŠ‚ç‚¹åŒæ—¶å‰è¿›ï¼Œç›¸é‡çš„æ—¶å€™å³æŒ‡å‘â€œé‡å¤çš„æ•°â€
            fast = nums[fast];
            slow = nums[slow];
        }

        return fast;  // æ³¨æ„è¿™é‡Œè¿”å›çš„æ˜¯fastï¼Œè€Œä¸æ˜¯nums[fast]
    }
};
```

















#### é¢˜ç›®æè¿°

#### é¢˜è§£