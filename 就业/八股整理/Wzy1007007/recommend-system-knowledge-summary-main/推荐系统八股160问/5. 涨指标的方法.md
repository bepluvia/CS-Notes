# 涨指标的方法

**1、推荐系统最核心的两个指标？简要解释留存的含义？其它核心指标和非核心指标？**

最核心的两个指标：日活用户数和留存。

留存的含义：以LT7为例，它代表的是某用户今天登录APP，未来7天有4天登录APP，那么该用户今天的留存LT7为4。留存通常是所有用户LT的平均，它的增长通常意味着用户体验提升，但阅读数、曝光数可能会下降。

其它核心指标：用户使用时长、总点击数、总曝光数、发布量、发布渗透率等；非核心指标：点击率、交互率等。

**2、简述涨指标有哪些方法？**

（1）改进或增加召回模型；（2）改进排序（粗排和精排）模型；（3）提升召回、粗排、精排的多样性；（4）特殊对待新用户，低活用户人群；（5）利用关注、转发、评论三种交互行为。

**3、简述如何改进召回模型？**

改进召回模型，从双塔模型和item-to-item两大最重要的模型入手，也可以添加某些召回模型和内容池（按时限划分），得到多条召回通道。

**4、双塔模型的改进方向有哪些？**

（1）优化正负样本的选取：简单正样本、简单&复杂负样本；（2）改进神经网络结构（实际不提倡）：如用户塔、物品塔的全连接网络用DCN代替，在用户塔中采用用户行为序列（通常要离线训练和储存），使用多向量模型等；（3）改进模型训练方法：如batch内负采样（要纠偏），采用自监督学习方法等。

**5、item-to-item的常见变体有哪些？**

U2I2I（物品间的相似）、Swing（考虑小圈子因素）、U2U2I（用户间的相似）、U2A2I（考虑用户感兴趣的作者）、U2A2A2I（考虑作者间的相似）等。

**6、如何改进精排模型？**

基座部分（特征神经网络处理部分）：将基座加宽加深，增加预测准确性；做特征交叉，如bilinear、LHUC等；特征工程，如添加统计/多模态内容特征。

多目标预估部分：增加新的预估目标；使用MMoE、PLE等结构、引入偏差特征的处理模块。

**7、如何改进粗排模型？这种方法的缺点？**

采用粗精排一致性建模，让粗排和精排更一致，能提升核心指标：（1）pointwise蒸馏：设y为用户真实行为，p为精排预估，将(y+p)/2作为粗排拟合目标；（2）pairwise/listwise蒸馏：粗排阶段做LTR，去拟合物品精排的排序，若排序和精排不同则给予惩罚。

缺点：如果精排出问题，会对粗排的训练和预测带来影响。

**8、如何对用户行为序列建模方式改进？**

（1）增加序列长度（SIM）；（2）用类目、物品向量表征聚类，线上排序时保留候选物品对应聚类序号的物品；（3）对行为序列中的物品，使用ID以外的一些特征。

**9、在线学习指的是哪种更新？资源消耗和额外算力情况？**

在线学习，即增量更新。每天既要在凌晨做全量更新，也要不间断做增量更新，因此需要额外算力。如果线上有m个模型，则需要m套在线学习的机器。其中1个是holdout，1个是推全模型，剩下m-2个即为测试新模型。在线学习对指标提升很大，但会降低模型迭代升级效率。

**10、老汤模型的内容？如何判断新模型结构优于老模型？如何更快追平、超过线上老模型？**

内容：每天新产生的数据对模型做1 epoch训练，久而久之，老模型训练的非常好，很难被超过。

判断新模型优于老模型，只需要判断新老模型谁的结构更优，新模型的全连接层和embedding层可以采用老模型相同的参数，用n天的数据训练新老模型，如果新模型显著优于老模型，新模型很可能更优。

要追平、超过线上老模型，可以尽量多复用老模型训练好的embedding层，避免随机初始化；也可以用老模型做teacher，蒸馏新模型（真实行为y，老模型预测p，新模型用(y+p)/2作为训练目标）。

**11、如何提升精排多样性？**

结合兴趣分数和多样性分数对物品排序，常用方法是MMR、DPP，并结合滑动窗口和打散规则。

**12、如何提升粗排多样性？**

将粗排打分的几千个物品，选择分数最高的几百个物品送入精排，剩余物品计算兴趣分数和多样性分数再进行排序，再选出几百个物品送入精排，实现最终精排有这两个部分。

**13、提升召回多样性的两种模型？对应方式？**

双塔模型：（1）添加噪声：线上召回计算出用户向量之后，在ANN检索之前往用户向量中添加随机噪声，用户兴趣越窄，添加噪声更强，使得召回的物品更多样。（2）抽样用户行为序列：将用户最近交互的n个物品，保留最近的r个，再从n-r个物品中随机抽样t个，将r+t作为用户行为序列。这种方式可以注入随机性，且n可以非常大，得到用户很久以前的兴趣。

U2I2I：选出用户最近交互的n个物品之一，可能得到的类目数量很少。因此做非均匀随机采样，从n个物品（n可以很大）中选出t个让类目平衡。

**14、探索流量的内容？具体做法？依据是什么？**

内容：每个用户曝光物品有2%是非个性化的，做兴趣探索。

具体做法：维护一个精选内容池，里面的物品均为交互指标高的优质物品，从这个池中随机抽样几个物品，跳过排序，直接插入作为排序结果。

依据：用户个性化欠缺，就要通过提升物品质量来吸引用户，用高质量弥补个性化的损失，这样短期对核心指标会有负向影响，长期会带来正面影响。

**15、为什么要特殊对待特殊人群？**

（1）新用户、低活用户行为很少，个性化推荐不准确；（2）新用户、低活用户容易流失，要想办法促使他们的留存；（3）特殊用户的交互行为和主流用户有差异，用主流用户训练出的模型在他们身上有偏差。

**16、构造特殊内容池的目标？方式？**

目标：用于特殊人群的召回，保证内容质量好，提升用户满意度。

方式：（1）先圈定人群，然后用该人群对物品交互次数、交互率打分，选出分数最高的物品进入内容池。内容池要定期更新加入新物品，排除交互率低和失去时效性的老物品。（2）判断物品对人群留存率的贡献，根据贡献值选择物品。

**17、构建特殊内容池召回的模型？会带来哪些额外代价？**

模型：双塔模型。注意对于新用户而言，双塔模型个性化不准确，所以要高质量内容来弥补。

额外代价：（1）训练代价：正常用户不论多少个内容池，都只训练一个双塔模型，而新用户需要单独训练模型；（2）推理代价：内容池要定期更新，ANN索引也要更新，然而特殊内容池比较小，额外算力不大。

**18、如何使用特殊排序策略？**

（1）排除低质量物品：新发布物品不在新用户、低活用户上做探索，只在活跃的老用户上做探索，防止推荐不准损害新用户、低活用户的体验；（2）差异化融分公式：改变指标（如点击率）的权重，或直接保留该指标最高的几个物品，甚至直接把指标最高的物品放在第一位给用户推荐。

**19、使用特殊排序模型的方法有哪些？**

大模型+小模型：用全体用户训练大模型，大模型的预估p拟合用户真实行为y；再用特殊用户训练小模型，小模型的预估q拟合大模型残差y-p（类似GBDT），起到大模型纠偏的作用。主流用户只用大模型预估p，特殊用户用大模型和小模型预估p+q。

融合多个experts：用多个experts输出向量，再根据用户特征（新老、活跃度等）输出权重，对experts加权平均。

**20、关注和留存率的关系？**

关系：关注作者数量和留存率成正相关，关注的作者越多，该平台对他的吸引力越强。关注的作者少，就需要促使用户关注更多作者。

**21、如何利用关注行为提升留存和发布？**

提升留存：（1）优化排序策略：定义单调递减函数w(f)，用户关注作者越少，该函数越大。将该函数与对某物品的关注率p相乘，实现促进用户对该物品作者的关注；（2）构造促关注内容池和召回通道：物品关注率高，能促进作者的关注。当用户关注作者数少时，对该用户使用该内容池。

提升发布：作者粉丝数越少，则每增加一个粉丝对发布积极性的提升越大。定义单调递减函数w(f)，f为粉丝数量。将该函数与作者发布的物品关注率p相乘，帮助低粉作者涨粉。

**22、显式关注和隐式关注的含义？挖掘隐式关注的意义？**

显式关注：用户u关注了作者a，将a发布的物品直接推荐给u；

隐式关注：用户u喜欢看作者a发布的物品，但u未关注a。

隐式关注的作者数量远大于显式关注，挖掘隐式关注关系，构建U2A2I召回通道，可以提升推荐系统核心指标。

**23、如何利用转发提升推荐系统指标？目标是什么？识别方式？具体方法？**

简单提升转发次数，让转发率大的物品更容易获得曝光机会，但这样会负面影响交互情况，因此可采用KOL建模。

目标：不损害点击和其它交互的前提下，尽量多吸引站外流量，其它平台KOL（大V）转发的内容吸引流量更大。

识别方式：考察该用户历史转发能带来多少站外流量，例如转发到抖音的流量高，则可判断他可能是抖音的KOL。

具体方法：（1）在物品i的转发率p基础上乘一个k，如果用户在其它平台是KOL，则k更大，从而提升该用户发表的物品在本平台的流量，提升大盘指标；（2）也可以构造促转发内容池和召回通道，对站外KOL生效。

**24、评论的发布价值和留存价值？高质量评论的作用？**

发布价值：新物品获得评论能提升作者发布积极性，当新物品尚未获得很多评论时，则给预估评论率提权。

留存价值：给喜欢留评论和与作者互动的用户添加促评论内容池，促进他们在平台的互动和参与度，有利于提升用户留存。

高质量评论的作用：对作者、其他用户的留存有贡献，推荐系统常鼓励高质量评论用户多留评论。