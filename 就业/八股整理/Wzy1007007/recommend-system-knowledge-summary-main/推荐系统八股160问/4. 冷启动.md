# 冷启动

**1、什么是物品冷启动？冷启动的两种类型？哪种更复杂？**

物品冷启动：针对新发布的笔记和视频；分为用户上传的内容UGC和平台采购的PGC；UGC更复杂，物品质量差异更大。

**2、为什么要特殊对待新笔记？**

可以促进作者发布，增加作者发布笔记的动力，进而增大内容池；挖掘优质笔记，让每篇新笔记得到足够曝光。

**3、优化冷启动的目标？**

精准推荐：把新笔记推荐给合适用户；激励发布：流量向低曝光新笔记倾斜，激励作者发布；挖掘高潜：通过初期的流量试探，给每篇新笔记曝光机会，找到高质量笔记给予流量倾斜。

**4、作者侧的两大指标含义？反映了什么？**

发布渗透率=当日发布人数/日活人数，即每天发布笔记的作者比例；

人均发布量=当日发布笔记数量/日活人数，即平均每个人当日发表多少篇笔记。

作者侧指标反映了作者发布积极性，低曝光新笔记扶持越好，作者侧指标越高。

**5、用户侧的两类指标？反映了什么？大力扶持低曝光新笔记会发生什么？**

新笔记消费指标：新笔记的点击率、交互率。

大盘消费指标：消费时长、日活、月活。

大力扶持低曝光新笔记，作者侧发布指标变好，用户侧大盘消费指标变差。因为低曝光笔记缺乏用户交互，推荐不准，大力推荐这些笔记会使用户体验下降。

**6、内容侧指标指的是什么？**

内容侧指标指的是高热笔记占比（30天超过1000点击的笔记），高热笔记占比越高，冷启动阶段挖掘优质笔记的能力越强。

**7、冷启动的两大优化点？**

优化全链路：包括召回、排序，保证低曝光/新发布笔记能正常走完链路，且能被准确推荐；

流量调控：如何在新物品、老物品中分配流量。

**8、冷启动召回的难点？**

新笔记包含图片、文字、地点等信息，但缺乏用户交互信息，导致物品ID embedding没学好，进而使双塔模型效果不好，且ItemCF不适用。

**9、冷启动召回可以从哪些方面改进？**

双塔模型召回、类目和关键词召回、聚类召回、Look-Alike召回。

**10、如何对双塔模型进行改进，从而有利于冷启动？**

（1）新笔记使用default embedding，共享一个向量，default embedding是学习出来的；（2）查找topk个内容最相似的高曝光笔记，将它们的embedding取平均，作为新笔记的embedding；（3）采用多召回池（设置笔记的不同时限，如1小时内，5小时内等）让新笔记有更多曝光机会。

**11、类目/关键词召回的原理？有什么缺点？**

系统维护类目/关键词→笔记列表的索引，笔记列表中的笔记是按时间倒排的。根据用户画像中感兴趣的类目以及关键词，取对应笔记列表中最新的k篇笔记，作为召回结果。

缺点：只对刚刚发布的新笔记有效，过期限后就没法被召回；且根据类目/关键词做召回太宽泛，不够具体，缺乏个性化。

**12、聚类召回的基本思想？实现聚类的具体步骤？维护索引？**

基本思想：如果用户喜欢一篇笔记，那么他会喜欢内容相似的笔记。

具体步骤：采用k-means聚类法，根据笔记的类目和图文内容，把笔记映射成向量，对这些向量做聚类，划分为1000个cluster，记录每个cluster的中心方向。当一篇新笔记发布以后，将它映射成一个向量，从1000个cluster对应的向量中选择最相似的一个，作为新笔记的cluster。

维护索引：cluster→笔记ID列表（按时间倒排），召回时选择列表前几篇笔记。

**13、聚类进行线上召回的步骤？缺点？**

步骤：（1）给定用户ID，找到他的last-n交互的笔记列表，把这些笔记作为种子笔记；（2）把这些种子笔记映射到向量，寻找最相似的n个cluster；（3）从这些cluster中各取出最新的m篇笔记，因此最多取出mn篇新笔记。

缺点：只对刚刚发布的新笔记有效。

**14、聚类召回的训练步骤？如何选取正负样本？**

训练步骤：选择种子笔记和正负样本笔记求解余弦相似度，鼓励种子笔记和正样本相似度接近于1，和负样本相似度接近-1，采用Pairwise loss（triplet hinge loss或triplet logistic loss）训练。

正样本：算法选择高曝光/相同二级类目的笔记作为正样本，也可以利用ItemCF中的物品相似度选择正样本；负样本：随机选出字数较多（神经网络提取出的文本信息有效），笔记质量高的（避免图文无关）作为负样本。

**15、Look-Alike召回的基本思想？具体步骤？**

基本思想：考虑的是用户之间的相似度。把和新笔记有交互的用户作为新笔记的种子用户，若一个用户可能和种子用户相似，就用Look-Alike把新笔记在这些相似用户中扩散，两个用户的相似度用UserCF或用户ID embedding求余弦相似度得到。

具体步骤：将与新笔记交互的用户向量平均，作为新笔记的特征向量，每当有用户交互该笔记，就将它的特征向量更新，然后存入数据库中。每次将用户向量作为query在数据库中做查找，将相似度最高的几十个向量对应笔记给用户推送。

**16、流量调控有哪些技术？**

（1）在推荐结果中强插新笔记；（2）对新笔记的排序分数做提权；（3）通过提权，对新笔记做保量，保证新笔记的曝光达到一定数量；（4）差异化保量。

**17、新笔记提权的方式？提权的缺点？**

方式：在粗排和重排环节，对新笔记提权，使其占比和分数大幅提升。

缺点：曝光量对提权系数很敏感，不易精确控制曝光量，容易过分曝光或不充分曝光。

**18、新笔记保量的内容？方式？**

内容：不论笔记质量高低，都保证前24小时获得100次曝光。

方式：在原有提权系数的基础上，乘以额外的提权系数，发布时间越长，当前曝光次数越少，提权系数越高。

**19、新笔记保量的难点？给新笔记分数提权越多，是否对新笔记越有利？**

难点：由于提权系数调整较难，以及召回、排序存在不足等问题，保量成功率远低于100%；且线上环境变化（召回通道、排序模型、重排规则等）会导致保量失败。

给新笔记分数提权越多，会使新笔记曝光次数越多，但会把笔记推荐给不合适的受众，导致互动指标降低，被推荐系统打压，难以成为热门笔记。

**20、差异化保量的内容？具体做法？**

内容：不同笔记有不同的保量目标，普通笔记获得100次曝光，优质笔记获得100-500次曝光。

做法：先让笔记获得基础保量，即24小时100次曝光，再根据笔记内容的质量高低，和作者历史笔记的质量高低，给予额外保量，上限分别是200次曝光。

**21、冷启动用户侧AB测试方法？缺点？推全后diff缩小的原因？**

方法：将用户侧分为50%的实验组和50%的对照组，实验组采用新策略，将新笔记权重增大两倍，从而使实验组用户看到更多新笔记，对照组采用原策略，考察新笔记的CTR和用户消费时长的diff。

缺点：观测的结果是消费指标会变差，AB测试的diff是负数，这是因为新笔记虽然曝光变多，但曝光不精准，带来用户使用app时长贬低，体验变差。

推全后diff缩小的原因：推全后会面向更多用户群体，新笔记曝光更有可能获得用户的点击、点赞、收藏等。

**22、冷启动作者侧AB测试的三种方案简述？各自的缺点？**

方案一：用户侧100%用户面向100%的老笔记和两种策略的新笔记，新笔记分为50%的实验组和50%的对照组，实验组采用差异化保量，新笔记权重增大两倍，对照组用简单保量。缺点：（1）新笔记之间会抢流量；（2）新笔记会抢老笔记流量。最终导致推全后diff会减小甚至消失。

方案二：将用户侧分为50%实验组和50%对照组，实验组用户面向新笔记中50%的实验组（差异化保量），对照组用户面向新笔记50%的对照组（正常保量），避免了新笔记之间抢流量的问题。缺点：（1）新笔记会抢老笔记流量；（2）新笔记内容池减少一半，需要从差一点的笔记中选一半补上来，影响用户体验，消费指标下降。

方案三：在方案二的基础上把老笔记也分为50%的实验组和50%的对照组，实现老笔记、用户侧、新笔记实验组和对照组的50%-50%-50%对应。这种方式就像把app切成两半，消费指标会大跌。